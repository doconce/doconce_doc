<!--
HTML file automatically generated from DocOnce source
(https://github.com/doconce/doconce/)
doconce format html trouble.do.txt --pygments_html_style=default --no_preprocess --html_style=bootswatch_journal --no_mako
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/doconce/doconce/" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="DocOnce Troubleshooting and FAQ">
<meta name="keywords" content="how to debug DocOnce,debugging DocOnce,cite,acknowledge the DocOnce software,underscores,missing files,GitHub gh-pages missing files,missing files,GitHub gh-pages missing files,LaTeX environments,LaTeX styles,tailor LaTeX output,open links in new windows,movie problems,slides problems,slides problems,copyright,copyright,locale,multi-language support,non-English language support,spellcheck problems,spellcheck problems,exercise problems,abortion, undesired/wrong,termination, undesired/wrong,figure caption problems,link problems,link problems,verbatim inline code problems,verbatim inline code problems,verbatim inline code problems,non-English language support,non-English language support,movie problems,link problems,Google docs support,Google docs support,epub format,non-English language support,list problems,Externaldocuments:,Mako tips/problems,percent sign problems,debugging Mako code,debugging Mako code,undefined Mako variable,preprocessed files,customized admon,user-defined environments,minipage environment,tailor LaTeX output,LaTeX styles">
<title>DocOnce Troubleshooting and FAQ</title>
<!-- Bootstrap style: bootswatch_journal -->
<!-- doconce format html trouble.do.txt --pygments_html_style=default --no_preprocess --html_style=bootswatch_journal --no_mako -->
<link href="https://netdna.bootstrapcdn.com/bootswatch/3.1.1/journal/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->
<style type="text/css">
/* Add scrollbar to dropdown menus in bootstrap navigation bar */
.dropdown-menu {
   height: auto;
   max-height: 400px;
   overflow-x: hidden;
}
/* Adds an invisible element before each target to offset for the navigation
   bar */
.anchor::before {
  content:"";
  display:block;
  height:60px;      /* fixed header height for style bootswatch_journal */
  margin:-60px 0 0; /* negative fixed header height */
}
</style>
<!-- USER-DEFINED ENVIRONMENTS -->
</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Table of contents',
               1,
               'table_of_contents',
               'table_of_contents'),
              ('General topics', 1, None, 'general-topics'),
              ('How can I study error messages and warnings from DocOnce?',
               2,
               'sec:warnings',
               'sec:warnings'),
              ('How do I debug a DocOnce file that results in a strange error '
               'message?',
               2,
               'sec:debug',
               'sec:debug'),
              ('How do I cite and link to DocOnce?', 2, 'sec:cite', 'sec:cite'),
              ('Translation aborts when labels are not defined',
               2,
               None,
               'translation-aborts-when-labels-are-not-defined'),
              ('How to I control the table of contents?',
               2,
               'sec:toc_depth',
               'sec:toc_depth'),
              ('How can I add links to some resource on every page?',
               2,
               'sec:custom:navlinks',
               'sec:custom:navlinks'),
              ('Bootstrap HTML styles', 3, None, 'bootstrap-html-styles'),
              ('Vagrant HTML template', 3, None, 'vagrant-html-template'),
              ('Sphinx bootstrap theme', 3, None, 'sphinx-bootstrap-theme'),
              ('Why are underscores in text a potential problem?',
               2,
               'sec:underscore',
               'sec:underscore'),
              ('GitHub gh-pages will not display files starting with a dot or '
               'underscore',
               2,
               None,
               'github-gh-pages-will-not-display-files-starting-with-a-dot-or-underscore'),
              ('GitHub gh-pages will not display files',
               2,
               None,
               'github-gh-pages-will-not-display-files'),
              ("``Blank line is illegal in latex block'', but there is no "
               'blank line',
               2,
               None,
               'blank-line-is-illegal-in-latex-block-but-there-is-no-blank-line'),
              ('A newline in equations (double backslash) becomes single '
               'backslash and eats up spaces',
               2,
               None,
               'a-newline-in-equations-double-backslash-becomes-single-backslash-and-eats-up-spaces'),
              ('Preprocess error: unexpected EOF while parsing',
               2,
               None,
               'preprocess-error-unexpected-eof-while-parsing'),
              ('When I set a large portion of text in color, only a part of it '
               'becomes colored',
               2,
               None,
               'when-i-set-a-large-portion-of-text-in-color-only-a-part-of-it-becomes-colored'),
              ('How can I make use of a native LaTeX environments (example '
               'environment for instance)?',
               2,
               'trouble:latex:envir:native',
               'trouble:latex:envir:native'),
              ('How can I create a more tailored code environment in LaTeX '
               'than what DocOnce offers?',
               2,
               None,
               'how-can-i-create-a-more-tailored-code-environment-in-latex-than-what-doconce-offers'),
              ('How can links open in new tabs/windows',
               2,
               None,
               'how-can-links-open-in-new-tabs-windows'),
              ('Movies will not play in my broswer',
               2,
               None,
               'movies-will-not-play-in-my-broswer'),
              ('Reveal slides look strange in the browser',
               2,
               None,
               'reveal-slides-look-strange-in-the-browser'),
              ('How can I control the vertical spacing in slides?',
               2,
               None,
               'how-can-i-control-the-vertical-spacing-in-slides'),
              ('How do I insert a copyright?',
               2,
               'trouble:copyright',
               'trouble:copyright'),
              ('Other formats', 3, None, 'other-formats'),
              ('How can I get a copyright on every slide page?',
               2,
               None,
               'how-can-i-get-a-copyright-on-every-slide-page'),
              ("How do I get ``Figure'' written in another language?",
               2,
               'latex:custom:fig:name',
               'latex:custom:fig:name'),
              ('Spellcheck reports mistakes that I cannot find',
               2,
               None,
               'spellcheck-reports-mistakes-that-i-cannot-find'),
              ('Spellcheck reports a lot of mistakes related to LaTeX math',
               2,
               None,
               'spellcheck-reports-a-lot-of-mistakes-related-to-latex-math'),
              ('Text between subexercises are moved',
               2,
               None,
               'text-between-subexercises-are-moved'),
              ('DocOnce aborts because of a syntax error that is not an error',
               2,
               None,
               'doconce-aborts-because-of-a-syntax-error-that-is-not-an-error'),
              ('Figure captions are incomplete',
               2,
               None,
               'figure-captions-are-incomplete'),
              ('Problems with boldface and emphasize',
               2,
               None,
               'problems-with-boldface-and-emphasize'),
              ('Links to local directories do not work',
               2,
               None,
               'links-to-local-directories-do-not-work'),
              ('Links are not typeset correctly',
               2,
               None,
               'links-are-not-typeset-correctly'),
              ('Inline comment does not handle verbatim or emphasis right',
               2,
               None,
               'inline-comment-does-not-handle-verbatim-or-emphasis-right'),
              ('Inline verbatim code or boldface is not detected when used '
               'with a footnote',
               2,
               None,
               'inline-verbatim-code-or-boldface-is-not-detected-when-used-with-a-footnote'),
              ('Inline verbatim code is not detected',
               2,
               None,
               'inline-verbatim-code-is-not-detected'),
              ('Inline verbatim text is not formatted correctly',
               2,
               None,
               'inline-verbatim-text-is-not-formatted-correctly'),
              ('Strange non-English characters',
               2,
               None,
               'strange-non-english-characters'),
              ('Wrong Norwegian characters',
               2,
               None,
               'wrong-norwegian-characters'),
              ('Too short underlining of reST headlines',
               2,
               None,
               'too-short-underlining-of-rest-headlines'),
              ('Found `!bt` but no tex blocks extracted (BUG)',
               2,
               None,
               'found-bt-but-no-tex-blocks-extracted-bug'),
              ('Examples are typset with environment delimiters visible',
               2,
               None,
               'examples-are-typset-with-environment-delimiters-visible'),
              ('Emacs editing does not work properly because of "regexp '
               'overflow"',
               2,
               None,
               'emacs-editing-does-not-work-properly-because-of-regexp-overflow'),
              ('My machine hangs if I have many movies',
               2,
               None,
               'my-machine-hangs-if-i-have-many-movies'),
              ('How can I use quotes in a link?',
               2,
               None,
               'how-can-i-use-quotes-in-a-link'),
              ('Conversion from DocOnce to Google Docs',
               2,
               None,
               'conversion-from-doconce-to-google-docs'),
              ('Convesion from Google Docs to DocOnce',
               2,
               None,
               'convesion-from-google-docs-to-doconce'),
              ('Are there any tools for shared online writing of DocOnce '
               'documents?',
               2,
               None,
               'are-there-any-tools-for-shared-online-writing-of-doconce-documents'),
              ('Examples on seemingly legal syntax that fails',
               2,
               'trouble:pitfalls',
               'trouble:pitfalls'),
              ('Double bold/italic', 3, None, 'double-bold-italic'),
              ('Mix of bold/italic and math',
               3,
               None,
               'mix-of-bold-italic-and-math'),
              ('How can I make pressbooks.com books from DocOnce?',
               2,
               None,
               'how-can-i-make-pressbooks-com-books-from-doconce'),
              ('How can I produce ePub books from DocOnce?',
               2,
               'trouble:epub',
               'trouble:epub'),
              ('What about non-English languages and DocOnce?',
               2,
               'trouble:non_English',
               'trouble:non_English'),
              ('Lists look wrong', 2, None, 'lists-look-wrong'),
              ('How can I get an overview of all files that are included in a '
               'document?',
               2,
               None,
               'how-can-i-get-an-overview-of-all-files-that-are-included-in-a-document'),
              ('How to write the dollar sign for an amount in dollars?',
               2,
               None,
               'how-to-write-the-dollar-sign-for-an-amount-in-dollars'),
              ('Problems with Externaldocuments specifications',
               2,
               'trouble:Externaldocuments',
               'trouble:Externaldocuments'),
              ('What is the difference between doconce replace and doconce '
               'subst?',
               2,
               None,
               'what-is-the-difference-between-doconce-replace-and-doconce-subst'),
              ('Python raises regex exception after `@@@CODE` command',
               2,
               None,
               'python-raises-regex-exception-after-code-command'),
              ('Preprocess/Mako', 1, None, 'preprocess-mako'),
              ('List important things to remember when programming Mako',
               2,
               None,
               'list-important-things-to-remember-when-programming-mako'),
              ('The Mako preprocessor is fooled by DocOnce text',
               2,
               None,
               'the-mako-preprocessor-is-fooled-by-doconce-text'),
              ('The Mako preprocessor has problems with lines starting with '
               'percent sign',
               2,
               None,
               'the-mako-preprocessor-has-problems-with-lines-starting-with-percent-sign'),
              ('The Mako preprocessor gives syntax error in Python code',
               2,
               None,
               'the-mako-preprocessor-gives-syntax-error-in-python-code'),
              ('The Mako preprocessor gives strange error messages',
               2,
               None,
               'the-mako-preprocessor-gives-strange-error-messages'),
              ('The Mako preprocessor claims a variable is undefined',
               2,
               None,
               'the-mako-preprocessor-claims-a-variable-is-undefined'),
              ('Something goes wrong in the preprocessing step',
               2,
               None,
               'something-goes-wrong-in-the-preprocessing-step'),
              ('Preprocessor directives do not work',
               2,
               None,
               'preprocessor-directives-do-not-work'),
              ('Code or Tex Blocks', 1, None, 'code-or-tex-blocks'),
              ('Too long lines in math blocks',
               2,
               None,
               'too-long-lines-in-math-blocks'),
              ('Code or math block errors in reST',
               2,
               None,
               'code-or-math-block-errors-in-rest'),
              ('Strange errors around code or TeX blocks in reST',
               2,
               None,
               'strange-errors-around-code-or-tex-blocks-in-rest'),
              ('Something is wrong with a verbatim code block',
               2,
               None,
               'something-is-wrong-with-a-verbatim-code-block'),
              ('Code/TeX block is not shown in reST format',
               2,
               None,
               'code-tex-block-is-not-shown-in-rest-format'),
              ('Verbatim code blocks, figures and admons inside lists look '
               'ugly',
               2,
               None,
               'verbatim-code-blocks-figures-and-admons-inside-lists-look-ugly'),
              ('LaTeX code blocks inside lists look ugly',
               2,
               None,
               'latex-code-blocks-inside-lists-look-ugly'),
              ('LaTeX code appears prior to paragraph headings',
               2,
               None,
               'latex-code-appears-prior-to-paragraph-headings'),
              ('Numbered equations in exercise solutions change the equation '
               'numbers in the text...',
               2,
               None,
               'numbered-equations-in-exercise-solutions-change-the-equation-numbers-in-the-text'),
              ('reST/Sphinx', 1, None, 'rest-sphinx'),
              ('Math formulas are not rendered properly',
               2,
               None,
               'math-formulas-are-not-rendered-properly'),
              ('Sphinx directory generation aborts with ``label empty or too '
               "long''",
               2,
               None,
               'sphinx-directory-generation-aborts-with-label-empty-or-too-long'),
              ('Title level inconsistent', 2, None, 'title-level-inconsistent'),
              ('Subsection headings appear at the level of sections in the '
               'table of contents',
               2,
               None,
               'subsection-headings-appear-at-the-level-of-sections-in-the-table-of-contents'),
              ('Lists do not appear in .rst files',
               2,
               None,
               'lists-do-not-appear-in-rst-files'),
              ('Error message "Undefined substitution..." from reST',
               2,
               None,
               'error-message-undefined-substitution-from-rest'),
              ('Warning about duplicate link names',
               2,
               None,
               'warning-about-duplicate-link-names'),
              ('Inconsistent headings in reST',
               2,
               None,
               'inconsistent-headings-in-rest'),
              ('No code environment appears before "bc ipy" blocks',
               2,
               None,
               'no-code-environment-appears-before-bc-ipy-blocks'),
              ('LaTeX', 1, None, 'latex'),
              ('Lines are too long', 2, None, 'lines-are-too-long'),
              ('Tables get too wide - need to wrap text in the columns',
               2,
               None,
               'tables-get-too-wide-need-to-wrap-text-in-the-columns'),
              ('Tables are too long', 2, None, 'tables-are-too-long'),
              ('Table inside user-defined environment does not work',
               2,
               None,
               'table-inside-user-defined-environment-does-not-work'),
              ('Strange `begin{description}` error arising from math',
               2,
               None,
               'strange-begin-description-error-arising-from-math'),
              ('Inline figures should have more vertical space',
               2,
               None,
               'inline-figures-should-have-more-vertical-space'),
              ('How can I use a special package for typesetting code?K (not '
               '`pyg`, `lst`, or `vrb`)',
               2,
               None,
               'how-can-i-use-a-special-package-for-typesetting-code-k-not-pyg-lst-or-vrb'),
              ('Sphinx and HTML show pygmetized code, but not LaTeX',
               2,
               None,
               'sphinx-and-html-show-pygmetized-code-but-not-latex'),
              ('LaTeX error because of underscores',
               2,
               None,
               'latex-error-because-of-underscores'),
              ('LaTeX does not like underscores in URLs',
               2,
               None,
               'latex-does-not-like-underscores-in-urls'),
              ('Inline verbatim fails in admon headings',
               2,
               None,
               'inline-verbatim-fails-in-admon-headings'),
              ('How can I customize the look of an admonition?',
               2,
               None,
               'how-can-i-customize-the-look-of-an-admonition'),
              ('How can I have unnumbered sections?',
               2,
               None,
               'how-can-i-have-unnumbered-sections'),
              ('LaTeX suddenly places figures differently',
               2,
               None,
               'latex-suddenly-places-figures-differently'),
              ('I want figure references with page number too',
               2,
               'trouble:figref:mako',
               'trouble:figref:mako'),
              ('Quick solution with the `varioref` package',
               3,
               None,
               'quick-solution-with-the-varioref-package'),
              ('Manual solution (or a good example on what Mako can do)',
               3,
               None,
               'manual-solution-or-a-good-example-on-what-mako-can-do'),
              ("Error when running latex: You must have 'pygmentize' installed",
               2,
               None,
               'error-when-running-latex-you-must-have-pygmentize-installed'),
              ('Why are the LaTeX section headings smaller than normal?',
               2,
               None,
               'why-are-the-latex-section-headings-smaller-than-normal'),
              ('I get LaTeX compilation errors about "shadedquoteBlue" in code '
               'blocks in exercises',
               2,
               None,
               'i-get-latex-compilation-errors-about-shadedquoteblue-in-code-blocks-in-exercises'),
              ('I get compilation error due to pause commands',
               2,
               None,
               'i-get-compilation-error-due-to-pause-commands'),
              ('The cell structure in slides does not work for me ...',
               2,
               None,
               'the-cell-structure-in-slides-does-not-work-for-me'),
              ('Can I have LaTeX figures with shadows?',
               2,
               None,
               'can-i-have-latex-figures-with-shadows'),
              ('How can I use my fancy LaTeX environments?',
               2,
               None,
               'how-can-i-use-my-fancy-latex-environments'),
              ('The LaTeX file does not compile',
               2,
               None,
               'the-latex-file-does-not-compile'),
              ('The LaTeX Beamer file does not compile',
               2,
               None,
               'the-latex-beamer-file-does-not-compile'),
              ('Inline verbatim gives error',
               2,
               None,
               'inline-verbatim-gives-error'),
              ('Errors in figure captions',
               2,
               None,
               'errors-in-figure-captions'),
              ('I want to tune the top (preamble) of the LaTeX file',
               2,
               'latex:custom:preamble',
               'latex:custom:preamble'),
              ('How can I control the placement of figures?',
               2,
               None,
               'how-can-i-control-the-placement-of-figures'),
              ('How can I get a two-column text?',
               2,
               None,
               'how-can-i-get-a-two-column-text'),
              ('Solution heading in exercise solutions appear after the '
               'solution content',
               2,
               'trouble:bsol:code',
               'trouble:bsol:code'),
              ('Subexercises (`subex{a)}`) triggers ``Missing number, treated '
               "as zero''",
               2,
               None,
               'subexercises-subex-a-triggers-missing-number-treated-as-zero'),
              ('Page numbers appear in both header and footer',
               2,
               None,
               'page-numbers-appear-in-both-header-and-footer'),
              ('Links in the table of contents go to wrong page',
               2,
               None,
               'links-in-the-table-of-contents-go-to-wrong-page'),
              ('Exercises in the `Springer_sv` style looks strange',
               2,
               None,
               'exercises-in-the-springer_sv-style-looks-strange'),
              ('How to typeset papers with specified style files?',
               2,
               'trouble:latex:styles',
               'trouble:latex:styles'),
              ('I want exercises to have small headings (not subsections)',
               2,
               None,
               'i-want-exercises-to-have-small-headings-not-subsections'),
              ('gwiki', 1, None, 'gwiki'),
              ('Strange nested lists in gwiki',
               2,
               None,
               'strange-nested-lists-in-gwiki'),
              ('Lists in gwiki look ugly in the gwiki source',
               2,
               None,
               'lists-in-gwiki-look-ugly-in-the-gwiki-source'),
              ('HTML', 1, None, 'html'),
              ('How can I add a search facility to an HTML document?',
               2,
               None,
               'how-can-i-add-a-search-facility-to-an-html-document'),
              ('MathJax formulas are not properly rendered',
               2,
               None,
               'mathjax-formulas-are-not-properly-rendered'),
              ('How can I change the layout of the HTML page?',
               2,
               None,
               'how-can-i-change-the-layout-of-the-html-page'),
              ('Autoedits of the `.html` file',
               3,
               None,
               'autoedits-of-the-html-file'),
              ('Specify a `.css` file', 3, None, 'specify-a-css-file'),
              ('Specify a template', 3, None, 'specify-a-template'),
              ('Why do figures look ugly when using HTML templates?',
               2,
               None,
               'why-do-figures-look-ugly-when-using-html-templates'),
              ('reveal/deck HTML5 slides', 1, None, 'reveal-deck-html5-slides'),
              ('Python Online Tutor code does not work in reveal',
               2,
               None,
               'python-online-tutor-code-does-not-work-in-reveal'),
              ('Reveal slides are stacked on top of each other',
               2,
               None,
               'reveal-slides-are-stacked-on-top-of-each-other'),
              ('Reveal slides are moving steadily to the left',
               2,
               None,
               'reveal-slides-are-moving-steadily-to-the-left'),
              ('YouTube movies do not work',
               2,
               None,
               'youtube-movies-do-not-work'),
              ('Online Python Tutor does not work',
               2,
               None,
               'online-python-tutor-does-not-work')]}
end of tocinfo -->

<body>
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="trouble.html">DocOnce Troubleshooting and FAQ</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="#table_of_contents" style="font-size: 80%;"><b>Table of contents</b></a></li>
     <!-- navigation toc: --> <li><a href="#general-topics" style="font-size: 80%;"><b>General topics</b></a></li>
     <!-- navigation toc: --> <li><a href="#sec:warnings" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I study error messages and warnings from DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="#sec:debug" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How do I debug a DocOnce file that results in a strange error message?</a></li>
     <!-- navigation toc: --> <li><a href="#sec:cite" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How do I cite and link to DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="#translation-aborts-when-labels-are-not-defined" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Translation aborts when labels are not defined</a></li>
     <!-- navigation toc: --> <li><a href="#sec:toc_depth" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How to I control the table of contents?</a></li>
     <!-- navigation toc: --> <li><a href="#sec:custom:navlinks" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I add links to some resource on every page?</a></li>
     <!-- navigation toc: --> <li><a href="#bootstrap-html-styles" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bootstrap HTML styles</a></li>
     <!-- navigation toc: --> <li><a href="#vagrant-html-template" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vagrant HTML template</a></li>
     <!-- navigation toc: --> <li><a href="#sphinx-bootstrap-theme" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sphinx bootstrap theme</a></li>
     <!-- navigation toc: --> <li><a href="#sec:underscore" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Why are underscores in text a potential problem?</a></li>
     <!-- navigation toc: --> <li><a href="#github-gh-pages-will-not-display-files-starting-with-a-dot-or-underscore" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;GitHub gh-pages will not display files starting with a dot or underscore</a></li>
     <!-- navigation toc: --> <li><a href="#github-gh-pages-will-not-display-files" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;GitHub gh-pages will not display files</a></li>
     <!-- navigation toc: --> <li><a href="#blank-line-is-illegal-in-latex-block-but-there-is-no-blank-line" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;``Blank line is illegal in latex block'', but there is no blank line</a></li>
     <!-- navigation toc: --> <li><a href="#a-newline-in-equations-double-backslash-becomes-single-backslash-and-eats-up-spaces" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;A newline in equations (double backslash) becomes single backslash and eats up spaces</a></li>
     <!-- navigation toc: --> <li><a href="#preprocess-error-unexpected-eof-while-parsing" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Preprocess error: unexpected EOF while parsing</a></li>
     <!-- navigation toc: --> <li><a href="#when-i-set-a-large-portion-of-text-in-color-only-a-part-of-it-becomes-colored" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;When I set a large portion of text in color, only a part of it becomes colored</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:latex:envir:native" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I make use of a native LaTeX environments (example environment for instance)?</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-create-a-more-tailored-code-environment-in-latex-than-what-doconce-offers" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I create a more tailored code environment in LaTeX than what DocOnce offers?</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-links-open-in-new-tabs-windows" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can links open in new tabs/windows</a></li>
     <!-- navigation toc: --> <li><a href="#movies-will-not-play-in-my-broswer" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Movies will not play in my broswer</a></li>
     <!-- navigation toc: --> <li><a href="#reveal-slides-look-strange-in-the-browser" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Reveal slides look strange in the browser</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-control-the-vertical-spacing-in-slides" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I control the vertical spacing in slides?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:copyright" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How do I insert a copyright?</a></li>
     <!-- navigation toc: --> <li><a href="#other-formats" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other formats</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-get-a-copyright-on-every-slide-page" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I get a copyright on every slide page?</a></li>
     <!-- navigation toc: --> <li><a href="#latex:custom:fig:name" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How do I get ``Figure'' written in another language?</a></li>
     <!-- navigation toc: --> <li><a href="#spellcheck-reports-mistakes-that-i-cannot-find" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Spellcheck reports mistakes that I cannot find</a></li>
     <!-- navigation toc: --> <li><a href="#spellcheck-reports-a-lot-of-mistakes-related-to-latex-math" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Spellcheck reports a lot of mistakes related to LaTeX math</a></li>
     <!-- navigation toc: --> <li><a href="#text-between-subexercises-are-moved" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Text between subexercises are moved</a></li>
     <!-- navigation toc: --> <li><a href="#doconce-aborts-because-of-a-syntax-error-that-is-not-an-error" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;DocOnce aborts because of a syntax error that is not an error</a></li>
     <!-- navigation toc: --> <li><a href="#figure-captions-are-incomplete" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Figure captions are incomplete</a></li>
     <!-- navigation toc: --> <li><a href="#problems-with-boldface-and-emphasize" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Problems with boldface and emphasize</a></li>
     <!-- navigation toc: --> <li><a href="#links-to-local-directories-do-not-work" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Links to local directories do not work</a></li>
     <!-- navigation toc: --> <li><a href="#links-are-not-typeset-correctly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Links are not typeset correctly</a></li>
     <!-- navigation toc: --> <li><a href="#inline-comment-does-not-handle-verbatim-or-emphasis-right" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline comment does not handle verbatim or emphasis right</a></li>
     <!-- navigation toc: --> <li><a href="#inline-verbatim-code-or-boldface-is-not-detected-when-used-with-a-footnote" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline verbatim code or boldface is not detected when used with a footnote</a></li>
     <!-- navigation toc: --> <li><a href="#inline-verbatim-code-is-not-detected" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline verbatim code is not detected</a></li>
     <!-- navigation toc: --> <li><a href="#inline-verbatim-text-is-not-formatted-correctly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline verbatim text is not formatted correctly</a></li>
     <!-- navigation toc: --> <li><a href="#strange-non-english-characters" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Strange non-English characters</a></li>
     <!-- navigation toc: --> <li><a href="#wrong-norwegian-characters" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Wrong Norwegian characters</a></li>
     <!-- navigation toc: --> <li><a href="#too-short-underlining-of-rest-headlines" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Too short underlining of reST headlines</a></li>
     <!-- navigation toc: --> <li><a href="#found-bt-but-no-tex-blocks-extracted-bug" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Found <code>!bt</code> but no tex blocks extracted (BUG)</a></li>
     <!-- navigation toc: --> <li><a href="#examples-are-typset-with-environment-delimiters-visible" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Examples are typset with environment delimiters visible</a></li>
     <!-- navigation toc: --> <li><a href="#emacs-editing-does-not-work-properly-because-of-regexp-overflow" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Emacs editing does not work properly because of "regexp overflow"</a></li>
     <!-- navigation toc: --> <li><a href="#my-machine-hangs-if-i-have-many-movies" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;My machine hangs if I have many movies</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-use-quotes-in-a-link" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I use quotes in a link?</a></li>
     <!-- navigation toc: --> <li><a href="#conversion-from-doconce-to-google-docs" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Conversion from DocOnce to Google Docs</a></li>
     <!-- navigation toc: --> <li><a href="#convesion-from-google-docs-to-doconce" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Convesion from Google Docs to DocOnce</a></li>
     <!-- navigation toc: --> <li><a href="#are-there-any-tools-for-shared-online-writing-of-doconce-documents" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Are there any tools for shared online writing of DocOnce documents?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:pitfalls" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Examples on seemingly legal syntax that fails</a></li>
     <!-- navigation toc: --> <li><a href="#double-bold-italic" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double bold/italic</a></li>
     <!-- navigation toc: --> <li><a href="#mix-of-bold-italic-and-math" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mix of bold/italic and math</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-make-pressbooks-com-books-from-doconce" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I make pressbooks.com books from DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:epub" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I produce ePub books from DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:non_English" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;What about non-English languages and DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="#lists-look-wrong" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Lists look wrong</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-get-an-overview-of-all-files-that-are-included-in-a-document" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I get an overview of all files that are included in a document?</a></li>
     <!-- navigation toc: --> <li><a href="#how-to-write-the-dollar-sign-for-an-amount-in-dollars" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How to write the dollar sign for an amount in dollars?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:Externaldocuments" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Problems with Externaldocuments specifications</a></li>
     <!-- navigation toc: --> <li><a href="#what-is-the-difference-between-doconce-replace-and-doconce-subst" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;What is the difference between doconce replace and doconce subst?</a></li>
     <!-- navigation toc: --> <li><a href="#python-raises-regex-exception-after-code-command" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Python raises regex exception after <code>@@@CODE</code> command</a></li>
     <!-- navigation toc: --> <li><a href="#preprocess-mako" style="font-size: 80%;"><b>Preprocess/Mako</b></a></li>
     <!-- navigation toc: --> <li><a href="#list-important-things-to-remember-when-programming-mako" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;List important things to remember when programming Mako</a></li>
     <!-- navigation toc: --> <li><a href="#the-mako-preprocessor-is-fooled-by-doconce-text" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The Mako preprocessor is fooled by DocOnce text</a></li>
     <!-- navigation toc: --> <li><a href="#the-mako-preprocessor-has-problems-with-lines-starting-with-percent-sign" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The Mako preprocessor has problems with lines starting with percent sign</a></li>
     <!-- navigation toc: --> <li><a href="#the-mako-preprocessor-gives-syntax-error-in-python-code" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The Mako preprocessor gives syntax error in Python code</a></li>
     <!-- navigation toc: --> <li><a href="#the-mako-preprocessor-gives-strange-error-messages" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The Mako preprocessor gives strange error messages</a></li>
     <!-- navigation toc: --> <li><a href="#the-mako-preprocessor-claims-a-variable-is-undefined" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The Mako preprocessor claims a variable is undefined</a></li>
     <!-- navigation toc: --> <li><a href="#something-goes-wrong-in-the-preprocessing-step" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Something goes wrong in the preprocessing step</a></li>
     <!-- navigation toc: --> <li><a href="#preprocessor-directives-do-not-work" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Preprocessor directives do not work</a></li>
     <!-- navigation toc: --> <li><a href="#code-or-tex-blocks" style="font-size: 80%;"><b>Code or Tex Blocks</b></a></li>
     <!-- navigation toc: --> <li><a href="#too-long-lines-in-math-blocks" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Too long lines in math blocks</a></li>
     <!-- navigation toc: --> <li><a href="#code-or-math-block-errors-in-rest" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Code or math block errors in reST</a></li>
     <!-- navigation toc: --> <li><a href="#strange-errors-around-code-or-tex-blocks-in-rest" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Strange errors around code or TeX blocks in reST</a></li>
     <!-- navigation toc: --> <li><a href="#something-is-wrong-with-a-verbatim-code-block" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Something is wrong with a verbatim code block</a></li>
     <!-- navigation toc: --> <li><a href="#code-tex-block-is-not-shown-in-rest-format" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Code/TeX block is not shown in reST format</a></li>
     <!-- navigation toc: --> <li><a href="#verbatim-code-blocks-figures-and-admons-inside-lists-look-ugly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Verbatim code blocks, figures and admons inside lists look ugly</a></li>
     <!-- navigation toc: --> <li><a href="#latex-code-blocks-inside-lists-look-ugly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;LaTeX code blocks inside lists look ugly</a></li>
     <!-- navigation toc: --> <li><a href="#latex-code-appears-prior-to-paragraph-headings" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;LaTeX code appears prior to paragraph headings</a></li>
     <!-- navigation toc: --> <li><a href="#numbered-equations-in-exercise-solutions-change-the-equation-numbers-in-the-text" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Numbered equations in exercise solutions change the equation numbers in the text...</a></li>
     <!-- navigation toc: --> <li><a href="#rest-sphinx" style="font-size: 80%;"><b>reST/Sphinx</b></a></li>
     <!-- navigation toc: --> <li><a href="#math-formulas-are-not-rendered-properly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Math formulas are not rendered properly</a></li>
     <!-- navigation toc: --> <li><a href="#sphinx-directory-generation-aborts-with-label-empty-or-too-long" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Sphinx directory generation aborts with ``label empty or too long''</a></li>
     <!-- navigation toc: --> <li><a href="#title-level-inconsistent" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Title level inconsistent</a></li>
     <!-- navigation toc: --> <li><a href="#subsection-headings-appear-at-the-level-of-sections-in-the-table-of-contents" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Subsection headings appear at the level of sections in the table of contents</a></li>
     <!-- navigation toc: --> <li><a href="#lists-do-not-appear-in-rst-files" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Lists do not appear in .rst files</a></li>
     <!-- navigation toc: --> <li><a href="#error-message-undefined-substitution-from-rest" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Error message "Undefined substitution..." from reST</a></li>
     <!-- navigation toc: --> <li><a href="#warning-about-duplicate-link-names" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Warning about duplicate link names</a></li>
     <!-- navigation toc: --> <li><a href="#inconsistent-headings-in-rest" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inconsistent headings in reST</a></li>
     <!-- navigation toc: --> <li><a href="#no-code-environment-appears-before-bc-ipy-blocks" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;No code environment appears before "bc ipy" blocks</a></li>
     <!-- navigation toc: --> <li><a href="#latex" style="font-size: 80%;"><b>LaTeX</b></a></li>
     <!-- navigation toc: --> <li><a href="#lines-are-too-long" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Lines are too long</a></li>
     <!-- navigation toc: --> <li><a href="#tables-get-too-wide-need-to-wrap-text-in-the-columns" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Tables get too wide - need to wrap text in the columns</a></li>
     <!-- navigation toc: --> <li><a href="#tables-are-too-long" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Tables are too long</a></li>
     <!-- navigation toc: --> <li><a href="#table-inside-user-defined-environment-does-not-work" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Table inside user-defined environment does not work</a></li>
     <!-- navigation toc: --> <li><a href="#strange-begin-description-error-arising-from-math" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Strange <code>begin{description}</code> error arising from math</a></li>
     <!-- navigation toc: --> <li><a href="#inline-figures-should-have-more-vertical-space" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline figures should have more vertical space</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-use-a-special-package-for-typesetting-code-k-not-pyg-lst-or-vrb" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I use a special package for typesetting code?K (not <code>pyg</code>, <code>lst</code>, or <code>vrb</code>)</a></li>
     <!-- navigation toc: --> <li><a href="#sphinx-and-html-show-pygmetized-code-but-not-latex" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Sphinx and HTML show pygmetized code, but not LaTeX</a></li>
     <!-- navigation toc: --> <li><a href="#latex-error-because-of-underscores" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;LaTeX error because of underscores</a></li>
     <!-- navigation toc: --> <li><a href="#latex-does-not-like-underscores-in-urls" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;LaTeX does not like underscores in URLs</a></li>
     <!-- navigation toc: --> <li><a href="#inline-verbatim-fails-in-admon-headings" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline verbatim fails in admon headings</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-customize-the-look-of-an-admonition" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I customize the look of an admonition?</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-have-unnumbered-sections" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I have unnumbered sections?</a></li>
     <!-- navigation toc: --> <li><a href="#latex-suddenly-places-figures-differently" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;LaTeX suddenly places figures differently</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:figref:mako" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;I want figure references with page number too</a></li>
     <!-- navigation toc: --> <li><a href="#quick-solution-with-the-varioref-package" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quick solution with the <code>varioref</code> package</a></li>
     <!-- navigation toc: --> <li><a href="#manual-solution-or-a-good-example-on-what-mako-can-do" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Manual solution (or a good example on what Mako can do)</a></li>
     <!-- navigation toc: --> <li><a href="#error-when-running-latex-you-must-have-pygmentize-installed" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Error when running latex: You must have 'pygmentize' installed</a></li>
     <!-- navigation toc: --> <li><a href="#why-are-the-latex-section-headings-smaller-than-normal" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Why are the LaTeX section headings smaller than normal?</a></li>
     <!-- navigation toc: --> <li><a href="#i-get-latex-compilation-errors-about-shadedquoteblue-in-code-blocks-in-exercises" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises</a></li>
     <!-- navigation toc: --> <li><a href="#i-get-compilation-error-due-to-pause-commands" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;I get compilation error due to pause commands</a></li>
     <!-- navigation toc: --> <li><a href="#the-cell-structure-in-slides-does-not-work-for-me" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The cell structure in slides does not work for me ...</a></li>
     <!-- navigation toc: --> <li><a href="#can-i-have-latex-figures-with-shadows" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Can I have LaTeX figures with shadows?</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-use-my-fancy-latex-environments" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I use my fancy LaTeX environments?</a></li>
     <!-- navigation toc: --> <li><a href="#the-latex-file-does-not-compile" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The LaTeX file does not compile</a></li>
     <!-- navigation toc: --> <li><a href="#the-latex-beamer-file-does-not-compile" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;The LaTeX Beamer file does not compile</a></li>
     <!-- navigation toc: --> <li><a href="#inline-verbatim-gives-error" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Inline verbatim gives error</a></li>
     <!-- navigation toc: --> <li><a href="#errors-in-figure-captions" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Errors in figure captions</a></li>
     <!-- navigation toc: --> <li><a href="#latex:custom:preamble" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;I want to tune the top (preamble) of the LaTeX file</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-control-the-placement-of-figures" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I control the placement of figures?</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-get-a-two-column-text" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I get a two-column text?</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:bsol:code" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Solution heading in exercise solutions appear after the solution content</a></li>
     <!-- navigation toc: --> <li><a href="#subexercises-subex-a-triggers-missing-number-treated-as-zero" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Subexercises (<code>subex{a)}</code>) triggers ``Missing number, treated as zero''</a></li>
     <!-- navigation toc: --> <li><a href="#page-numbers-appear-in-both-header-and-footer" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Page numbers appear in both header and footer</a></li>
     <!-- navigation toc: --> <li><a href="#links-in-the-table-of-contents-go-to-wrong-page" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Links in the table of contents go to wrong page</a></li>
     <!-- navigation toc: --> <li><a href="#exercises-in-the-springer_sv-style-looks-strange" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercises in the <code>Springer_sv</code> style looks strange</a></li>
     <!-- navigation toc: --> <li><a href="#trouble:latex:styles" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How to typeset papers with specified style files?</a></li>
     <!-- navigation toc: --> <li><a href="#i-want-exercises-to-have-small-headings-not-subsections" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;I want exercises to have small headings (not subsections)</a></li>
     <!-- navigation toc: --> <li><a href="#gwiki" style="font-size: 80%;"><b>gwiki</b></a></li>
     <!-- navigation toc: --> <li><a href="#strange-nested-lists-in-gwiki" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Strange nested lists in gwiki</a></li>
     <!-- navigation toc: --> <li><a href="#lists-in-gwiki-look-ugly-in-the-gwiki-source" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Lists in gwiki look ugly in the gwiki source</a></li>
     <!-- navigation toc: --> <li><a href="#html" style="font-size: 80%;"><b>HTML</b></a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-add-a-search-facility-to-an-html-document" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I add a search facility to an HTML document?</a></li>
     <!-- navigation toc: --> <li><a href="#mathjax-formulas-are-not-properly-rendered" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;MathJax formulas are not properly rendered</a></li>
     <!-- navigation toc: --> <li><a href="#how-can-i-change-the-layout-of-the-html-page" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How can I change the layout of the HTML page?</a></li>
     <!-- navigation toc: --> <li><a href="#autoedits-of-the-html-file" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Autoedits of the <code>.html</code> file</a></li>
     <!-- navigation toc: --> <li><a href="#specify-a-css-file" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify a <code>.css</code> file</a></li>
     <!-- navigation toc: --> <li><a href="#specify-a-template" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify a template</a></li>
     <!-- navigation toc: --> <li><a href="#why-do-figures-look-ugly-when-using-html-templates" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Why do figures look ugly when using HTML templates?</a></li>
     <!-- navigation toc: --> <li><a href="#reveal-deck-html5-slides" style="font-size: 80%;"><b>reveal/deck HTML5 slides</b></a></li>
     <!-- navigation toc: --> <li><a href="#python-online-tutor-code-does-not-work-in-reveal" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Python Online Tutor code does not work in reveal</a></li>
     <!-- navigation toc: --> <li><a href="#reveal-slides-are-stacked-on-top-of-each-other" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Reveal slides are stacked on top of each other</a></li>
     <!-- navigation toc: --> <li><a href="#reveal-slides-are-moving-steadily-to-the-left" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Reveal slides are moving steadily to the left</a></li>
     <!-- navigation toc: --> <li><a href="#youtube-movies-do-not-work" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;YouTube movies do not work</a></li>
     <!-- navigation toc: --> <li><a href="#online-python-tutor-does-not-work" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Online Python Tutor does not work</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->
<div class="container">
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->
<!-- ------------------- main content ---------------------- -->
<div class="jumbotron">
<center>
<h1>DocOnce Troubleshooting and FAQ</h1>
</center>  <!-- document title -->

<!-- author(s): Hans Petter Langtangen -->
<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>
<!-- institution(s) -->
<center>
[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b>
</center>
<center>
[2] <b>Department of Informatics, University of Oslo</b>
</center>
<br>
<center>
<h4>Apr 14, 2021</h4>
</center> <!-- date -->
<br>


</div> <!-- end jumbotron -->
<h1 id="table_of_contents">Table of contents</h1>

<div class='toc'>
<p><a href="#general-topics"> General topics </a></p>
<p><span class="tab"> <a href="#sec:warnings"> How can I study error messages and warnings from DocOnce? </a></p>
<p><span class="tab"> <a href="#sec:debug"> How do I debug a DocOnce file that results in a strange error message? </a></p>
<p><span class="tab"> <a href="#sec:cite"> How do I cite and link to DocOnce? </a></p>
<p><span class="tab"> <a href="#translation-aborts-when-labels-are-not-defined"> Translation aborts when labels are not defined </a></p>
<p><span class="tab"> <a href="#sec:toc_depth"> How to I control the table of contents? </a></p>
<p><span class="tab"> <a href="#sec:custom:navlinks"> How can I add links to some resource on every page? </a></p>
<p><span class="tab"> <a href="#sec:underscore"> Why are underscores in text a potential problem? </a></p>
<p><span class="tab"> <a href="#github-gh-pages-will-not-display-files-starting-with-a-dot-or-underscore"> GitHub gh-pages will not display files starting with a dot or underscore </a></p>
<p><span class="tab"> <a href="#github-gh-pages-will-not-display-files"> GitHub gh-pages will not display files </a></p>
<p><span class="tab"> <a href="#blank-line-is-illegal-in-latex-block-but-there-is-no-blank-line"> &quot;Blank line is illegal in latex block&quot;, but there is no blank line </a></p>
<p><span class="tab"> <a href="#a-newline-in-equations-double-backslash-becomes-single-backslash-and-eats-up-spaces"> A newline in equations (double backslash) becomes single backslash and eats up spaces </a></p>
<p><span class="tab"> <a href="#preprocess-error-unexpected-eof-while-parsing"> Preprocess error: unexpected EOF while parsing </a></p>
<p><span class="tab"> <a href="#when-i-set-a-large-portion-of-text-in-color-only-a-part-of-it-becomes-colored"> When I set a large portion of text in color, only a part of it becomes colored </a></p>
<p><span class="tab"> <a href="#trouble:latex:envir:native"> How can I make use of a native LaTeX environments (example environment for instance)? </a></p>
<p><span class="tab"> <a href="#how-can-i-create-a-more-tailored-code-environment-in-latex-than-what-doconce-offers"> How can I create a more tailored code environment in LaTeX than what DocOnce offers? </a></p>
<p><span class="tab"> <a href="#how-can-links-open-in-new-tabs-windows"> How can links open in new tabs/windows </a></p>
<p><span class="tab"> <a href="#movies-will-not-play-in-my-broswer"> Movies will not play in my broswer </a></p>
<p><span class="tab"> <a href="#reveal-slides-look-strange-in-the-browser"> Reveal slides look strange in the browser </a></p>
<p><span class="tab"> <a href="#how-can-i-control-the-vertical-spacing-in-slides"> How can I control the vertical spacing in slides? </a></p>
<p><span class="tab"> <a href="#trouble:copyright"> How do I insert a copyright? </a></p>
<p><span class="tab"> <a href="#how-can-i-get-a-copyright-on-every-slide-page"> How can I get a copyright on every slide page? </a></p>
<p><span class="tab"> <a href="#latex:custom:fig:name"> How do I get &quot;Figure&quot; written in another language? </a></p>
<p><span class="tab"> <a href="#spellcheck-reports-mistakes-that-i-cannot-find"> Spellcheck reports mistakes that I cannot find </a></p>
<p><span class="tab"> <a href="#spellcheck-reports-a-lot-of-mistakes-related-to-latex-math"> Spellcheck reports a lot of mistakes related to LaTeX math </a></p>
<p><span class="tab"> <a href="#text-between-subexercises-are-moved"> Text between subexercises are moved </a></p>
<p><span class="tab"> <a href="#doconce-aborts-because-of-a-syntax-error-that-is-not-an-error"> DocOnce aborts because of a syntax error that is not an error </a></p>
<p><span class="tab"> <a href="#figure-captions-are-incomplete"> Figure captions are incomplete </a></p>
<p><span class="tab"> <a href="#problems-with-boldface-and-emphasize"> Problems with boldface and emphasize </a></p>
<p><span class="tab"> <a href="#links-to-local-directories-do-not-work"> Links to local directories do not work </a></p>
<p><span class="tab"> <a href="#links-are-not-typeset-correctly"> Links are not typeset correctly </a></p>
<p><span class="tab"> <a href="#inline-comment-does-not-handle-verbatim-or-emphasis-right"> Inline comment does not handle verbatim or emphasis right </a></p>
<p><span class="tab"> <a href="#inline-verbatim-code-or-boldface-is-not-detected-when-used-with-a-footnote"> Inline verbatim code or boldface is not detected when used with a footnote </a></p>
<p><span class="tab"> <a href="#inline-verbatim-code-is-not-detected"> Inline verbatim code is not detected </a></p>
<p><span class="tab"> <a href="#inline-verbatim-text-is-not-formatted-correctly"> Inline verbatim text is not formatted correctly </a></p>
<p><span class="tab"> <a href="#strange-non-english-characters"> Strange non-English characters </a></p>
<p><span class="tab"> <a href="#wrong-norwegian-characters"> Wrong Norwegian characters </a></p>
<p><span class="tab"> <a href="#too-short-underlining-of-rest-headlines"> Too short underlining of reST headlines </a></p>
<p><span class="tab"> <a href="#found-bt-but-no-tex-blocks-extracted-bug"> Found <code>!bt</code> but no tex blocks extracted (BUG) </a></p>
<p><span class="tab"> <a href="#examples-are-typset-with-environment-delimiters-visible"> Examples are typset with environment delimiters visible </a></p>
<p><span class="tab"> <a href="#emacs-editing-does-not-work-properly-because-of-regexp-overflow"> Emacs editing does not work properly because of "regexp overflow" </a></p>
<p><span class="tab"> <a href="#my-machine-hangs-if-i-have-many-movies"> My machine hangs if I have many movies </a></p>
<p><span class="tab"> <a href="#how-can-i-use-quotes-in-a-link"> How can I use quotes in a link? </a></p>
<p><span class="tab"> <a href="#conversion-from-doconce-to-google-docs"> Conversion from DocOnce to Google Docs </a></p>
<p><span class="tab"> <a href="#convesion-from-google-docs-to-doconce"> Convesion from Google Docs to DocOnce </a></p>
<p><span class="tab"> <a href="#are-there-any-tools-for-shared-online-writing-of-doconce-documents"> Are there any tools for shared online writing of DocOnce documents? </a></p>
<p><span class="tab"> <a href="#trouble:pitfalls"> Examples on seemingly legal syntax that fails </a></p>
<p><span class="tab"> <a href="#how-can-i-make-pressbooks-com-books-from-doconce"> How can I make pressbooks.com books from DocOnce? </a></p>
<p><span class="tab"> <a href="#trouble:epub"> How can I produce ePub books from DocOnce? </a></p>
<p><span class="tab"> <a href="#trouble:non_English"> What about non-English languages and DocOnce? </a></p>
<p><span class="tab"> <a href="#lists-look-wrong"> Lists look wrong </a></p>
<p><span class="tab"> <a href="#how-can-i-get-an-overview-of-all-files-that-are-included-in-a-document"> How can I get an overview of all files that are included in a document? </a></p>
<p><span class="tab"> <a href="#how-to-write-the-dollar-sign-for-an-amount-in-dollars"> How to write the dollar sign for an amount in dollars? </a></p>
<p><span class="tab"> <a href="#trouble:Externaldocuments"> Problems with Externaldocuments specifications </a></p>
<p><span class="tab"> <a href="#what-is-the-difference-between-doconce-replace-and-doconce-subst"> What is the difference between doconce replace and doconce subst? </a></p>
<p><span class="tab"> <a href="#python-raises-regex-exception-after-code-command"> Python raises regex exception after <code>@@@CODE</code> command </a></p>
<p><a href="#preprocess-mako"> Preprocess/Mako </a></p>
<p><span class="tab"> <a href="#list-important-things-to-remember-when-programming-mako"> List important things to remember when programming Mako </a></p>
<p><span class="tab"> <a href="#the-mako-preprocessor-is-fooled-by-doconce-text"> The Mako preprocessor is fooled by DocOnce text </a></p>
<p><span class="tab"> <a href="#the-mako-preprocessor-has-problems-with-lines-starting-with-percent-sign"> The Mako preprocessor has problems with lines starting with percent sign </a></p>
<p><span class="tab"> <a href="#the-mako-preprocessor-gives-syntax-error-in-python-code"> The Mako preprocessor gives syntax error in Python code </a></p>
<p><span class="tab"> <a href="#the-mako-preprocessor-gives-strange-error-messages"> The Mako preprocessor gives strange error messages </a></p>
<p><span class="tab"> <a href="#the-mako-preprocessor-claims-a-variable-is-undefined"> The Mako preprocessor claims a variable is undefined </a></p>
<p><span class="tab"> <a href="#something-goes-wrong-in-the-preprocessing-step"> Something goes wrong in the preprocessing step </a></p>
<p><span class="tab"> <a href="#preprocessor-directives-do-not-work"> Preprocessor directives do not work </a></p>
<p><a href="#code-or-tex-blocks"> Code or Tex Blocks </a></p>
<p><span class="tab"> <a href="#too-long-lines-in-math-blocks"> Too long lines in math blocks </a></p>
<p><span class="tab"> <a href="#code-or-math-block-errors-in-rest"> Code or math block errors in reST </a></p>
<p><span class="tab"> <a href="#strange-errors-around-code-or-tex-blocks-in-rest"> Strange errors around code or TeX blocks in reST </a></p>
<p><span class="tab"> <a href="#something-is-wrong-with-a-verbatim-code-block"> Something is wrong with a verbatim code block </a></p>
<p><span class="tab"> <a href="#code-tex-block-is-not-shown-in-rest-format"> Code/TeX block is not shown in reST format </a></p>
<p><span class="tab"> <a href="#verbatim-code-blocks-figures-and-admons-inside-lists-look-ugly"> Verbatim code blocks, figures and admons inside lists look ugly </a></p>
<p><span class="tab"> <a href="#latex-code-blocks-inside-lists-look-ugly"> LaTeX code blocks inside lists look ugly </a></p>
<p><span class="tab"> <a href="#latex-code-appears-prior-to-paragraph-headings"> LaTeX code appears prior to paragraph headings </a></p>
<p><span class="tab"> <a href="#numbered-equations-in-exercise-solutions-change-the-equation-numbers-in-the-text"> Numbered equations in exercise solutions change the equation numbers in the text... </a></p>
<p><a href="#rest-sphinx"> reST/Sphinx </a></p>
<p><span class="tab"> <a href="#math-formulas-are-not-rendered-properly"> Math formulas are not rendered properly </a></p>
<p><span class="tab"> <a href="#sphinx-directory-generation-aborts-with-label-empty-or-too-long"> Sphinx directory generation aborts with &quot;label empty or too long&quot; </a></p>
<p><span class="tab"> <a href="#title-level-inconsistent"> Title level inconsistent </a></p>
<p><span class="tab"> <a href="#subsection-headings-appear-at-the-level-of-sections-in-the-table-of-contents"> Subsection headings appear at the level of sections in the table of contents </a></p>
<p><span class="tab"> <a href="#lists-do-not-appear-in-rst-files"> Lists do not appear in .rst files </a></p>
<p><span class="tab"> <a href="#error-message-undefined-substitution-from-rest"> Error message "Undefined substitution..." from reST </a></p>
<p><span class="tab"> <a href="#warning-about-duplicate-link-names"> Warning about duplicate link names </a></p>
<p><span class="tab"> <a href="#inconsistent-headings-in-rest"> Inconsistent headings in reST </a></p>
<p><span class="tab"> <a href="#no-code-environment-appears-before-bc-ipy-blocks"> No code environment appears before "bc ipy" blocks </a></p>
<p><a href="#latex"> LaTeX </a></p>
<p><span class="tab"> <a href="#lines-are-too-long"> Lines are too long </a></p>
<p><span class="tab"> <a href="#tables-get-too-wide-need-to-wrap-text-in-the-columns"> Tables get too wide - need to wrap text in the columns </a></p>
<p><span class="tab"> <a href="#tables-are-too-long"> Tables are too long </a></p>
<p><span class="tab"> <a href="#table-inside-user-defined-environment-does-not-work"> Table inside user-defined environment does not work </a></p>
<p><span class="tab"> <a href="#strange-begin-description-error-arising-from-math"> Strange <code>begin{description}</code> error arising from math </a></p>
<p><span class="tab"> <a href="#inline-figures-should-have-more-vertical-space"> Inline figures should have more vertical space </a></p>
<p><span class="tab"> <a href="#how-can-i-use-a-special-package-for-typesetting-code-k-not-pyg-lst-or-vrb"> How can I use a special package for typesetting code?K (not <code>pyg</code>, <code>lst</code>, or <code>vrb</code>) </a></p>
<p><span class="tab"> <a href="#sphinx-and-html-show-pygmetized-code-but-not-latex"> Sphinx and HTML show pygmetized code, but not LaTeX </a></p>
<p><span class="tab"> <a href="#latex-error-because-of-underscores"> LaTeX error because of underscores </a></p>
<p><span class="tab"> <a href="#latex-does-not-like-underscores-in-urls"> LaTeX does not like underscores in URLs </a></p>
<p><span class="tab"> <a href="#inline-verbatim-fails-in-admon-headings"> Inline verbatim fails in admon headings </a></p>
<p><span class="tab"> <a href="#how-can-i-customize-the-look-of-an-admonition"> How can I customize the look of an admonition? </a></p>
<p><span class="tab"> <a href="#how-can-i-have-unnumbered-sections"> How can I have unnumbered sections? </a></p>
<p><span class="tab"> <a href="#latex-suddenly-places-figures-differently"> LaTeX suddenly places figures differently </a></p>
<p><span class="tab"> <a href="#trouble:figref:mako"> I want figure references with page number too </a></p>
<p><span class="tab"> <a href="#error-when-running-latex-you-must-have-pygmentize-installed"> Error when running latex: You must have 'pygmentize' installed </a></p>
<p><span class="tab"> <a href="#why-are-the-latex-section-headings-smaller-than-normal"> Why are the LaTeX section headings smaller than normal? </a></p>
<p><span class="tab"> <a href="#i-get-latex-compilation-errors-about-shadedquoteblue-in-code-blocks-in-exercises"> I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises </a></p>
<p><span class="tab"> <a href="#i-get-compilation-error-due-to-pause-commands"> I get compilation error due to pause commands </a></p>
<p><span class="tab"> <a href="#the-cell-structure-in-slides-does-not-work-for-me"> The cell structure in slides does not work for me ... </a></p>
<p><span class="tab"> <a href="#can-i-have-latex-figures-with-shadows"> Can I have LaTeX figures with shadows? </a></p>
<p><span class="tab"> <a href="#how-can-i-use-my-fancy-latex-environments"> How can I use my fancy LaTeX environments? </a></p>
<p><span class="tab"> <a href="#the-latex-file-does-not-compile"> The LaTeX file does not compile </a></p>
<p><span class="tab"> <a href="#the-latex-beamer-file-does-not-compile"> The LaTeX Beamer file does not compile </a></p>
<p><span class="tab"> <a href="#inline-verbatim-gives-error"> Inline verbatim gives error  </a></p>
<p><span class="tab"> <a href="#errors-in-figure-captions"> Errors in figure captions </a></p>
<p><span class="tab"> <a href="#latex:custom:preamble"> I want to tune the top (preamble) of the LaTeX file </a></p>
<p><span class="tab"> <a href="#how-can-i-control-the-placement-of-figures"> How can I control the placement of figures? </a></p>
<p><span class="tab"> <a href="#how-can-i-get-a-two-column-text"> How can I get a two-column text? </a></p>
<p><span class="tab"> <a href="#trouble:bsol:code"> Solution heading in exercise solutions appear after the solution content </a></p>
<p><span class="tab"> <a href="#subexercises-subex-a-triggers-missing-number-treated-as-zero"> Subexercises (<code>subex{a)}</code>) triggers &quot;Missing number, treated as zero&quot; </a></p>
<p><span class="tab"> <a href="#page-numbers-appear-in-both-header-and-footer"> Page numbers appear in both header and footer </a></p>
<p><span class="tab"> <a href="#links-in-the-table-of-contents-go-to-wrong-page"> Links in the table of contents go to wrong page </a></p>
<p><span class="tab"> <a href="#exercises-in-the-springer_sv-style-looks-strange"> Exercises in the <code>Springer_sv</code> style looks strange </a></p>
<p><span class="tab"> <a href="#trouble:latex:styles"> How to typeset papers with specified style files? </a></p>
<p><span class="tab"> <a href="#i-want-exercises-to-have-small-headings-not-subsections"> I want exercises to have small headings (not subsections) </a></p>
<p><a href="#gwiki"> gwiki </a></p>
<p><span class="tab"> <a href="#strange-nested-lists-in-gwiki"> Strange nested lists in gwiki </a></p>
<p><span class="tab"> <a href="#lists-in-gwiki-look-ugly-in-the-gwiki-source"> Lists in gwiki look ugly in the gwiki source </a></p>
<p><a href="#html"> HTML </a></p>
<p><span class="tab"> <a href="#how-can-i-add-a-search-facility-to-an-html-document"> How can I add a search facility to an HTML document? </a></p>
<p><span class="tab"> <a href="#mathjax-formulas-are-not-properly-rendered"> MathJax formulas are not properly rendered </a></p>
<p><span class="tab"> <a href="#how-can-i-change-the-layout-of-the-html-page"> How can I change the layout of the HTML page? </a></p>
<p><span class="tab"> <a href="#why-do-figures-look-ugly-when-using-html-templates"> Why do figures look ugly when using HTML templates? </a></p>
<p><a href="#reveal-deck-html5-slides"> reveal/deck HTML5 slides </a></p>
<p><span class="tab"> <a href="#python-online-tutor-code-does-not-work-in-reveal"> Python Online Tutor code does not work in reveal </a></p>
<p><span class="tab"> <a href="#reveal-slides-are-stacked-on-top-of-each-other"> Reveal slides are stacked on top of each other </a></p>
<p><span class="tab"> <a href="#reveal-slides-are-moving-steadily-to-the-left"> Reveal slides are moving steadily to the left </a></p>
<p><span class="tab"> <a href="#youtube-movies-do-not-work"> YouTube movies do not work </a></p>
<p><span class="tab"> <a href="#online-python-tutor-does-not-work"> Online Python Tutor does not work </a></p>
</div>
<br>

<div class="alert alert-block alert-danger alert-text-normal"><b>Disclaimer</b>
<p>DocOnce has some support for syntax checking.  If you encounter Python
errors while running <code>doconce format</code>, the reason for the error is
most likely a syntax problem in your DocOnce source file. You have to
track down this syntax problem yourself. However, DocOnce applies
regular expressions to a large extent for transforming text, and
regular expressions may sometimes lead to undesired results.
Therefore, there is a chance that legal DocOnce syntax is not
treated properly. The section <a href="#trouble:pitfalls">Examples on seemingly legal syntax that fails</a> gives some examples of what
can go wrong.
</p>
</div>

<h1 id="general-topics" class="anchor">General topics </h1>
<h2 id="sec:warnings" class="anchor">How can I study error messages and warnings from DocOnce?</h2>

<p>The output from DocOnce and later compilation by various tools can be
overwhelming in the terminal window. Fortunately, DocOnce also writes
its warnings and error message to <code>mydoc.dlog</code> if <code>mydoc.do.txt</code> is the
name of the DocOnce root file. It is recommended to study <code>mydoc.dlog</code>
and correct anything that leads to warnings or errors without abortion.
</p>
<h2 id="sec:debug" class="anchor">How do I debug a DocOnce file that results in a strange error message?</h2>

<p>First, do <code>doconce clean</code> to clean up all old files and recompile.
Run <code>pdflatex</code> or <code>latex</code> since that checks for errors in your math
formulas and is stricter on syntax than many other output formats like
<code>html</code> and <code>sphinx</code>. Fortunately, DocOnce performs syntax checking on
many constuctions that just lead to plain errors in LaTeX.
</p>

<p>If you have a document consisting of a file or two, you can isolate
the problem by a &quot;bisection&quot; method: split the file in two, compile
both parts, continue with the part that gave the problem, and repeat
the process. This will quickly narrow down the text so you ultimately
understand the problem.
</p>

<p>If you have a big book, it can be difficult to track down <em>where</em> the
error is.  If the error comes from LaTeX compilation, go to the main
file's <code>.tex</code> file.  Say the main document is <code>mydoc.do.txt</code>. Then
find the line with the reported error message in <code>mydoc.tex</code>, find the
cause of the error, <em>and correct the error in the corresponding
DocOnce source file</em>.  To find this file, try to recognize in
<code>mydoc.tex</code> where in the document you are. Find some phrase that <code>X</code>
potentially can be unique and to a Unix <code>find</code> command on <code>X</code>:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; find ../chapters -name &#39;*.do.txt&#39; -exec grep X {} \; -print
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Hopefully, the output indentifies the right DocOnce source file.</p>

<p>If the error is a Mako error, you have to search in the
<code>tmp_mako__mydoc.do.txt</code> file: this is the file resulting from the
running the Preprocess and Mako programs, and the file is therefore
the actual text that DocOnce translates.
</p>

<p>In a big project, thre is usually some main file with a lot of
<code>#include</code> statements. Go to this file, <code>mydoc.do.txt</code>, and &quot;remove&quot;
the include statements by just removing the final <code>e</code> in include:
<code>#includ</code>.  Now can you can easily compile the subdocuments one by
one. Start with one document file and bring in new files for inclusion
until the problem appears for the first time. Then you have isolated
the problematic file.  It might be necessary to compile only this
file. To this end, it might be necessary to insert Mako code in the
beginning of the file, and specify certain command-line arguments,
especially <code>--allow_refs_to_external_docs</code> so you do not get errors
from missing labels that are defined elsewhere in the original big
document.
</p>

<p>Eventually, you have tracked down the erroneous piece of text, but perhaps
you do not understand <em>why</em>. Then you just have to rewrite the text to
something that compiles.
</p>
<h2 id="sec:cite" class="anchor">How do I cite and link to DocOnce?</h2>

<p>See the &quot;How to cite&quot; section
on the <a href="https://github.com/doconce/doconce" target="_self">project page</a>.
</p>
<h2 id="translation-aborts-when-labels-are-not-defined" class="anchor">Translation aborts when labels are not defined </h2>

<p>By default, the DocOnce translation aborts when references
are found to lables not defined in the document (i.e., labels in other
documents). This abortion can be annoying, and although it can be
nullified by <code>--no_abort</code>, that option also ignores other error messages.
Instead, use <code>--allow_refs_to_external_docs</code> to allow references to labels
in other documents (these references will of course not work).
</p>

<p>References to labels in other documents should anyway appear inside
<em>generalized references</em>, see the <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#generalized-xross-referencing" target="_self">Generalied Cross-Referencing</a>
section in the manual.
</p>
<h2 id="sec:toc_depth" class="anchor">How to I control the table of contents?</h2>

<p>To include a table of contents in the document, insert the line</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #000080; font-weight: bold">TOC:</span> on
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>in the DocOnce source at the place where you want the table of contents
to be inserted. Often you want to do a pagebreak before the table of
contents, and in that case, insert <code>!split</code> on the line before.
</p>

<p>To control the number of section levels in the table of contents
(chapters, sections,
subsections), use the <code>--toc_depth=X</code> command-line option, where <code>X</code> reflects
the maximum level. Level 0 correspond to chapter. The defaul value of
<code>X</code>, 2, thus means including chapters, sections, and subsections.
For Sphinx output, one must use the command-line option <code>toc_depth=X</code>
as part of the command <code>doconce sphinx_dir</code>.
</p>
<h2 id="sec:custom:navlinks" class="anchor">How can I add links to some resource on every page?</h2>

<p>This question is most relevant for web documents. The simplest (and
actually the only feasible) solution is to use a style that has some
banner where links can be inserted.
</p>
<h3 id="bootstrap-html-styles" class="anchor">Bootstrap HTML styles </h3>

<p>All the Bootstrap styles have a navigation bar where one can insert
custom links with the <code>--html_bootstrap_navbar_links=</code> option.
Here is an example where we insert two links:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format html tmp1 --html_style=bootstrap \
          &quot;--html_bootstrap_navbar_links=\
          Google|http://google.com;\
          DocOnce formats|\
          http://doconce.github.io/teamods/writing_reports/index.html&quot;
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>This command is broken over several lines but should be written on one
line. The syntax for custom links is <code>link|url;link|url;link|url</code>.
This example will result in a navigation bar with four links:
a link to the document using the title as text, a link to &quot;Google&quot;,
a link to &quot;DocOnce formats&quot;, and to the right a &quot;Contents&quot; pull-down
menu.
</p>
<h3 id="vagrant-html-template" class="anchor">Vagrant HTML template </h3>

<p>DocOnce comes with the <a href="https://github.com/doconce/doconce/tree/master/bundled/html_styles/style_vagrant" target="_self">Vagrant HTML template</a>,
which allows for custom links in the header (here is an <a href="http://doconce.github.io/teamods/writing_reports/_static/report_vagrant.html" target="_self">example on a
document</a>). Copy
the <code>template_vagrant.html</code> file and the <code>css</code> directory to the
directory containing the DocOnce document. Edit the <code>LogoWord</code> and
<code>withSubWord</code> in the <code>template_vagrant.html</code> and insert your own links
for <code>GO TO 1</code> and <code>GO TO 2</code>. Compile the document with
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format html mydoc --html_template=template_vagrant.html
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h3 id="sphinx-bootstrap-theme" class="anchor">Sphinx bootstrap theme </h3>

<p>With the <code>bootstrap</code> theme, Sphinx can easily offer custom links.
You have to edit the generated <code>conf.py</code> in the Sphinx directory
(called <code>sphinx-rootdir</code> by default).
Search for <code>elif html_theme == 'bootstrap</code> in this file and
edit the <code>navbar_links</code> item. Here is an example:
</p>


<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">elif</span> html_theme <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;bootstrap&#39;</span>:
    <span style="color: #666666">...</span>
    html_theme_options <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&#39;navbar_title&#39;</span>: short_title,
        <span style="color: #408080; font-style: italic"># Global TOC depth for &quot;site&quot; navbar tab. (Default: 1)</span>
        <span style="color: #408080; font-style: italic"># Switching to -1 shows all levels.</span>
        <span style="color: #BA2121">&#39;globaltoc_depth&#39;</span>: <span style="color: #666666">-1</span>,
        <span style="color: #666666">...</span>
        <span style="color: #408080; font-style: italic"># A list of tuples containing pages or urls to link to.</span>
	<span style="color: #666666">...</span>
        <span style="color: #BA2121">&#39;navbar_links&#39;</span>: [
	   (<span style="color: #BA2121">&#39;Google&#39;</span>, <span style="color: #BA2121">&#39;http://google.com&#39;</span>, <span style="color: #008000; font-weight: bold">True</span>),
           (<span style="color: #BA2121">&#39;DocOnce formats&#39;</span>,
            <span style="color: #BA2121">&#39;http://doconce.github.io/teamods/writing_reports/index.html&#39;</span>,
	    <span style="color: #008000; font-weight: bold">True</span>),
	   ],
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>One may hand-edit the <code>conf.py</code> file and provide a custom version
in the <code>doconce sphinx_dir</code> command:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce sphinx_dir conf.py=../customfiles/conf.py \
          theme=alabaster toc_depth=2 mydoc
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Alternatively, one may auto edit the generated <code>conf.py</code> file in
a script:
</p>


<!-- code=bash (!bc shcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format sphinx mydoc
doconce sphinx_dir <span style="color: #19177C">theme</span><span style="color: #666666">=</span>alabaster <span style="color: #19177C">toc_depth</span><span style="color: #666666">=2</span> mydoc
<span style="color: #408080; font-style: italic"># Auto edit conf.py</span>
doconce subst <span style="color: #BA2121">&quot;#&#39;navbar_links&#39;:.+&quot;</span> <span style="color: #BA2121">&quot;&#39;navbar_links&#39;: [</span>
<span style="color: #BA2121">	   (&#39;Google&#39;, &#39;http://google.com&#39;, True),</span>
<span style="color: #BA2121">           (&#39;DocOnce formats&#39;,</span>
<span style="color: #BA2121">            &#39;http://doconce.github.io/teamods/writing_reports/index.html&#39;,</span>
<span style="color: #BA2121">	    True),</span>
<span style="color: #BA2121">	   ],&quot;</span> mydoc.rst
python automake_sphinx.py
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="sec:underscore" class="anchor">Why are underscores in text a potential problem?</h2>

<p>Underscores in plain text are not tolerated by LaTeX, but works fine in
other formats. In LaTeX, such underscores can give different obscure
error messages, depending on the context. The remedy is to <em>typeset all
words with underscores in inline verbatim</em>, e.g.,
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">If you choose the `Enable_access` menu, ...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The downside is that the word with underscores is typeset in monospace font.</p>

<p>The standard remedy in LaTeX is to insert a backslash before the underscore:</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">If you choose the Enable\_access menu, ...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>but the backslash is not wanted in other formats. A Mako function can fix
this:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&lt;%
def underscorephrase(phrase):
    if FORMAT in (&#39;pdflatex&#39;, &#39;latex&#39;):
        return phrase.replace(&#39;_&#39;, &#39;\\_&#39;)
    else:
        return phrase
%&gt;

<span style="color: #408080; font-style: italic"># Some text:</span>
If you choose the ${underscorephrase(&#39;Enable_access&#39;)}, ...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="github-gh-pages-will-not-display-files-starting-with-a-dot-or-underscore" class="anchor">GitHub gh-pages will not display files starting with a dot or underscore </h2>

<p>This is a typical problem related to publishing either splitted HTML documents
or Sphinx versions of documents on GitHub, using a gh-pages branch.
Filenames starting with a dot (as in <code>._mydoc001.html</code>) or located in
a directory whose name starts with an underscore (as in <code>spninx/_static</code>)
will not be properly shown in HTML if not the root directory of the
gh-pages branch contains a file <code>.nojekyll</code>. This file can be empty.
A typical fix is
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; git checkout gh-pages
Terminal&gt; touch .nojekyll
Terminal&gt; git add .nojekyll
Terminal&gt; git commit -am updates
Terminal&gt; git push origin gh-pages
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="github-gh-pages-will-not-display-files" class="anchor">GitHub gh-pages will not display files </h2>

<p>A common error is to link to addresses starting with <code>https://github.com</code>
rather than the required <code>http://username.github.io/</code>.
</p>
<h2 id="blank-line-is-illegal-in-latex-block-but-there-is-no-blank-line" class="anchor">&quot;Blank line is illegal in latex block&quot;, but there is no blank line </h2>

<p>Are you compiling for <code>sphinx</code>, <code>ipynb</code>, <code>pandoc</code>? In that case,
<code>align</code> environments are rewritten as sequences of plain <code>equation</code>
environments (since MathJax for these output formats does not support
numbered equations in <code>align</code>). If a linebreak <code>\\</code> in the <code>align</code>
environment appears on its own line, this line will be blank in the
equation environment and cause the error message. Simply move the
linebreak up at the end of the preceding line.
</p>

<p>
<b>Note:</b>
This kind of errors are now automatically removed (since
Dec, 2015).
</p>
<h2 id="a-newline-in-equations-double-backslash-becomes-single-backslash-and-eats-up-spaces" class="anchor">A newline in equations (double backslash) becomes single backslash and eats up spaces </h2>

<p>This is a problem with the Mako preprocessor and files that have been
edited on Windows.  The remedy is to change the newline character on
Windows to that in Unix:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce subst &#39;\r\n&#39; &#39;\n&#39; mydoc.do.txt
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>If you work on Windows, you probably have to avoid using the Mako preprocessor
(it is not used unless you use Mako functions, variables, or control
statements).
</p>
<h2 id="preprocess-error-unexpected-eof-while-parsing" class="anchor">Preprocess error: unexpected EOF while parsing </h2>

<p>This error may arise from a syntax error with a colon at the end
of if tests, e.g. <code># #if FORMAT == 'html':</code>. Colon is not used
with Preprocess (but required by Mako: <code>if FORMAT == 'html':</code>).
</p>
<h2 id="when-i-set-a-large-portion-of-text-in-color-only-a-part-of-it-becomes-colored" class="anchor">When I set a large portion of text in color, only a part of it becomes colored </h2>

<p>Although DocOnce features a color inline tag (<code>color</code>),
this tag will most likely fail for large portions
of text. The reason is that this tag, like most other DocOnce
constructions, relies on a regular expression for being detected.
The regular expression searches for opening and closing braces after
the <code>color{red}</code> specification. The closing brace is the first brace
encountered. Therefore, if you have any text containing a right brace
inside the text to be colored, the first right brace will define the
end of the coloring. Here is an example:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">color{blue}{Here is some text
to be typeset in blue.

<span style="color: #000080; font-weight: bold">===== Here is a new subsection =====</span>
<span style="color: #008000">label{sec:subsec}</span>

More text to be typeset in blue, but the right brace in the label
will end the coloring. There is no way out of this except for
moving constructions with braces (`label`, `cite`) out of the
text to be colored.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="trouble:latex:envir:native" class="anchor">How can I make use of a native LaTeX environments (example environment for instance)?</h2>

<p>LaTeX writers often lack their favorite environments, but DocOnce has
a way to define such environments, with corresponding typesetting also
for HTML and all other output formats. See the section <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#user-defined-environments" target="_self">User-Defined
Environments</a>
in the DocOnce manual. It contains all the details for using a
standard example or theorem environment in LaTeX output.
</p>
<h2 id="how-can-i-create-a-more-tailored-code-environment-in-latex-than-what-doconce-offers" class="anchor">How can I create a more tailored code environment in LaTeX than what DocOnce offers? </h2>

<p>It is easy with <em>user-defined environments</em>, see
such an example at the end of the document
<a href="http://doconce.github.io/doconce/doc/pub/latexcode/demo.html" target="_self">Demonstration of DocOnce support for LaTeX code block environments</a>.
Description of user-defined environments are found in
the <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#user-defined-environments" target="_self">DocOnce manual</a>.
</p>
<h2 id="how-can-links-open-in-new-tabs-windows" class="anchor">How can links open in new tabs/windows </h2>

<p>Use the option <code>--html_links_in_new_window</code> for the <code>doconce format</code>
command. It works in HTML and Sphinx, but not in pandoc (or other Markdown
formats) or wikis.
</p>
<h2 id="movies-will-not-play-in-my-broswer" class="anchor">Movies will not play in my broswer </h2>

<p>Are you using Safari as browser? It will not play Ogg and WebM movies.
A message in a box should notify you about this (right below the movie
player).
</p>
<h2 id="reveal-slides-look-strange-in-the-browser" class="anchor">Reveal slides look strange in the browser </h2>

<p>Are you using Safari as browser? reveal.js slides work best in
Firefox, Chrome, or Opera.
</p>
<h2 id="how-can-i-control-the-vertical-spacing-in-slides" class="anchor">How can I control the vertical spacing in slides? </h2>

<p>HTML5 and LaTeX slides control the spacings for you. However, sometimes
you really want to add some space. The <code>&lt;linebreak&gt;</code> is effective for
this purpose. For example,
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!bblock (large) So - how to be excellent?
&lt;linebreak&gt;
Excellence is not a planned goal - it is the corollary of
deep passion, very much hard (and exciting!)
work, and *thinking constantly about it*.
!eblock
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>is rendered as</p>

<div class="alert alert-block alert-success alert-text-large"><b>So - how to be excellent?</b>
<br />
<p>Excellence is not a planned goal - it is the corollary of
deep passion, very much hard (and exciting!)
work, and <em>thinking constantly about it</em>.
</p>
</div>


<p>The <code>&lt;linebreak&gt;</code> is a newline in LaTeX if it has preceding text,
otherwise it is a <code>\vspace{3mm}</code>. In HTML, <code>&lt;linebreak&gt;</code> is <code>&lt;br&gt;</code>.
</p>

<p>More vertical space is obtained by repeated use of <code>&lt;linebreak&gt;</code>:</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&lt;linebreak&gt;
&lt;linebreak&gt;
&lt;linebreak&gt;
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="trouble:copyright" class="anchor">How do I insert a copyright?</h2>

<p>See the <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#copyright" target="_self">Copyright section of the DocOnce manual</a>.</p>
<h3 id="other-formats" class="anchor">Other formats </h3>

<p>An error message is provided.</p>
<h2 id="how-can-i-get-a-copyright-on-every-slide-page" class="anchor">How can I get a copyright on every slide page? </h2>

<p>HTML formats:
Use the <code>--copyright=everypage</code> option in the <code>doconce split_html</code> or
<code>doconce slides_html</code> commands.
</p>

<p>LaTeX Beamer: The copyright is inserted as a <code>\logo{}</code> specification, but
this construction does not work in general. Then you cannot get the
copyright on every page. The copyright is inserted as part of the
date command so it is visible on the front page.
</p>

<p>Recall that <code>{copyright...}</code> specification(s) must be part of the <code>AUTHOR:</code>
command in order to get any copyright notice at all.
</p>
<h2 id="latex:custom:fig:name" class="anchor">How do I get &quot;Figure&quot; written in another language?</h2>

<p>DocOnce documents can be written in any language, but figure captions
typically contain the English word &quot;Figure&quot;. This must be fixed
by auto-editing the output file after translation by <code>doconce format</code>.
</p>

<p>In LaTeX you can use your native language package, e.g.,</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce replace &#39;% insert custom LaTeX commands...&#39; &#39;\\usepackage[norsk]{babel} mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>to get the Norwegian language.</p>

<p>In other formats you have do more manual substitutions:</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce replace Figure Figur mydoc.html
doconce replace figure figur mydoc.html
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>or both in one command using regular expressions:</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce stubst &#39;([Ff]igur)e&#39; &#39;\g&lt;1&gt;&#39; mydoc.html
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="spellcheck-reports-mistakes-that-i-cannot-find" class="anchor">Spellcheck reports mistakes that I cannot find </h2>

<p>The <code>doconce spellcheck</code> command strips off a lot of text
(math, code, syntax tags) before it starts spellchecking. The
spellchecked text is therefore different from the doconce source!
Fortunately, the file that is actually spellchecked can be examined.
If the spellcheck command is
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce spellcheck mydoc
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>the file <code>tmp_stripped_mydoc.do.txt</code> contains the text that is actually
run through the spellchecker (<code>ispell</code>). Search for the misspelled word there and
try to find it in the doconce source code. Very often, strange misspellings
come from a syntax typo that has led to a strange word in the stripped
version.
</p>

<p>Wrong typesetting of mathematics can lead to strange errors, e.g.,
misspellings such as <code>iu</code> because of some math <code>f_iu_i</code> that is
not properly typeset between dollar signs. Here are some useful grep
commands to search for such errors:
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">grep --color=auto -E &#39;\biu\b&#39; tmp_stripped_mydoc.do.txt
grep --color=auto -E &#39; iu&#39; tmp_stripped_mydoc.do.txt
grep --color=auto -E &#39;iu &#39; tmp_stripped_mydoc.do.txt
grep --color=auto -E &#39;iu&#39; tmp_stripped_mydoc.do.txt
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="spellcheck-reports-a-lot-of-mistakes-related-to-latex-math" class="anchor">Spellcheck reports a lot of mistakes related to LaTeX math </h2>

<p>The <code>doconce spellcheck</code> command should ignore LaTeX math, but if
the dollar signs for inline math are not correct (one missing, for instance),
a lot of math enters the text to be spellchecked. Invoke the
relevant <code>tmp_missing_*</code> file and find the first math-style expression that
is reported as misspelling. Open the corresponding stripped file,
<code>tmp_stripped_*</code>, which is supposed to have all the math stripped
away, and search for the misspelling. When you find it, you will see
that there are math expressions in the stripped file that should not
be there. (Because of wrong begin and end signs around math expressions
ordinary text has instead been stripped away. This way, a missing dollar
sign can lead to hundreds of misspellings.)
Find the problem in the corresponding DocOnce file and correct it.
A similar error can be caused by wrong matching
of equation environments between <code>!bt</code> and <code>!et</code>.
</p>
<h2 id="text-between-subexercises-are-moved" class="anchor">Text between subexercises are moved </h2>

<p>If you insert text between a <code>!esubex</code> and the next <code>!bsubex</code>, this
text is moved before all the subexercises. This is a feature, not a
bug (exercises have certain elements: main text, subexercises, hints,
etc. that are typeset in a specific order, which may be different from
what appears in the DocOnce source file). If you need a comment
between two subexercises, just place the comment at the end of the
previous subexercise.
</p>
<h2 id="doconce-aborts-because-of-a-syntax-error-that-is-not-an-error" class="anchor">DocOnce aborts because of a syntax error that is not an error </h2>

<p>DocOnce searches for typical syntax errors and usually aborts the
execution if errors are found. However, it may happen,
especially in verbatim blocks, that DocOnce reports syntax errors
that are not errors. To continue execution, simply add the
<code>--no_abort</code> option on the command line. You may send an email
to the DocOnce author at <code>hpl@simula.no</code> and report the problem.
</p>
<h2 id="figure-captions-are-incomplete" class="anchor">Figure captions are incomplete </h2>

<p>If only the first part of a figure caption in the DocOnce file is seen
in the target output format, the reason is usually that the caption
occupies multiple lines in the DocOnce file. The figure caption must
be written as <em>one line</em>, at the same line as the FIGURE keyword.
</p>
<h2 id="problems-with-boldface-and-emphasize" class="anchor">Problems with boldface and emphasize </h2>

<p>Two boldface or emphasize expressions after each other are not rendered
correctly. Merge them into one common expression.
</p>
<h2 id="links-to-local-directories-do-not-work" class="anchor">Links to local directories do not work </h2>

<p>Links of the type</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">see the &quot;examples directory&quot;: &quot;src/examples&quot;
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>do not work well. You need to link to a specific HTML file:</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">see the &quot;examples directory&quot;: &quot;src/examples/index.html&quot;
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>We recommend to put all files you link to in a <code>_static</code> directory
if you intend to use the <code>sphinx</code> output. This guarantees that all
your files are collected in the Sphinx directory tree bundle.
With plain <code>html</code> output only, you can link to whatever, but remember
to move all files you link to if you move the primary <code>.html</code> file.
</p>
<h2 id="links-are-not-typeset-correctly" class="anchor">Links are not typeset correctly </h2>

<p>Not all formats will allow formatting of the links. Verbatim words
in links are allowed if the whole link is typeset in verbatim:
</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">see the directory &quot;`examples`&quot;: &quot;src/examples/index.html&quot;.
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>However, the following will not be typeset correctly:</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">see the &quot;`examples`&quot;: &quot;src/examples/index.html&quot; directory.
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The back-ticks must be removed, or the text can be reformulated as
in the line above it.
</p>
<h2 id="inline-comment-does-not-handle-verbatim-or-emphasis-right" class="anchor">Inline comment does not handle verbatim or emphasis right </h2>

<p>Inline comments lead (in LaTeX output formats) to shortened titles for
a table of inline comments, and the shortening is done naively: the
title can cut a verbatim expression in the middle. There is no other
way around that to rewrite the inline comment. (The title consists of
the first 50 characters or so of the text.
</p>
<h2 id="inline-verbatim-code-or-boldface-is-not-detected-when-used-with-a-footnote" class="anchor">Inline verbatim code or boldface is not detected when used with a footnote </h2>

<p>There must be a space between the verbatim code (or boldface words)
and the footnote bracket:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">The construction `def f(x,y):`[^whitespace] is standard.

[^whitespace]: Well, a space before the `y` argument, as in `f(x, y)`,
would be the standard.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="inline-verbatim-code-is-not-detected" class="anchor">Inline verbatim code is not detected </h2>

<p>Make sure there is a space before the first back-tick.</p>
<h2 id="inline-verbatim-text-is-not-formatted-correctly" class="anchor">Inline verbatim text is not formatted correctly </h2>

<p>Make sure there is whitespace surrounding the text in back-ticks.</p>
<h2 id="strange-non-english-characters" class="anchor">Strange non-English characters </h2>

<p>The former reason for this problem is that DocOnce could only work with latin1
(ISO-8859) encoding and not UTF-8. After May 2013, DocOnce applies
UTF-8 both for HTML and LaTeX.
</p>

<p>Check the encoding of the <code>.do.txt</code> file with the Unix <code>file</code> command
or with
</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce guess_encoding myfile.do.txt
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>If the encoding is different from ASCII or UTF-8, say latin1, convert to UTF-8
using either of the Unix commands
</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce change_encoding latin1 utf-8 myfile.do.txt
Terminal&gt; iconv -t utf-8 -f latin1 myfile.do.txt --output newfile
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="wrong-norwegian-characters" class="anchor">Wrong Norwegian characters </h2>

<p>When DocOnce documents have characters not in the standard ASCII set,
the format of the file must be UTF-8. See
the section "Strange non-English characters" above for how to
run <code>doconce change_encoding</code> to change the encoding of the DocOnce file.
</p>
<h2 id="too-short-underlining-of-rest-headlines" class="anchor">Too short underlining of reST headlines </h2>

<p>This may happen if there is a paragraph heading without
proceeding text before some section heading.
</p>
<h2 id="found-bt-but-no-tex-blocks-extracted-bug" class="anchor">Found <code>!bt</code> but no tex blocks extracted (BUG) </h2>

<p>This message points to a bug, but has been resolved by removing blank lines
between the text and the first <code>!bt</code> (inserting the blanks again did not
trigger the error message again...).
</p>
<h2 id="examples-are-typset-with-environment-delimiters-visible" class="anchor">Examples are typset with environment delimiters visible </h2>

<p>If you see an Example section containing <code>!bsubex</code>, <code>!bsol</code>, or other
begin and end tags for environments, it means that you have intended
to typeset examples as exercises, but forgotten the command-line
option <code>--examples_as_exercises</code>. The text in the example is typeset
as is unless this option is included.
</p>
<h2 id="emacs-editing-does-not-work-properly-because-of-regexp-overflow" class="anchor">Emacs editing does not work properly because of "regexp overflow" </h2>

<p>Sometimes the Doonce editing mode (see the
<em>Emacs DocOnce Formatter</em> section in the manual) in Emacs
leads to an error message ending with &quot;overflow in regexp matcher&quot;.
This error is due to some regular expression used in the DocOnce editing
mode. The remedy is to split the file into smaller pieces and include
the pieces using the <code>preprocess</code> directive <code>#include &quot;piece.do.txt&quot;</code>.
The error message comes with the DocOnce file contains too much text
for Emacs to handle.
</p>
<h2 id="my-machine-hangs-if-i-have-many-movies" class="anchor">My machine hangs if I have many movies </h2>

<p>DocOnce has no limits on the amount of movies. When the output is
in HTML, one big HTML file may contain too many movies (local movie
files or embedded YouTube movies) for the browser to handle.
The remedy is to split the document into smaller pieces by inserting
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!split
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>for every new page. After <code>doconce format html mydoc</code>, run
<code>doconce split_html mydoc.html</code> to get the document split into
a main document <code>mydoc.html</code> and pieces <code>._mydocXXX.html</code>, where
<code>XXX</code> stands for three digits (<code>000</code>, <code>001</code>, <code>002</code>, and so forth).
</p>
<h2 id="how-can-i-use-quotes-in-a-link" class="anchor">How can I use quotes in a link? </h2>

<p>Links are typeset inside double quotes, but DocOnce applies double backticks
and double single quotes to typeset quotes, so the right form is
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&quot;This is a ``link text&#39;&#39; to google&quot;: &quot;http://google.com&quot;.
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>It appears as (typset in a <code>quote</code> admon):</p>

<blockquote>
    <p><a href="http://google.com" target="_self">This is a &quot;link text&quot; to google</a>.</p>
</blockquote>

<h2 id="conversion-from-doconce-to-google-docs" class="anchor">Conversion from DocOnce to Google Docs </h2>

<ul>
 <li> Transform the DocOnce document to HTML, upload to Google Drive, right-click the file and open as Google Docs.</li>
 <li> It might be necessary to adjust formatting, e.g., insert an extra line between paragraphs.</li>
 <li> MathJax code is not converted to the Google Docs LaTeX counterpart and appears verbatim.</li>
 <li> Pygmentized computer code and admons look fine.</li>
</ul>
<h2 id="convesion-from-google-docs-to-doconce" class="anchor">Convesion from Google Docs to DocOnce </h2>

<ul>
 <li> Save as HTML file and use Pandoc to convert to Markdown. Use the <code>--markdown</code> and <code>--md2do_output=</code> options to `doconce format to convert to DocOnce.</li>
 <li> Lists in Markdown must be intended.</li>
 <li> Notes in Google Docs become (potentially many) footnotes. Some tailored editing is necessary.</li>
</ul>
<p>This solution is not much explored and more text transformations from
Pandoc-generated Markdown is certainly needed.
</p>
<h2 id="are-there-any-tools-for-shared-online-writing-of-doconce-documents" class="anchor">Are there any tools for shared online writing of DocOnce documents? </h2>

<p>In theory, <a href="http://draftin.com" target="_self"><tt>http://draftin.com</tt></a> and <a href="https://stackedit.io" target="_self"><tt>https://stackedit.io</tt></a>
can be used to share Markdown documents and these can be transform
to and from DocOnce documents. Tested to a little degree, but may
work for very simple documents (sections, lists, code - no labels, refs,
math, admons, code copied from file).
Not all of Extended Markdown is interpreted by DocOnce, and DocOnce
transforms to Panddoc-extended Markdown, not the Extended Markdown
used by these sites.
</p>
<h2 id="trouble:pitfalls" class="anchor">Examples on seemingly legal syntax that fails</h2>

<p>Since DocOnce applies regular expressions to a large extent to translate
the input source to the output format, limitations of regular expressions
may lead to unexpected results. Here are some examples on what can go wrong.
</p>
<h3 id="double-bold-italic" class="anchor">Double bold/italic </h3>

<p>Two strings with bold or emphasize after each other will not work:</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #408080; font-style: italic"># Not properly interpreted:</span>
Here is a _bold_ _word_.
<span style="color: #408080; font-style: italic"># This is how to do it:</span>
Here is a _bold word_.

<span style="color: #408080; font-style: italic"># Same with emphasize/italic:</span>
Cannot write *two emphasized* *words*,
but must write *two emphasized words*.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The wrong syntax implies that one of the texts inside
bold/italic tags will appear with DocOnce syntax in the output.
</p>
<h3 id="mix-of-bold-italic-and-math" class="anchor">Mix of bold/italic and math </h3>

<p>Trying to typeset a mixture of text and mathematics or code in boldface or
emphasized font fails:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">_It is important that $u_1=2$!_
*It is important that `a*b=b*a` in any computer language*.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The reason is that boldface or emphasize text cannot contain the
special characters dollar sign and backtick. However, if these
were allowed, the above examples would fail because the underscore
in <code>$u_1=2$</code> would mark the end of the boldface text. Similarly,
the <code>*</code> in <code>a*b</code> would mark the end of the emphasized text.
Such problems are avoided by <em>only using plain text inside
emphasize or boldface tags</em>:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">_It is important that_ $u_1=2$!
*It is important that* `a*b=b*a` *in any computer language*.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Another similar example is the mix of <code>&lt;font color=&quot;col&quot;&gt;text&lt;/font&gt;</code> syntax
with braces inside the text. For example,
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">color{blue}{However, here a blue color specification
fails: $\frac{1}{2}\omega^2$.}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The text part is interpreted as string with <code>However</code> and lasting up
to the first right brace, which is in <code>\frac{1}</code>. A remedy is, as above,
to only use plain text inside the text part of the color specification
and use a <code>\textcolor</code> command inside the mathematics:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">color{blue}{However, here a blue color specification
fails:} $\textcolor{red}{\frac{1}{2}\omega^2}$.}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Mathematics and code in blocks are invisible when inline tagging is
interpreted and translated. Therefore, a specification as follows
works well:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">color{red}{This equation,

!bt
<span style="color: #008000">\begin{equation}</span>
a = b
<span style="color: #008000">label{eq1}</span>
<span style="color: #008000">\end{equation}</span>
!et
is meant to be in red and it works.}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The rules are that <code>*text*</code>, <code>_text_</code>, and <code>&lt;font color=&quot;color&quot;&gt;text&lt;/font&gt;</code>
employs a simple rule: <code>text</code> lasts up to the first end-tag
character (<code>*</code>, <code>_</code>, and <code>}</code> above), but code and math blocks
do not count.
</p>
<h2 id="how-can-i-make-pressbooks-com-books-from-doconce" class="anchor">How can I make pressbooks.com books from DocOnce? </h2>

<p><a href="http://pressbooks.com" target="_self"><tt>http://pressbooks.com</tt></a> supports HTML input with WordPress LaTeX mathematics,
so the easiest way is to compile DocOnce to HTML with the <code>--wordpress</code>
option, put the file on the web somewhere, click <em>Utilities - Import</em>
in pressbooks.com, then choose HTML input, write the URL, and upload.
</p>

<p>Note that WordPress LaTeX cannot refer to equations using labels!
This is a major problem with pressbooks.com.
</p>
<h2 id="trouble:epub" class="anchor">How can I produce ePub books from DocOnce?</h2>

<p>DocOnce has no direct translation to ePub, but one can apply a script
<a href="https://github.com/doconce/ebookmaker" target="_self"><tt>ebookmaker.py</tt></a> to translate
a set of split HTML files to ePub. Bootstrap styles with mathematics
and code come out very nice in ePub this way.
The script needs a JSON file. If <code>mydoc.do.txt</code> is the DocOnce file
and <code>._mydoc*.html</code> the set of split HTML files after translation
to HTML, the JSON file may look like this:
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">{
    &quot;filename&quot; : &quot;mydoc&quot;,
    &quot;title&quot; : &quot;Title of the document&quot;,
    &quot;authors&quot; : [
        {
            &quot;name&quot; : &quot;Hans Petter Langtangen&quot;,
            &quot;sort&quot; : &quot;Langtangen, Hans Petter&quot;
        }
    ],
    &quot;rights&quot; : &quot;Public Domain&quot;,
    &quot;language&quot; : &quot;en&quot;,
    &quot;publisher&quot;: &quot;hpl&quot;,
    &quot;subjects&quot; : [ &quot;Science&quot; ],
    &quot;contributors&quot; : [
        {
            &quot;name&quot; : &quot;Hans Petter Langtangen&quot;,
            &quot;role&quot; : &quot;author&quot;
        }
    ],
    &quot;identifier&quot; : {
        &quot;scheme&quot; : &quot;URL&quot;,
        &quot;value&quot; : &quot;http://somewhere.net&quot;
    },
    &quot;contents&quot; : [
        {
            &quot;type&quot; : &quot;text&quot;,
            &quot;source&quot; : &quot;._mydoc*.html&quot;
        }
    ],
    &quot;toc&quot; : {
        &quot;depth&quot; : 2,
        &quot;parse&quot; : [ &quot;text&quot; ],
        &quot;generate&quot; : {
            &quot;title&quot; : &quot;Index&quot;
        }
    }
}
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Just edit this file to your needs, save it as <code>mydoc.json</code> and run
<code>epubmaker.py mydoc.json</code> to produce <code>mydoc.epub</code>.
Read in <a href="http://calibre-ebook.com/" target="_self">Calibre</a>
on computers or use ebook readers on phones and tablets.
</p>
<h2 id="trouble:non_English" class="anchor">What about non-English languages and DocOnce?</h2>

<p>DocOnce can handle non-English language, although most of its use has
concerned documents in English. When writing in languages with
non-ASCII characters, remember to use the command-line option
<code>--encoding=utf-8</code>.
Some other points of importance:
</p>

<ul>
 <li> The abstract requires a heading Summary or Abstract. This heading must be substitued by the appropriate word after translation.</li>
 <li> LaTeX files should make use of packages and options for the language in question such that LaTeX-generated headings get the right language-specific wording. Use <code>doconce replace</code> or <code>doconce search</code> modify the <code>.tex</code> file (see the Bash script referred to below for examples).</li>
 <li> Some DocOnce-generated headings are in English, e.g., &quot;Table of Contents&quot;, which must be edited by <code>doconce replace</code>.</li>
 <li> For Sphinx output, two edits in files in the Sphinx root directory (<code>sphinx-rootdir</code> by default) are necessary (see Bash script below for examples on autoediting):</li>
<ul>
   <li> Insert right language in <code>conf.py</code>: <code>language = 'nb_NO'</code> for Norwegian</li>
   <li> Edit headings in <code>index.rst</code>: &quot;Contents:&quot; and &quot;Tables and indices&quot;, to what the language demands</li>
   <li> Unfortunately, &quot;Page contents&quot;, &quot;Next page&quot;, and &quot;Previous page&quot; remains in English in the navigation area (these can, of course, be replaced in all the HTML files generated by Sphinx in <code>_build/html</code> - recall to edit also all the files starting with a dot if you have split the document (<code>doconce split_rst</code>))</li>
</ul>
</ul>
<p>There is an example of a document in Norwegian in the DocOnce repository
where we do all necessary adjustments mentioned above:
</p>

<ul>
 <li> <a href="https://github.com/doconce/doconce/blob/master/doc/src/locale/Norwegian.do.txt" target="_self">DocOnce source</a></li>
 <li> <a href="https://github.com/doconce/doconce/blob/master/doc/src/locale/make.sh" target="_self">Bash script for compiling the DocOnce source</a></li>
 <li> <a href="http://doconce.github.io/doconce/doc/pub/locale/Norwegian.pdf" target="_self">PDF</a></li>
 <li> <a href="http://doconce.github.io/doconce/doc/pub/locale/Norwegian.html" target="_self">HTML</a></li>
 <li> <a href="http://doconce.github.io/doconce/doc/pub/locale/sphinx/index.html" target="_self">Sphinx</a></li>
</ul>
<h2 id="lists-look-wrong" class="anchor">Lists look wrong </h2>

<p>It is very important to be accurate with white space in lists.
There must be exactly <em>one blank</em> between the <code>o</code> or <code>*</code> that
starts an item and the following text, and multiple lines in an
item must be perfectly aligned. Here are some typical errors:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"> o a rectangular pulse
 o  a Gaussian pulse
 o one period of a cosine pulse
 o half a period of
  a cosine pulse
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Problem: <code>a Gaussian pulse</code> is not properly aligned, <code>a cosine pulse</code> on
the last line is not properly aligned. The correct formatting is
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"> o a rectangular pulse
 o a Gaussian pulse
 o one period of a cosine pulse
 o half a period of
   a cosine pulse
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="how-can-i-get-an-overview-of-all-files-that-are-included-in-a-document" class="anchor">How can I get an overview of all files that are included in a document? </h2>

<p>Suppose the root (main) document is <code>mydoc.do.txt</code>. Run</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce include_map mydoc.do.txt
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The output lists all the recursive <code>#include</code> Preprocess statements so you
can see how all files are included.
</p>
<h2 id="how-to-write-the-dollar-sign-for-an-amount-in-dollars" class="anchor">How to write the dollar sign for an amount in dollars? </h2>

<p>If you want to write <code>$1,000</code>, this is not trivial, because the dollar
sign is used for inline math formulas, and everything from this dollar sign
up to the next is interpreted as a math formula.
</p>

<p>The solution in DocOnce is to prefix the dollar sign by a backslash (same
syntax as required by LaTeX).
This ensures correct output in all output formats.
</p>

<p>Another solution is to pre- or postfix the amount by USD instead of the
dollar sign.
</p>
<h2 id="trouble:Externaldocuments" class="anchor">Problems with Externaldocuments specifications</h2>

<p>The <code># Externaldocuments:</code> command is used for <em>generalized
references</em> to lables in other documents. The command specifies
directories with <code>.aux</code> files and provides the necessary information
for using <code>xr</code> package for external references in case of LaTeX
output. For all other formts an alternative user-given text is used
and <code># Externaldocuments:</code> has no effect.  A typical use case is that
one book refers to another book.  This may cause trouble when the
<code>.tex</code> and <code>.aux</code> files specified in the <code># Externaldocuments:</code>
command do not exist. A quick fix is to follow the advice in the error
message and use the <code>touch</code> command to create empty files so DocOnce
does not abort the execution. However, the only real fix is to install
all the directory trees specified in the <code># Externaldocuments:</code>
command.
</p>

<p>References to such external documents may also cause trouble when
sending the <code>.tex</code> files for a book to a publisher, since the
<code>\externaldocument{}</code> commands in the <code>.tex</code> file
in this file will refer to <code>.aux</code>
files in other directories (which the publisher then must have).
A good fix to this problem is provided by the sample packing
script <a href="https://github.com/doconce/setup4book-doconce/blob/master/doc/src/book/pack_Springer.sh" target="_self"><tt>pack_Springer.sh</tt></a>,
which calls up another script <a href="https://github.com/doconce/setup4book-doconce/blob/master/doc/src/book/grab_stylefiles.py" target="_self"><tt>grab_stylefiles.py</tt></a>,
which automatically copies the <code>.aux</code> files in question to a subdirectory and
autoedits the main <code>.tex</code> for the DocOnce document accordingly. The
purpose of <code>pack_Springer.sh</code> is to make a directory tree with all
files (including stylefiles) needed to compile a LaTeX version of the
document. This tree can then be sent to the publisher and is self contained.
</p>

<p>Another fix for problems with the <code># Externaldocuments:</code> command is to
hardcode references when files needs to be sent to a publisher. Typically,
one has
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">% if not FOR_PUBLISHER:
<span style="color: #408080; font-style: italic"># Externaldocuments: ../../some/path, ../some/other/path</span>
% endif
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Every generalized reference to a label in the specified external
documents must have a special case when files are meant
for a publisher:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">% if FOR_PUBLISHER
ref[Section 4.2][ in
% else:
ref[Section ref{my:label}][ in
%endif
cite {book}][the section ``Guidelines&#39;&#39; in the document
<span style="color: #BA2121">&quot;A note on everything&quot;</span>: &quot;http://...&quot;].
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Setting <code>FOR_PUBLISHER=True</code> as part of the <code>doconce format pdflatex</code>
command will then effectively remove everything with the
<code># Externaldocuments:</code> command and generalized references.
</p>
<h2 id="what-is-the-difference-between-doconce-replace-and-doconce-subst" class="anchor">What is the difference between doconce replace and doconce subst? </h2>

<p><code>doconce replace</code> replaces one text by another, exactly as the text is
written. For example,
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce replace float double *.do.txt
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>is the same as
invoking an editor and replacing <code>float</code> by <code>double</code> in all files <code>*.do.txt</code>.
On the other hand, <code>doconce subst</code> works with <em>regular expressions</em>, so
<code>doconce subst from to</code> is the same as <code>re.sub(from, to)</code> in Python.
You need experience with <code>re.sub</code> and regular expressions to take advantage
of <code>doconce subst</code>.
Regular expressions are much more powerful for editing text, but also
more complicated and errorprone.
</p>
<h2 id="python-raises-regex-exception-after-code-command" class="anchor">Python raises regex exception after <code>@@@CODE</code> command </h2>

<p>A regex exception is cryptic to interpret, so in case you get a Python regex
exception right after a line in the output indicating copying code from a
file, it points to an error in the regex used to identify the &quot;from&quot; or
&quot;to&quot; line. Just examine the regex and rewrite, perhaps to something
simpler, if possible. Be careful with parentheses and special regex
symbols (must be excaped by a backslash).
</p>
<h1 id="preprocess-mako" class="anchor">Preprocess/Mako </h1>
<h2 id="list-important-things-to-remember-when-programming-mako" class="anchor">List important things to remember when programming Mako </h2>

<ul>
 <li> Always remember a colon after Mako control statements like <code>% if VAR:</code> and <code>% else:</code>.</li>
 <li> Keep Python code more than a few lines <em>outside</em> of the DocOnce file, and use <code># #include</code> to include the code. See the <em>Debugging Python code in Mako</em> section in the manual for how to do it.</li>
 <li> Do not use continuation character (backslash) in Python code.</li>
 <li> When a Mako error refers to a line in the text, invoke the file that Mako sees: <code>tmp_preprocess__mydoc.do.txt</code> if the DocOnce file has name <code>mydoc.do.txt</code>.</li>
 <li> Use double <code>##</code> (Mako comment) to comment out Mako calls to functions or Mako variables.</li>
</ul>
<h2 id="the-mako-preprocessor-is-fooled-by-doconce-text" class="anchor">The Mako preprocessor is fooled by DocOnce text </h2>

<p>Here are possible problems for Mako:</p>

<ul>
 <li> Strings with <code>'T&lt;%.1f'</code> look as openings of Mako blocks (<code>&lt;%</code>); change to <code>'T &lt; %.1f'</code> to avoid this confusion.</li>
</ul>
<h2 id="the-mako-preprocessor-has-problems-with-lines-starting-with-percent-sign" class="anchor">The Mako preprocessor has problems with lines starting with percent sign </h2>

<p>If you have lines starting with <code>%</code> inside code segments (for example,
SWIG code or Matlab comment lines), the Mako preprocessor will crash
because it thinks these lines are Mako statements. DocOnce detects
this problem and emits an error message. The solution to
this problem is to replace a single <code>%</code> at the <em>very</em> beginning of the line
(column 1) inside code by a double <code>%%</code>. Mako will replace it by a single <code>%</code>.
However, contrary to what is claimed in the Mako documentation,
an indented double <code>%%</code> remains <code>%%</code> and is not converted to <code>%</code> (and
using a single <code>%</code> gives a Mako error). The trick is to write <code>${'%'}</code>
as demonstrated here:
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!bc mcod
%% Comment on the beginning of the line can be escaped by %%
if a &gt; b
  ${&#39;%&#39;} Indented comment needs this trick
  c = a + b
end
!ec
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="the-mako-preprocessor-gives-syntax-error-in-python-code" class="anchor">The Mako preprocessor gives syntax error in Python code </h2>

<p>The information with respect to syntax errors in Python code is
sparse. It is recommended to move the Python code to separate files
and test it with the ordinary Python interpreter. See the
section <em>Debugging Python code in Mako</em> in the DocOnce manual.
</p>
<h2 id="the-mako-preprocessor-gives-strange-error-messages" class="anchor">The Mako preprocessor gives strange error messages </h2>

<p>If you to a little syntax error in Mako, the consequences can be
quite unpredictable. Especially, if you forget curly braces around
variables or function calls, the forthcoming text is processed as
part of the Mako command. Pay attention to the line number reported
by Mako: this is the line number after Preprocess has processed
the DocOnce document, so you need to load <code>tmp_preprocess__mydoc.do.txt</code>
and go to the right line in that file to see the Mako problem
(here the DocOnce document is named <code>mydoc.do.txt</code>).
</p>

<p>Look through the specific Mako problems
reported below, and if they do not bring you to a solution of
the problem, search for all occurences of dollar, left curly brace
and check the syntax carefully. Likewise, check the syntax of
Mako if-tests.
</p>

<p>Another widely used technique is to copy out small parts of
the complete document to a separate file and run <code>doconce format</code>.
In this way you can easier see which parts of the document that
work and where the error suddenly appears.
</p>

<div class="alert alert-block alert-success alert-text-normal"><b>Tip: Compile your DocOnce document frequently</b>
<p>The best means against Mako problems is to run <code>doconce format</code>
often. Combined Git, you can take
a <code>git diff</code> to see what you have recently changed and get an idea
what can be wrong.
</p>
</div>

<h2 id="the-mako-preprocessor-claims-a-variable-is-undefined" class="anchor">The Mako preprocessor claims a variable is undefined </h2>

<p>Very often such errors are related to typos when using Mako
variables or functions, or correct yet undesired LaTeX syntax.
For example,
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">${\cal O}(\Delta x^2)$
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>is valid LaTeX, but
the dollar sign and curly braces confuse Mako. Rewrite such
mathematics. It is wise to not use <code>${</code> anywhere in LaTeX mathematics.
Create a newcommand if there are no other possible rewritings.
A known common problem is <code>${}^+$</code> type of indication of superscripts.
A suggested rewrite is <code>$\,{}^+$</code>.
</p>

<p>The error message will ask you to rerun <code>doconce</code> with
<code>--mako_strict_undefined</code>, which will display the variable that is
confusing Mako. Sometimes the variable is printed, sometimes a totally
different name is said to be undefined. This is confusing, because
then you have to use the bisection method below to narrow down the
problem yourself.
</p>

<p>Do not continue to use <code>--mako_strict_undefined</code> while you are
debugging because this variable or a new variable will then always be
undefined in that mode.  Rerun without <code>--mako_strict_undefined</code> to
see if the problem is gone. If not, try the option again, and if no
progress, use <code># #ifdef</code> directives to comment out large portions of
the text and apply a bisection procedure to locate where the Mako
problem is (without <code>--mako_strict_undefined</code>).  A bisection procedure
means that you comment out the last half, find in which half the
problem is, comment out half of that half, find in which half the
problem is, and so on. The procedure converges pretty quickly, even
for large books.
</p>
<h2 id="something-goes-wrong-in-the-preprocessing-step" class="anchor">Something goes wrong in the preprocessing step </h2>

<p>You can examine <code>tmp_preprocess__filename</code> and <code>tmp_mako__filename</code>,
where <code>filename</code> is the complete name of the DocOnce file, to see
what the preprocessors actually to and if something is wrong in these
files before DocOnce starts translating the text.
One or both of those files may be missing, but examine the beginning
of the output from DocOnce to see exactly which preprocessors are run
and on which files.
</p>
<h2 id="preprocessor-directives-do-not-work" class="anchor">Preprocessor directives do not work </h2>

<p>Make sure the preprocessor instructions, in Preprocess or Mako, have
correct syntax. Also make sure that you do not mix Preprocess and Mako
instructions. DocOnce will then only run Preprocess.
</p>
<h1 id="code-or-tex-blocks" class="anchor">Code or Tex Blocks </h1>
<h2 id="too-long-lines-in-math-blocks" class="anchor">Too long lines in math blocks </h2>

<p>A common problem in LaTeX (not directly related to DocOnce) is too long lines
in math blocks. The trick is to use the <code>align</code> or <code>align*</code> environment
and introduce newlines with <code>\nonumber\\</code> to break up lines (without introducing
an equation number). Typically,
</p>

<ol>
<li> Insert <code>\nonumber\\</code> where you see a linebreak should occur.</li>
<li> Start next line with <code>&\quad</code> such that the continuing line starts slightly to the right of the alignment character used to align the equations. If you have only one equation, find some point where you insert <code>&</code> and just start the next line with <code>&</code> - no <code>\quad</code> displacement to the right is needed in that case.</li>
<li> <code>\left(</code> and <code>\right)</code> (and similar constructions for automatic adjustment of the sizes of parentheses) do not work accross linebreaks. This means that you must replace <code>\left(</code> by (e.g.) <code>\biggl(</code> unless there is a corresponding <code>\right</code> on the same line. Whether to choose <code>\biggl</code>, <code>\bigl</code>, or <code>\Biggl</code> depends on the desired size of the the parenthesis.</li>
</ol>
<h2 id="code-or-math-block-errors-in-rest" class="anchor">Code or math block errors in reST </h2>

<p>First note that a code or math block must come after some plain
sentence (at least for successful output in reST), not directly
after a section/paragraph heading, table, comment, figure, or
movie, because the code or math block is indented and then become
parts of such constructions. Either the block becomes invisible or
error messages are issued.
</p>

<p>Sometimes reST reports an "Unexpected indentation" at the beginning of
a code block. If you see a <code>!bc</code>, which should have been removed when
running <code>doconce format sphinx</code>, it is usually an error in the DocOnce
source, or a problem with the rst/sphinx translator.  Check if the
line before the code block ends in one colon (not two!), a question
mark, an exclamation mark, a comma, a period, or just a newline/space
after text. If not, make sure that the ending is among the
mentioned. Then <code>!bc</code> will most likely be replaced and a double colon
at the preceding line will appear (which is the right way in reST to
indicate a verbatim block of text).
</p>
<h2 id="strange-errors-around-code-or-tex-blocks-in-rest" class="anchor">Strange errors around code or TeX blocks in reST </h2>

<p>If <code>idx</code> commands for defining indices are placed inside paragraphs,
and especially right before a code block, the reST translator
(<code>rst</code> and <code>sphinx</code> formats) may get confused and produce strange
code blocks that cause errors when the reST text is transformed to
other formats. The remedy is to define items for the index outside
paragraphs.
</p>
<h2 id="something-is-wrong-with-a-verbatim-code-block" class="anchor">Something is wrong with a verbatim code block </h2>

<p>Check first that there is a "normal" sentence right before
the block (this is important for reST and similar
"ASCII-close" formats).
</p>
<h2 id="code-tex-block-is-not-shown-in-rest-format" class="anchor">Code/TeX block is not shown in reST format </h2>

<p>A comment right before a code or tex block will treat the whole
block also as a comment. It is important that there is normal
running text right before <code>!bt</code> and <code>!bc</code> environments.
</p>
<h2 id="verbatim-code-blocks-figures-and-admons-inside-lists-look-ugly" class="anchor">Verbatim code blocks, figures and admons inside lists look ugly </h2>

<p>Avoid verbatim code blocks, figures, and admons
inside lists (it makes life easier!).
Instead, use paragraph headings, say
</p>

<p>
<b>Step 1.</b>
Describe step. Add figure, code block, admon, etc.
</p>

<p>
<b>Step 2.</b>
Describe next step.
</p>

<p>If you miss the automatic numbering of items in enumerated lists, you
can simulate that with a Mako variable:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&lt;% counter = 0 %&gt;

&lt;% counter += 1 %&gt;
<span style="color: #800080; font-weight: bold">__Step ${counter}.__</span>
Describe step. Add figure, code block, admon, etc.

&lt;% counter += 1 %&gt;
<span style="color: #800080; font-weight: bold">__Step ${counter}.__</span>
Describe next step.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="latex-code-blocks-inside-lists-look-ugly" class="anchor">LaTeX code blocks inside lists look ugly </h2>

<p>Same solution as for computer code blocks as described in the
previous paragraph. Make sure the <code>!bt</code> and <code>!et</code> tags are in column 1
and that the rest of the non-LaTeX surrounding text is correctly indented.
Using paragraphs instead of list items is a good idea also here.
</p>
<h2 id="latex-code-appears-prior-to-paragraph-headings" class="anchor">LaTeX code appears prior to paragraph headings </h2>

<p>If you have a paragraph heading and then code right after,</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #800080; font-weight: bold">__Heading.__</span>

!bc pycod
def f(x):
    return 42
!ec
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>the generated LaTeX code is correct, but it is translated to PDF in
a wrong way such that the heading appears <em>after</em> the code.
A remedy is to insert some text after the paragraph heading.
See also the section <a href="#trouble:bsol:code">Solution heading in exercise solutions appear after the solution content</a> - it is the same problem.
</p>
<h2 id="numbered-equations-in-exercise-solutions-change-the-equation-numbers-in-the-text" class="anchor">Numbered equations in exercise solutions change the equation numbers in the text... </h2>

<p>This is a problem if you produce versions with and without solutions,
see the heading &quot;Numbering of Extra Equations in Solutions&quot; in the
DocOnce manual for description of the problem and its solutions.
</p>
<h1 id="rest-sphinx" class="anchor">reST/Sphinx </h1>
<h2 id="math-formulas-are-not-rendered-properly" class="anchor">Math formulas are not rendered properly </h2>

<p>HTML generated by Sphinx applies MathJax for rendering LaTeX mathematics.
Due to the way Sphinx embeds these formulas in HTML, sometimes the
formulas are not being rendered and instead the pure LaTeX code is
put in a box. The same formulas may appear right in pure HTML.
</p>

<p>The first thing to do is to check that the LaTeX generated PDF format
shows the formula correctly. The next step is to compile to HTML and
check if MathJax in pure HTML renders the formula correctly. If so,
the formula is correctly typeset, and the problem is related to Sphinx.
</p>

<p>There are basically two remedies: either drop Sphinx and go for HTML, or
try to rewrite the formula and try until the Sphinx-generated
HTML code manages to render it.
</p>

<p>Copy the problematic typesetting to a minimalistic document. If the
original document is split into pieces via
<code>doconce split_rst</code>, make sure your minimalistic document also contains
a <code>!split</code> command and is split into at least two pieces. This is because
equations get tags when documents are split, and with the <code>\tag{}</code> command,
it seems that sphinx rewrites the MathJax code, and this may cause
problems. This also means that dropping <code>doconce split_rst</code> and having
one big HTML file for Sphinx can make the rendering of mathematics
(much) easier.
</p>

<p>Some typical problems encountered are listed below.</p>

<ul>
 <li> Formulas with use of <code>\bar\boldsymbol{}</code>.</li>
 <li> Align environments with multiple equations. Try to simplify typesetting.</li>
 <li> <code>\mbox</code> or <code>\hbox</code> commands in equations.</li>
</ul>
<h2 id="sphinx-directory-generation-aborts-with-label-empty-or-too-long" class="anchor">Sphinx directory generation aborts with &quot;label empty or too long&quot; </h2>

<p>This is a strange error that might arise from a too long title of the document.
The solution is to specify a shorter title when running <code>doconce sphinx_dir</code> (i.e., to avoid getting the title from the original <code>.do.txt</code> document):
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce sphinx_dir title=&quot;Short Title&quot; \
          authors=&quot;A. B. Crunch&quot; theme=pyramid mydoc
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="title-level-inconsistent" class="anchor">Title level inconsistent </h2>

<p>reST does not like jumps in the levels of headings. For example, you cannot
have a <code>===</code> (paragraph) heading after a <code>=======</code> (section) heading without
a <code>====</code> (subsection) heading in between.
</p>
<h2 id="subsection-headings-appear-at-the-level-of-sections-in-the-table-of-contents" class="anchor">Subsection headings appear at the level of sections in the table of contents </h2>

<p>This is a problem that arises if you split a Sphinx document at the
subsection level. Then the subsection is the highest level in that part,
and it will then move up to the section level in the table of contents
(this is done by Sphinx, and DocOnce has no influence on the process).
</p>

<p>After Oct 2014, DocOnce ignores by default the <code>!split</code> commands that the
user has inserted and performs a split at the highest section level,
which means that chapters constitute the parts of the
document, if chapters are present, otherwise the sections represent the
different parts. If this behavior is not desired and the user's <code>!split</code>
commands are to be respected, provide the command-line argument
<code>--sphinx_keep_splits</code> in the <code>doconce format</code> command.
</p>
<h2 id="lists-do-not-appear-in-rst-files" class="anchor">Lists do not appear in .rst files </h2>

<p>Check if you have a comment right above the list. That comment
will include the list if the list is indentend. Remove the comment.
</p>
<h2 id="error-message-undefined-substitution-from-rest" class="anchor">Error message "Undefined substitution..." from reST </h2>

<p>This may happen if there is much inline math in the text. reST cannot
understand inline LaTeX commands and interprets them as illegal code.
Just ignore these error messages.
</p>
<h2 id="warning-about-duplicate-link-names" class="anchor">Warning about duplicate link names </h2>

<p>Link names should be unique, but if (e.g.) "file" is used as link text
several places in a reST file, the links still work. The warning can
therefore be ignorned.
</p>
<h2 id="inconsistent-headings-in-rest" class="anchor">Inconsistent headings in reST </h2>

<p>The <code>rst2*.py</code> and Sphinx converters abort if the headers of sections
are not consistent, i.e., a subsection must come under a section,
and a subsubsection must come under a subsection (you cannot have
a subsubsection directly under a section). Search for <code>===</code>,
count the number of equality signs (or underscores if you use that)
and make sure they decrease by two every time a lower level is encountered.
</p>
<h2 id="no-code-environment-appears-before-bc-ipy-blocks" class="anchor">No code environment appears before "bc ipy" blocks </h2>

<p>The <code>!bc ipy</code> directive behaves this way for <code>sphinx</code> output because
interactive sessions are automatically handled. If this is not
appropriate, shift to <code>!bc cod</code> or another specification of the
verbatim environment.
</p>
<h1 id="latex" class="anchor">LaTeX </h1>
<h2 id="lines-are-too-long" class="anchor">Lines are too long </h2>

<p>Too long lines are often handled with a forced newline like <code>\\</code> in
LaTeX, but this double backslash does not look good in other formats
when you use DocOnce. Try to rewrite the text such that LaTeX
naturally avoids too long lines. Inline verbatim can easily force
LaTeX to extend the line width, but see if you can use other words to
move the inline verbatim to the left or to the next line.
</p>

<p>A last resort is to use the preprocessor and test on ``FORMAT == 'pdflatex'`
and then use the double backslash.
</p>
<h2 id="tables-get-too-wide-need-to-wrap-text-in-the-columns" class="anchor">Tables get too wide - need to wrap text in the columns </h2>

<p>One can use the <code>tabularx</code> package. This is automatically enabled by
specifying the alignment of the actual column as <code>X</code> (means <code>l</code> for
all other output formats), for instance <code>|---c----X----|</code>.
</p>

<!-- #ifdef EXTRA -->
<!-- not necessary since ltablex is always added -->
<h2 id="tables-are-too-long" class="anchor">Tables are too long </h2>

<p>Tables with more rows than can fit on a page are just truncated.
The solution to this problem is to add the <code>ltablex</code> package.
One can add this package by (e.g.)
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce replace `,microtype` `,microtype,ltablex` mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>if <code>mydoc.tex</code> is the LaTeX file.</p>

<p>Note that if one applies the <code>X</code> column alignment for wrapping long
text in a column, the <code>ltablex</code> package is automatically added by DocOnce.
</p>
<!-- #endif -->
<h2 id="table-inside-user-defined-environment-does-not-work" class="anchor">Table inside user-defined environment does not work </h2>

<p>If the table appears at the end of the environment (e.g., a theorem or
example environment), add a sentence between the table and
the end-of-environment command.
</p>
<h2 id="strange-begin-description-error-arising-from-math" class="anchor">Strange <code>begin{description}</code> error arising from math </h2>

<p>If you have an inline math formula that is split over two lines, and the
formula continues with a minus sign on a line, this minus sign may
be interpreted as a <em>description list</em> and typeset as a list, which is
nonsense. The remedy is to move the minus sign at the beginning of the
line to the end of the last line.
</p>
<h2 id="inline-figures-should-have-more-vertical-space" class="anchor">Inline figures should have more vertical space </h2>

<p>You can insert <code>&lt;linebreak&gt;</code> (which gives a vertical space if
alone on a line):
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&lt;linebreak&gt;
&lt;linebreak&gt;

<span style="color: #008000">FIGURE: [...]</span>

&lt;linebreak&gt;
&lt;linebreak&gt;
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="how-can-i-use-a-special-package-for-typesetting-code-k-not-pyg-lst-or-vrb" class="anchor">How can I use a special package for typesetting code?K (not <code>pyg</code>, <code>lst</code>, or <code>vrb</code>) </h2>

<p>One gets the impression that <code>--latex_code_style=</code> has only the options
for Pygments, Listings, or the Verbatim packages, but in fact any package
can be used.
</p>

<p>Suppose you have the fictitious code enviroment <code>ultimate</code>
from the package <code>compcode</code> that you want to use, together with
a yellow backgrund, and with some
environment-specific parameters <code>arg1</code> and <code>arg2</code>. Then you can write
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format pdflatex mydoc --latex_packages=compcode \
         &#39;--latex_code_style=ultimate-yellow2[arg1=val1,arg2=val2]&#39;
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The resulting LaTeX code in <code>mydoc.tex</code> becomes</p>


<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>cod<span style="color: #008000">}{</span>cbg<span style="color: #008000">_</span>yellow2<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>ultimate<span style="color: #008000">}</span>[arg1=val1,arg2=val2]
...
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>ultimate<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>cod<span style="color: #008000">}</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>In this way, you can use any environment in any package for typesetting
code.
</p>
<h2 id="sphinx-and-html-show-pygmetized-code-but-not-latex" class="anchor">Sphinx and HTML show pygmetized code, but not LaTeX </h2>

<p>You have to explicitly select the <code>minted</code> environment when running <code>ptex2tex</code>
to get pygmentized computer code in LaTeX:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce ptex2tex mydoc envir=minted
Terminal&gt; pdflatex -shell-escape mydoc
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="latex-error-because-of-underscores" class="anchor">LaTeX error because of underscores </h2>

<p>LaTeX requires prefixing underscores by a backslash. Either typeset
words with underscores in inline verbatim text (so you do not need
the backslash) or use the preprocessor
to insert LaTeX-specific text with a backslash, e.g.,
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Here is a word underscore:
%% if FORMAT in (&#39;latex&#39;, &#39;pdflatex&#39;):
my\_word
%% else
my_word
%% endif
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Usually, inline verbatim text is way to go with underscores anyway.</p>
<h2 id="latex-does-not-like-underscores-in-urls" class="anchor">LaTeX does not like underscores in URLs </h2>

<p>Suppose you have a URL reference like</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">..which can be found in the file &quot;my_file.txt&quot;:
&quot;http://some.where.net/web/dir/my_file.txt&quot;.
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>LaTeX will stop with a message about a missing dollar sign. The reason
is that underscores in link texts need to be preceded by a backslash.
However, this is incovenient to do in the DocOnce source since the
underscore is misleading in other formats.
The remedy is to format the link text with inline verbatim tags (backticks):
</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">..which can be found in the file &quot;`my_file.txt`&quot;:
&quot;http://some.where.net/web/dir/my_file.txt&quot;.
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Verbatim text in links works fine with underscores.</p>
<h2 id="inline-verbatim-fails-in-admon-headings" class="anchor">Inline verbatim fails in admon headings </h2>

<p>A known problem is to have the word</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">\Verb
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>in (admon) headings. Otherwise inline verbatim should work, both in
section headings and admon headings.
</p>
<h2 id="how-can-i-customize-the-look-of-an-admonition" class="anchor">How can I customize the look of an admonition? </h2>

<p>The default environment, <code>--latex_admon=mdfbox</code>, has many options for
customization. Say we want the notice environment to have a very small
font, no background color, no line below the title, no visible frame,
and a smaller width. All this is a matter of editing the
variables in the <code>newmdenv</code> command that defines the
<code>notice_mdfboxmdframed</code> environment in the <code>.tex</code> file.
</p>

<p>The simplest approach is to make a script that automatically edits
some of the variables in <code>newmdenv</code> environments:
</p>


<!-- code=bash (!bc shpro) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #19177C">name</span><span style="color: #666666">=</span>tmp1
<span style="color: #408080; font-style: italic"># Edits for mdframed environments</span>
doconce format pdflatex <span style="color: #19177C">$name</span> --latex_code_style<span style="color: #666666">=</span>vrb
doconce subst <span style="color: #BA2121">&#39;  backgroundcolor=.+&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>
        <span style="color: #BA2121">&#39;  backgroundcolor=white,&#39;</span> <span style="color: #19177C">$name</span>.tex
doconce subst <span style="color: #BA2121">&#39;  frametitlebackgroundcolor=.+&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>
        <span style="color: #BA2121">&#39;  frametitlebackgroundcolor=white,&#39;</span> <span style="color: #19177C">$name</span>.tex
doconce subst <span style="color: #BA2121">&#39;  leftmargin=.+&#39;</span> <span style="color: #BA2121">&#39;  leftmargin=3cm,&#39;</span> <span style="color: #19177C">$name</span>.tex
doconce subst <span style="color: #BA2121">&#39;  rightmargin=.+&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>
        <span style="color: #BA2121">&#39;  rightmargin=3cm,\n  font=\\tiny,&#39;</span> <span style="color: #19177C">$name</span>.tex
doconce subst <span style="color: #BA2121">&#39;  frametitlerule=.+&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>
        <span style="color: #BA2121">&#39;  frametitlerule=false,&#39;</span> <span style="color: #19177C">$name</span>.tex
doconce subst <span style="color: #BA2121">&#39;  linewidth=.+&#39;</span> <span style="color: #BA2121">&#39;  linewidth=0pt,&#39;</span> <span style="color: #19177C">$name</span>.tex
<span style="color: #408080; font-style: italic"># Edits for fontsize in Verbatim</span>
doconce replace <span style="color: #BA2121">&#39;,fontsize=\fontsize{9pt}{9pt}&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>
        <span style="color: #BA2121">&#39;,fontsize=\fontsize{6pt}{6pt}&#39;</span> <span style="color: #19177C">$name</span>.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Note that these edits actually apply to all types of admonitions!
More tailored edits must include the text of the entire environment definition.
</p>

<p>Here is a possible test file:</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #000080; font-weight: bold">======= Heading =======</span>

Bla-bla.

<span style="color: #008000; font-weight: bold">!bnotice</span> Long box
% for i in range(10):
bla-bla, bla-bla, bla-bla, bla-bla, bla-bla, bla-bla, bla-bla,
% endfor

!bt
<span style="color: #008000">\begin{align}</span>
x &amp;\in [0,1]\\
y &amp;= sin(x)
<span style="color: #008000">\end{align}</span>
!et

!bc pycod
def myfuncf(x):
    return sin(x)
!ec

% for i in range(100):
bla-bla, bla-bla, bla-bla, bla-bla, bla-bla, bla-bla, bla-bla,
% endfor
<span style="color: #008000; font-weight: bold">!enotice</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>A (much) better approach is to define a <em>user-defined environment</em>,
called (e.g.) minipage, see the <a href="http://doconce.github.io/doconce/doc/pub/manual/manual.html#manual:userdef:envir" target="_self">manual</a>.
This environment has begin tag <code>!bu-minipage</code> and end tag
<code>!eu-minipage</code>. The environment is defined in a file
<code>userdef_environments.py</code> in the same directory as the DocOnce source
file.  An example is given in this <a href="https://github.com/doconce/doconce/blob/master/doc/src/userdef_envirs/minipage/userdef_environments.py" target="_self"><tt>userdef_environments.py</tt></a>
file.
</p>
<h2 id="how-can-i-have-unnumbered-sections" class="anchor">How can I have unnumbered sections? </h2>

<p>Use the <code>--section_numbering=off</code> option:</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format pdflatex mydoc --section_numbering=off
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="latex-suddenly-places-figures-differently" class="anchor">LaTeX suddenly places figures differently </h2>

<p>Until August 25, 2015, the figure environment applied the <code>[t]</code> (top) option,
but since then the <code>[h]</code> option is used. Of even greater influence are the
<code>topfraction</code>, <code>bottomfraction</code>, and <code>textfraction</code> parameters in the <code>.tex</code>
file. See the &quot;Figures&quot; section in the manual for more information and how
to customize the placement of figures.
</p>
<h2 id="trouble:figref:mako" class="anchor">I want figure references with page number too</h2>

<p>A DocOnce user wanted figure references to be as follows in LaTeX:</p>


<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #408080; font-style: italic">% if current page is different from figure page:</span>
... Figure <span style="color: #008000; font-weight: bold">\ref</span><span style="color: #008000">{</span>my:fig<span style="color: #008000">}</span> on page <span style="color: #008000; font-weight: bold">\pageref</span><span style="color: #008000">{</span>my:fig<span style="color: #008000">}</span>.
<span style="color: #408080; font-style: italic">% if current page is the same as the figure page:</span>
... Figure <span style="color: #008000; font-weight: bold">\ref</span><span style="color: #008000">{</span>my:fig<span style="color: #008000">}</span>.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>All other formats should emit the standard treatment of a DocOnce
figure reference with <code>ref</code>.
</p>
<h3 id="quick-solution-with-the-varioref-package" class="anchor">Quick solution with the <code>varioref</code> package </h3>

<p>DocOnce actually generates such references in LaTeX output
if you request the <code>varioref</code>
package: <code>--latex_packages=varioref</code> (the standard <code>ref</code> command
is now replaced by <code>\vref</code>, except in equation references).
</p>
<h3 id="manual-solution-or-a-good-example-on-what-mako-can-do" class="anchor">Manual solution (or a good example on what Mako can do) </h3>

<p>Here is an implementation using if-else tests in LaTeX and
internal variables. Unfortunately, this solution is not reliable
because it uses the <code>\thepage</code> variable in LaTeX (for the page number
of the current page) and this variable is unreliable. The solution
above (using <code>\vref</code> and the <code>varioref</code> package) is much better.
However, the manual solution is a good example on how to use Mako
to do seemingly complicated things.
</p>

<p>The above problem can be solved by some Mako programming and
usage of the LaTeX packages <code>ifthen</code> and <code>refcount</code>.
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">&lt;%
def figref(label):
    text = &#39;Figure ref{%s}&#39; % label
    if FORMAT in (&#39;latex&#39;, &#39;pdflatex&#39;):
	text += r&#39;\ifthenelse{\equal{\thepage}{\getpagerefnumber{%s}}}{}{ on page \pageref{%s}}&#39; % (label, label)
    return text
%&gt;

<span style="color: #008000">FIGURE: [myfigfile, width=600 frac=0.8] My figure. label{my:fig}</span>

We refer to ${figref(&#39;my:fig&#39;)}.

...
<span style="color: #408080; font-style: italic"># Much later</span>
..., as seen in ${figref(&#39;my:fig&#39;)}.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The first reference is on the same page as the figure, and LaTeX should
not write the page number, while the second reference is on another
page so both the figure number and the page number should appear in
the output. All other formats have a standard figure reference (translated
to a figure number in HTML and to the caption in Sphinx).
</p>

<p>The LaTeX output is something like this:</p>


<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>figure<span style="color: #008000">}</span>[h] <span style="color: #408080; font-style: italic">% my:fig1</span>
  <span style="color: #008000; font-weight: bold">\centerline</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\includegraphics</span><span style="color: #7D9029">[width=0.8\linewidth]</span><span style="color: #008000">{</span>myfigfile.png<span style="color: #008000">}}</span>
  <span style="color: #008000; font-weight: bold">\caption</span><span style="color: #008000">{</span>
  My figure. <span style="color: #008000; font-weight: bold">\label</span><span style="color: #008000">{</span>my:fig1<span style="color: #008000">}</span>
  <span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>figure<span style="color: #008000">}</span>
<span style="color: #408080; font-style: italic">%\clearpage % flush figures sec:fig</span>

We refer to Figure~<span style="color: #008000; font-weight: bold">\ref</span><span style="color: #008000">{</span>my:fig1<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\ifthenelse</span><span style="color: #008000">{</span>
<span style="color: #008000; font-weight: bold">\equal</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\thepage</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\getpagerefnumber</span><span style="color: #008000">{</span>my:fig<span style="color: #008000">}}}{}{</span> on page <span style="color: #008000; font-weight: bold">\pageref</span><span style="color: #008000">{</span>my:fig1<span style="color: #008000">}}</span>.

...
<span style="color: #408080; font-style: italic">% Much later</span>
..., as seen in Figure~<span style="color: #008000; font-weight: bold">\ref</span><span style="color: #008000">{</span>my:fig1<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\ifthenelse</span><span style="color: #008000">{</span>
<span style="color: #008000; font-weight: bold">\equal</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\thepage</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\getpagerefnumber</span><span style="color: #008000">{</span>my:fig<span style="color: #008000">}}}{}{</span> on page <span style="color: #008000; font-weight: bold">\pageref</span><span style="color: #008000">{</span>my:fig1<span style="color: #008000">}}</span>.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="error-when-running-latex-you-must-have-pygmentize-installed" class="anchor">Error when running latex: You must have 'pygmentize' installed </h2>

<p>This message points to the use of the minted style for typesetting verbatim
code. You need to include the <code>-shell-escape</code> command-line argument when
running <code>latex</code> or <code>pdflatex</code>:
</p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; latex -shell-escape file mydoc.tex
Terminal&gt; pdflatex -shell-escape file mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Using <code>doconce ptex2tex</code> will turn on the minted style if specified as
environment on the command line, while using <code>ptex2tex</code> requires the
preprocessor option <code>-DMINTED</code> to turn on the minted package.
When this package is included, <code>latex</code> or <code>pdflatex</code> runs the
<code>pygmentize</code> program and the <code>shell-escape</code> option is required.
</p>
<h2 id="why-are-the-latex-section-headings-smaller-than-normal" class="anchor">Why are the LaTeX section headings smaller than normal? </h2>

<p>DocOnce inserts a special command to make the headings
more compact:
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">\usepackage[compact]{titlesec}
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>as explained in the <a href="http://www.ctex.org/documents/packages/layout/titlesec.pdf" target="_self"><tt>titlesec</tt></a> package documentation.
To retrieve the standard LaTeX headings, comment out this line or remove it:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format pdflatex mydoc
Terminal&gt; doconce subst &#39;\\usepack.+\{titlesec\} &#39;&#39; mydoc.p.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>You can easily make the headings even smaller than the normal font
by replacing <code>[compact]</code> by <code>[compact,small]</code> as parameter specification
for <code>titlesec</code>.
</p>
<h2 id="i-get-latex-compilation-errors-about-shadedquoteblue-in-code-blocks-in-exercises" class="anchor">I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises </h2>

<p>When using colored boxes for code in LaTeX, a code snippet is needed
in the ordinary running text <em>before</em> code snippets inside exercises, problems,
or projects. This is a kind of bug in DocOnce that is challenging to fix.
It is usually only a problem when writing documents mainly containing
exercises, problems, or projects.
</p>
<h2 id="i-get-compilation-error-due-to-pause-commands" class="anchor">I get compilation error due to pause commands </h2>

<p>The <code>|\pause|</code> commands are intended for popping up code segments
in slides. If you compile the document without having run <code>doconce slides_beamer</code> first, standard LaTeX have a problem with <code>|\pause|</code>. The remedy is
to just remove these commands by
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce subst &#39;\|\\pause\|\n&#39; &#39;&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>before running <code>pdflatex mydoc</code>.</p>
<h2 id="the-cell-structure-in-slides-does-not-work-for-me" class="anchor">The cell structure in slides does not work for me ... </h2>

<p>Common errors:</p>

<ul>
 <li> Empty cells? No cell can be empty. Just insert a comment <code># Empty cell</code> to make it non-empty.</li>
 <li> Wrong numbering of the cells. They go 00, 01, 02, 10, 11, etc.</li>
</ul>
<p>Also, text outside the slidecell boxes <em>are not shown</em> in the slide.
Everything you want to see must be inside the cells. Use <code>&lt;linebreak&gt;</code>
repeatedly to insert vertical spacings inside cells.
</p>
<h2 id="can-i-have-latex-figures-with-shadows" class="anchor">Can I have LaTeX figures with shadows? </h2>

<p>This is easy by including the <code>fancybox</code> and <code>graphicx</code> packages
and wrapping all <code>\includegraphics</code> in a shadow box:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format pdflatex mydoc
Terminal&gt; doconce replace \
          &#39;microtype}&#39;, &#39;microtype,fancybox,graphicx}&#39; mydoc.p.tex
Terminal&gt; doconce subst &#39;(\\includegraphics\[.+\}\})&#39; \
          &#39;\\shadowbox{\g&lt;1&gt;}&#39; mydoc.p.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="how-can-i-use-my-fancy-latex-environments" class="anchor">How can I use my fancy LaTeX environments? </h2>

<p>See the section <em>Example: Defining a Theorem Environment</em> in
the DocOnce manual for how to make a custom
theorem environment also in DocOnce, without using implementations
restricted to LaTeX. See also the section <a href="#trouble:latex:envir:native">How can I make use of a native LaTeX environments (example environment for instance)?</a>.
</p>
<h2 id="the-latex-file-does-not-compile" class="anchor">The LaTeX file does not compile </h2>

<p>If the problem is undefined control sequence involving</p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">\code{...}
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>the cause is usually a verbatim inline text (in back-ticks in the
DocOnce file) spans more than one line. Make sure, in the DocOnce source,
that all inline verbatim text appears on the same line.
</p>
<h2 id="the-latex-beamer-file-does-not-compile" class="anchor">The LaTeX Beamer file does not compile </h2>

<p>Make sure you have a <code>!split</code> before every slide heading.</p>
<h2 id="inline-verbatim-gives-error" class="anchor">Inline verbatim gives error  </h2>

<p>Check if the inline verbatim contains typical LaTeX commands, e.g.,</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">some text with `\usepackage{mypack}` is difficult because
ptex2tex will replace this by \code{\usepackage{mypack}} and
then replace this by
{\fontsize{10pt}{10pt}\verb!\usepackage{mypack!}}
which is wrong because ptex2tex applies regex that don&#39;t
capture the second }
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The remedy is to place verbatim LaTeX commands in verbatim
blocks - that is safe.
</p>

<!-- Could have doconce configure file where inline verbatim is -->
<!-- configured to be \fontsize... directly, not via ptex2tex \code{}. -->
<h2 id="errors-in-figure-captions" class="anchor">Errors in figure captions </h2>

<p>Such errors typically arise from unbalanced curly braces, or dollar signs
around math, and similar LaTeX syntax errors.
</p>

<p>(Note that verbatim font is likely to cause trouble inside figure captions,
but DocOnce will automatically replace verbatim text in back-ticks by
a proper <code>texttt</code> command (since verbatim font constructions does not work
inside figure captions) and precede underscores by backslash.)
</p>
<h2 id="latex:custom:preamble" class="anchor">I want to tune the top (preamble) of the LaTeX file</h2>

<p>It is easy to provide
a customized preamble text:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format latex mydoc --latex_preamble=mytop.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>If <code>mytop.tex</code> starts with a <code>documentclass</code> specification, the whole
file becomes the complete preamble in <code>mydoc.p.tex</code>, otherwise
<code>mytop.tex</code> is added at the end of the preamble generated by
DocOnce.
</p>

<p>If you already have some preamble that defines styles etc., I recommend
to generate a <code>.tex</code> file from DocOnce and merge the preamble you have
with the one generated by DocOnce. When the <code>.tex</code> file compiles with
the desired preamble, store it in a separate file and
use it with the <code>--latex_preamble=</code> option. (This approach will for
fix the preamble for the future so updates of the DocOnce-generated
preamble will not be available for this document.)
</p>

<p>Note also that <code>doconce replace</code> and <code>doconce subst</code> can be used
after <code>doconce format</code> to tune the LaTeX code in the preamble (and
elsewhere). Such automatic edits are useful if they are few.
</p>

<p>There are comment lines with</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">--- begin preamble ---
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>and</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">--- end preamble ---
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>in the generated <code>.tex</code> file that can be
used to replace the whole preamble by another text via a script.
</p>
<h2 id="how-can-i-control-the-placement-of-figures" class="anchor">How can I control the placement of figures? </h2>

<p>In general, LaTeX will control the placement, and DocOnce applies
(for now) the <code>[t]</code> option to recommend figures to be placed at the top
of a page. This can be changed in different ways, using
techniques from the sections <a href="#latex:custom:fig:name">How do I get &quot;Figure&quot; written in another language?</a> and
<a href="#latex:custom:preamble">I want to tune the top (preamble) of the LaTeX file</a>. The <code>float</code> package and the <code>[H]</code> (&quot;here&quot;)
option for figures makes figures appear closer to their original
location:
</p>


<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">\usepackage</span><span style="color: #008000">{</span>float<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\floatplacement</span><span style="color: #008000">{</span>figure<span style="color: #008000">}{</span>H<span style="color: #008000">}</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The <code>[t]</code> option in figures must be removed:</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce replace &#39;{figure}[t]&#39; &#39;{figure}&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>
<b>Custom preamble file.</b>
Place the lines above in a file <code>mypreamble.tex</code> and ask DocOnce to add
this file to the preamble: <code>--latex_preamble=mypreamble.tex</code>.
</p>

<p>
<b>Edit the .tex file.</b>
There is a special line in the <code>.tex</code> file,
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">%% insert custom LaTeX commands...
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>which can be used
to insert desired commands, in this case by
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce subst &#39;% insert custom LaTeX.+&#39; &#39;\\usepackage{float}\n\floatplacement{figure}{H}&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Note that you in both cases
need to run the <code>doconce replace</code> above command to remove the <code>[t]</code>
option.
</p>
<h2 id="how-can-i-get-a-two-column-text" class="anchor">How can I get a two-column text? </h2>

<p>Simply add <code>twocolum</code> to the <code>\documentclass</code> command. If the <code>mydoc.tex</code>
file looks like
</p>


<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">\documentclass</span>[<span style="color: #408080; font-style: italic">%</span>
twoside,
...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>you can do a simple substitution edit</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce subst &#39;twoside,&#39; &#39;twocolumn,\ntwoside,&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="trouble:bsol:code" class="anchor">Solution heading in exercise solutions appear after the solution content</h2>

<p>Sometimes a solution environment with code</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!bsol
!bc cod
def f(x):
    return x + 2
!ec
!esol
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>leads to strange behavior with verbatim LaTeX
environment: the <b>Solution</b> heading appears after the code
in the solution. This appears to be a LaTeX problem since the
generated LaTeX code has the heading and solution content in the right
order. A working remedy is to insert a text before the code:
</p>


<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Code:
!bsol
!bc cod
def f(x):
    return x + 2
!ec
!esol
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="subexercises-subex-a-triggers-missing-number-treated-as-zero" class="anchor">Subexercises (<code>subex{a)}</code>) triggers &quot;Missing number, treated as zero&quot; </h2>

<p>Check if you have
done a <code>doconce subst</code> of <code>section</code> to <code>section*</code>. Such a substitution
will alter the newcommand <code>\subex</code> defined in the <code>.tex</code> file and insert
an erroneous <code>\@startsection*</code>, which should not contain the <code>*</code>.
Be more specific with the substitution of <code>section</code> in the <code>.tex</code> file:
</p>


<!-- code=bash (!bc shcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce subst <span style="color: #BA2121">&#39;\\section\{&#39;</span> <span style="color: #BA2121">&#39;\\section*{&#39;</span> mydoc.tex
doconce subst <span style="color: #BA2121">&#39;\\subsection\{&#39;</span> <span style="color: #BA2121">&#39;\\subsection*{&#39;</span> mydoc.tex
<span style="color: #408080; font-style: italic"># or</span>
doconce replace <span style="color: #BA2121">&#39;\section{&#39;</span> <span style="color: #BA2121">&#39;\section*{&#39;</span> mydoc.tex
doconce replace <span style="color: #BA2121">&#39;\subsection{&#39;</span> <span style="color: #BA2121">&#39;\subsection*{&#39;</span> mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="page-numbers-appear-in-both-header-and-footer" class="anchor">Page numbers appear in both header and footer </h2>

<p>If you experience page numbers in header and footer (this is a problem
if you have <code>{copyright...}</code> notifications as part of an <code>AUTHOR</code>
specification), you need to edit
the <code>.tex</code> file. Removing the page number in the footer is done by
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce subst &#39;\\fancyfoot\[LE.+&#39; &#39;&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Page numbers in headers typically arise from using a special LaTeX style
or the <code>doconce format</code> option <code>--latex_fancy_header</code> (but in the latter
case there will never be page numbers in the footer).
</p>
<h2 id="links-in-the-table-of-contents-go-to-wrong-page" class="anchor">Links in the table of contents go to wrong page </h2>

<p>This is not an uncommon problem. We <a href="http://tex.stackexchange.com/questions/23499/incorrect-bookmarks-and-page-number-in-table-of-contents" target="_self">resolved this problem</a>
for the index by adding <code>\cleardoublepage\phantomsection</code> right before
<code>\printindex</code>.  The same trick can be useful in other contexts.
</p>
<h2 id="exercises-in-the-springer_sv-style-looks-strange" class="anchor">Exercises in the <code>Springer_sv</code> style looks strange </h2>

<p>The <code>Springer_sv</code> style demands exercises to appear within the <code>prob</code>
environment, and the <code>svmono.cls</code> package typesets <code>prob</code> with small
headlines.
</p>
<h2 id="trouble:latex:styles" class="anchor">How to typeset papers with specified style files?</h2>

<p>DocOnce has the <code>--latex_style=</code> option for specifying a few LaTeX
styles for papers and books. This option mostly support book styles,
since traditionally, paper styles in various journals often have
special commands for authors, institutions, summary, and so on that are
cumbersome to support through DocOnce. It was often easier to develop the
paper in DocOnce and at submission time, manually edit the LaTeX output
to fit a particular journal style. (SIAM and Elsevier journal have had
direct support in DocOnce, though.)
</p>

<p>With open access publishing it makes more sense to maintain a paper
in DocOnce and publish derived and future versions in various electronic
formats. How to then, at some stage in the process, make a special
LaTeX version according to a journal's style?
</p>

<p>The simplest approach is probably to develop a compilation script that
performs a set of edits through <code>doconce replace</code> and <code>doconce subst</code>
commands that turn standard DocOnce LaTeX output into the text required
for a special journal style. Usually, such edits are about adding
packages, maybe some special commands, and replacing perhaps title,
author, date, and summary commands. Below is a sketch how that can be
done for <a href="https://www.plos.org/" target="_self">PLOS journals</a>. These journals
offer a <a href="http://journals.plos.org/plosone/s/latex" target="_self">LaTeX template</a>
demonstrating appropriate commands. Some text is needed in the preamble,
and we can insert that text at the place marked for user-specific
extensions (&quot;insert custom LaTeX commands...&quot;).
</p>


<!-- code=bash (!bc shpro) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #408080; font-style: italic">#!/bin/bash</span>
<span style="color: #19177C">name</span><span style="color: #666666">=</span>mydoc

<span style="color: #408080; font-style: italic"># Compile mydoc.do.txt to latex output mydoc.tex</span>
doconce format pdflatex <span style="color: #19177C">$name</span> --latex_bibstyle<span style="color: #666666">=</span>plos2015 --latex_code_style<span style="color: #666666">=</span>vrb

<span style="color: #408080; font-style: italic"># Edit mydoc.tex file</span>
doconce subst <span style="color: #BA2121">&#39;% insert custom LaTeX commands...&#39;</span> <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">\usepackage[aboveskip=1pt,labelfont=bf,labelsep=period,justification=raggedright,singlelinecheck=off]{caption}</span>
<span style="color: #BA2121">% Text layout</span>
<span style="color: #BA2121">\raggedright</span>
<span style="color: #BA2121">\setlength{\parindent}{0.5cm}</span>
<span style="color: #BA2121">\textwidth 5.25in</span>
<span style="color: #BA2121">\textheight 8.75in</span>
<span style="color: #BA2121">% Remove brackets from numbering in List of References</span>
<span style="color: #BA2121">\makeatletter</span>
<span style="color: #BA2121">\renewcommand{\@biblabel}[1]{\quad#1.}</span>
<span style="color: #BA2121">\makeatother</span>
<span style="color: #BA2121">\usepackage[right]{lineno}</span>
<span style="color: #BA2121">\usepackage[top=0.85in,left=2.75in,footskip=0.75in]{geometry}&#39;</span> <span style="color: #19177C">$name</span>.tex

<span style="color: #408080; font-style: italic"># Compile the usual way</span>
pdflatex <span style="color: #19177C">$name</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>This example hopefully gives some ideas how to create specialized
LaTeX output from DocOnce documents. If the journal style employs
special LaTeX environments, see the section <a href="#trouble:latex:envir:native">How can I make use of a native LaTeX environments (example environment for instance)?</a>
how to utilize these from DocOnce.
</p>
<h2 id="i-want-exercises-to-have-small-headings-not-subsections" class="anchor">I want exercises to have small headings (not subsections) </h2>

<p>By default, DocOnce typesets exercises as subsections in LaTeX.
However, the heading is defined by a newcommand <code>exercisesection</code>
(right after <code>\begin{document}</code>) so it is easy to switch to any tailored
heading. For example, we can use a paragraph heading:
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce subst \
          &#39;\{exercisesection\}\[1\]\{\\subsection\*&#39; \
	  &#39;{exercisesection}[1]{\paragraph&#39; mydoc.tex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>This typesetting is perhaps more suitable if you have exercises scattered
around in the document rather than grouped in sections.
</p>
<h1 id="gwiki" class="anchor">gwiki </h1>
<h2 id="strange-nested-lists-in-gwiki" class="anchor">Strange nested lists in gwiki </h2>

<p>DocOnce cannot handle nested lists correctly in the gwiki format.
Use nonnested lists or edit the <code>.gwiki</code> file directly.
</p>
<h2 id="lists-in-gwiki-look-ugly-in-the-gwiki-source" class="anchor">Lists in gwiki look ugly in the gwiki source </h2>

<p>Because the Google Code wiki format requires all text of a list item to
be on one line, DocOnce simply concatenates lines in that format,
and because of the indentation in the original DocOnce text, the gwiki
output looks somewhat ugly. The good thing is that this gwiki source
is seldom to be looked at - it is the DocOnce source that one edits
further.
</p>
<h1 id="html" class="anchor">HTML </h1>
<h2 id="how-can-i-add-a-search-facility-to-an-html-document" class="anchor">How can I add a search facility to an HTML document? </h2>

<p>There are many services for this. <a href="http://www.freefind.com/" target="_self">FreeFind</a>
is an easy-to-use service that gives you some HTML code to include
in the document, typically inside a <code># #if FORMAT == &quot;html&quot;</code> and <code># #endif</code>
block.
</p>
<h2 id="mathjax-formulas-are-not-properly-rendered" class="anchor">MathJax formulas are not properly rendered </h2>

<p>Here are some common problems:</p>

<ul>
 <li> Two equations cannot have identical label (this error often arises from copying and pasting equations).</li>
 <li> <code>[</code> and <code>]</code> brackets must sometimes be replaced by <code>\lbrack</code> and <code>\rbrack</code>.</li>
 <li> Inline mathematics cannot have a space after the first dollar sign.</li>
 <li> Equation environments must be <code>\[ ...\]</code>, <code>equation</code>, <code>equation*</code>, <code>align</code>, or <code>align*</code> - avoid all other types of environments (<code>split</code>, <code>alignat</code>, and whatever).</li>
 <li> Errors in formulas that LaTeX accepts may still lead to unrendered formulas in MathJax.</li>
</ul>
<p>If the corresponding LaTeX-based PDF output has the correct formula,
one must try to rewrite the LaTeX mathematics so MathJax accepts
it. MathJax can only handle a subset of what is legal mathematics in
LaTeX.
</p>

<p>Even if HTML is your target output format, it is strongly recommended to
develop the mathematics with <code>pdflatex</code> as output to debug formulas
before you try to render them in MathJax.
</p>
<h2 id="how-can-i-change-the-layout-of-the-html-page" class="anchor">How can I change the layout of the HTML page? </h2>
<h3 id="autoedits-of-the-html-file" class="anchor">Autoedits of the <code>.html</code> file </h3>

<p>The easiest way is to edit the HTML style or the HTML code directly.
However, those edits are overwritten the next time you compile the
DocOnce document to HTML. The edits should therefore be automated
using the <code>doconce subst</code> (for regular expression editing) or <code>doconce replace</code>
(for plain text substitution editing) commands in the file where
you run <code>doconce format html mydoc</code>. For example, say you want narrower
gray admonition boxes with a much thicker boundary. The <code>.alert</code>
style must then be changed, more precisely the <code>border</code> and the <code>width</code>
specification. You can then add these statements after running <code>doconce format html ...</code>:
</p>


<!-- code=bash (!bc shcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce replace <span style="color: #BA2121">&#39;border:1px&#39;</span> <span style="color: #BA2121">&#39;border:11px&#39;</span> mydoc.html
doconce replace <span style="color: #BA2121">&#39;width: 75%;&#39;</span> <span style="color: #BA2121">&#39;width: 35%&#39;</span> mydoc.html
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h3 id="specify-a-css-file" class="anchor">Specify a <code>.css</code> file </h3>

<p>Another way to control the layout is to copy the style in the HTML
file into a <code>.css</code> file, edit that file as you like, and provide the
file as part of the compilation using the <code>--css=mystyle.css</code>
flag. For example, say you want to transform the headings to something
attractive for young girls (white text on pink background). A <code>.css</code>
file can be written from scratch, but one can also generate one from
one of the built-in DocOnce HTML styles by running
</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format html mydoc --css=pink.css \
          --html_style=blueish
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The result is a new file <code>pink.css</code> containing the specification
of the <code>blueish</code> style. One can now change this <code>pink.css</code> file
to <code>h1</code> headings with pink background and white text, <code>h2</code> and <code>h3</code>
headings with pink text, and pink color for visited or hovered hyperlinks:
</p>


<!-- code=html (!bc htmlcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">h1 {
    font-family:&quot;comic sans ms&quot;;
    width: 900px;
    font-size: 48px;
    text-align: center;
    background: #EA00FF; /* pink */
    border-style: solid;
    border-width: 5px;
    border-color: #FFFFFF;
    padding: 20px;
    margin: 20px;
    margin-left: 10px;
    color: white
}
h2, h3 {
    font-family:&quot;comic sans ms&quot;;
    font-size: 18px;
    color: #EA00FF;
}
h3 { font-size: 24px; }
a { color: #1e36ce; text-decoration:none; }
a:hover, a:visited { color: #EA00FF; /* pink */ }
...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The rest of the file can remain unaltered. Running</p>


<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">Terminal&gt; doconce format html mydoc --css=pink.css \
          --html_style=blueish
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>will now render <code>mydoc.html</code> with pink headings and visited links.</p>
<h3 id="specify-a-template" class="anchor">Specify a template </h3>

<p>The standard of way of completely controlling the HTML format is to
use an HTML template. The DocOnce source is then the body of text
(leave out <code>TITLE:</code> to get HTML without a header and footer). The
<code>--html_template=filename</code> command-line option will then embed the
DocOnce text in the specified template file, where you can use style
sheets and desired constructs in the header and footer.  The template
can have &quot;slots&quot; for a title (<code>%(title)s</code>), a date (<code>%(date)s</code>), and
the main body of text (<code>%(main)s</code>).  For typesetting code, <code>pygments</code>
is used (if installed) and can be turned off by <code>--no_pygments_html</code>
(leaving code in gray boxes).
</p>

<p>The easiest way is to get fancy layouts in HTML is to
use the <code>sphinx</code> format and one its many themes.
</p>
<h2 id="why-do-figures-look-ugly-when-using-html-templates" class="anchor">Why do figures look ugly when using HTML templates? </h2>

<p>The HTML header that DocOnce generates contain special styles for
figure captions and the horizontal rule above figures. When using
templates these styles are not defined, resulting in a rule that
spans the width and a centered caption. Changing the appearance
of the rule and caption can either be done by inserting styles or
simply by automatic editing of the HTML code in a little shell script:
</p>


<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <blockquote>
<div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce replace &#39;&lt;p class=&quot;caption&quot;&gt;&#39; \
 &#39;&lt;p style=&quot;width: 50%; font-style: italic; color: blue&quot;&gt;&#39; mydoc.html
doconce replace &#39;&lt;hr class=&quot;figure&quot;&gt;&#39; \
 &#39;&lt;hr style=&quot;width:60%, font-style: normal&quot;&gt;&#39; mydoc.html
</pre>
</div>
</blockquote>      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h1 id="reveal-deck-html5-slides" class="anchor">reveal/deck HTML5 slides </h1>
<h2 id="python-online-tutor-code-does-not-work-in-reveal" class="anchor">Python Online Tutor code does not work in reveal </h2>

<p>Use the Chrome browser (the code does not work in Firefox in combination
with reveal HTML5, but it works in plain HTML).
</p>
<h2 id="reveal-slides-are-stacked-on-top-of-each-other" class="anchor">Reveal slides are stacked on top of each other </h2>

<p>This problem can be caused by having a <code>!bblock</code> environment crossing two
slides because of a forgotten <code>!eblock</code> on the first slide.
To locate the problematic slides, copy chunks of slides to a new file,
compile, and inspect. This will reveal the problematic chunk.
</p>
<h2 id="reveal-slides-are-moving-steadily-to-the-left" class="anchor">Reveal slides are moving steadily to the left </h2>

<p>This seems to be a problem when one has used the mouse to scroll down
on a slide and continue to use the right arrow for moving to the
next slide. Click on the arrow in the slide instead of using the arrow key.
</p>
<h2 id="youtube-movies-do-not-work" class="anchor">YouTube movies do not work </h2>

<p>They do not work in reveal or deck unless the Chrome browser is used.
Usually the HTML5 slides work best in Firefox.
</p>
<h2 id="online-python-tutor-does-not-work" class="anchor">Online Python Tutor does not work </h2>

<ul>
 <li> Check that there are no syntax errors in the code by running the code as an ordinary file. Syntax errors lead to empty space and no tutor in HTML output.</li>
 <li> Seems to be a problem with reveal slides. The <em>Forward</em> button is not clickable.</li>
</ul>
<!-- ------------------- end of main content --------------- -->
</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<!-- Bootstrap footer
<footer>
<a href="https://..."><img width="250" align=right src="https://..."></a>
</footer>
-->
<center style="font-size:80%">
<!-- copyright --> &copy; 2021, Hans Petter Langtangen
</center>
</body>
</html>
    


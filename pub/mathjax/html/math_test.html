
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How various formats can deal with LaTeX math</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>

        <script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
        <script src="http://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

        <script>sagecell.makeSagecell({inputLocation: ".sage"});</script>

        <style type="text/css">
                .sagecell .CodeMirror-scroll {
                        overflow-y: hidden;
                        overflow-x: auto;
                }
                .sagecell .CodeMirror {
                        height: auto;
                }
        </style>

    
    <link rel="top" title="How various formats can deal with LaTeX math" href="index.html" />
    <link rel="prev" title="How various formats can deal with LaTeX math" href="index.html" />
 
  
       <style type="text/css">
         div.admonition {
           background-color: whiteSmoke;
           border: 1px solid #bababa;
         }
       </style>
      </head>
    
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="How various formats can deal with LaTeX math"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">How various formats can deal with LaTeX math</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-various-formats-can-deal-with-latex-math">
<h1>How various formats can deal with LaTeX math<a class="headerlink" href="#how-various-formats-can-deal-with-latex-math" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Hans Petter Langtangen</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">May 29, 2016</td>
</tr>
</tbody>
</table>
<p><em>Summary.</em> The purpose of this document is to test LaTeX math in DocOnce with
various output formats.  Most LaTeX math constructions are renedered
correctly by MathJax in plain HTML, but some combinations of
constructions may fail.  Unfortunately, only a subset of what works in
html MathJax also works in sphinx MathJax. The same is true for
markdown MathJax expresions (e.g., Jupyter notebooks).  Tests and
examples are provided to illustrate what may go wrong.</p>
<p>The recommendation for writing math that translates to MathJax in
html, sphinx, and markdown is to stick to the environments <code class="docutils literal"><span class="pre">\[</span>
<span class="pre">...</span> <span class="pre">\]</span></code>, <code class="docutils literal"><span class="pre">equation</span></code>, <code class="docutils literal"><span class="pre">equation*</span></code>, <code class="docutils literal"><span class="pre">align</span></code>, <code class="docutils literal"><span class="pre">align*</span></code>, <code class="docutils literal"><span class="pre">alignat</span></code>, and
<code class="docutils literal"><span class="pre">alignat*</span></code> only. Test the math with sphinx output; if it works in that
format, it should work elsewhere too.</p>
<p>The current version of the document is translated from DocOnce source
to the format <strong>sphinx</strong>.</p>
<div class="section" id="test-of-equation-environments">
<h2>Test of equation environments<a class="headerlink" href="#test-of-equation-environments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="test-1-inline-math">
<h3>Test 1: Inline math<a class="headerlink" href="#test-1-inline-math" title="Permalink to this headline">¶</a></h3>
<p>We can get an inline equation
<code class="docutils literal"><span class="pre">$u(t)=e^{-at}$</span></code> rendered as <span class="math">\(u(t)=e^{-at}\)</span>.</p>
</div>
<div class="section" id="test-2-a-single-equation-with-label">
<h3>Test 2: A single equation with label<a class="headerlink" href="#test-2-a-single-equation-with-label" title="Permalink to this headline">¶</a></h3>
<p>An equation with number,</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>equation<span class="nb">}</span> u(t)=e<span class="nb">^{</span>-at<span class="nb">}</span> label<span class="nb">{</span>eq1a<span class="nb">}</span><span class="k">\end</span><span class="nb">{</span>equation<span class="nb">}</span>
!et
</pre></div>
</div>
<p>looks like</p>
<div class="math" id="equation-eq1a">
<span class="eqno">(1)</span>\[      u(t)=e^{-at}\]</div>
<p>Maybe this multi-line version is what we actually prefer to write:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>equation<span class="nb">}</span>
u(t)=e<span class="nb">^{</span>-at<span class="nb">}</span>
label<span class="nb">{</span>eq1b<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>equation<span class="nb">}</span>
!et
</pre></div>
</div>
<p>The result is the same:</p>
<div class="math" id="equation-eq1b">
<span class="eqno">(2)</span>\[     u(t)=e^{-at}\]</div>
<p>We can refer to this equation through its label <code class="docutils literal"><span class="pre">eq1b</span></code>: <a href="#equation-eq1b">(2)</a>.</p>
</div>
<div class="section" id="test-3-multiple-aligned-equations-without-label-and-number">
<h3>Test 3: Multiple, aligned equations without label and number<a class="headerlink" href="#test-3-multiple-aligned-equations-without-label-and-number" title="Permalink to this headline">¶</a></h3>
<p>MathJax has historically had some problems with rendering many LaTeX
math environments, but the <code class="docutils literal"><span class="pre">align*</span></code> and <code class="docutils literal"><span class="pre">align</span></code> environments have
always worked.</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align*<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=e<span class="nb">^{</span>-at<span class="nb">}</span><span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>= <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align*<span class="nb">}</span>
!et
</pre></div>
</div>
<p>Result:</p>
<div class="math">
\[\begin{split}\begin{align*}
u(t)&amp;=e^{-at}\\
v(t) - 1 &amp;= \frac{du}{dt}
\end{align*}\end{split}\]</div>
</div>
<div class="section" id="test-4-multiple-aligned-equations-with-label">
<h3>Test 4: Multiple, aligned equations with label<a class="headerlink" href="#test-4-multiple-aligned-equations-with-label" title="Permalink to this headline">¶</a></h3>
<p>Here, we use <code class="docutils literal"><span class="pre">align</span></code> with user-prescribed labels:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=e<span class="nb">^{</span>-at<span class="nb">}</span>
label<span class="nb">{</span>eq2b<span class="nb">}</span><span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>= <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
label<span class="nb">{</span>eq3b<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align<span class="nb">}</span>
!et
</pre></div>
</div>
<p>Result:</p>
<div class="math" id="equation-eq2b">
<span class="eqno">(3)</span>\[     u(t)=e^{-at}\]</div>
<div class="math" id="equation-eq3b">
<span class="eqno">(4)</span>\[     v(t) - 1 = \frac{du}{dt}\]</div>
<p>We can refer to the last equations as the system <a href="#equation-eq2b">(3)</a>-<a href="#equation-eq3b">(4)</a>.</p>
<div class="admonition-note-align-alignat-environments-with-labels-are-anti-aligned-in-sphinx admonition">
<p class="first admonition-title">Note: align/alignat environments with labels are anti-aligned in sphinx</p>
<p>Actually, <em>sphinx does not support the align environment with labels</em>,
such as we write above,
but DocOnce splits in this case the equations into separate, single equations
with labels. Hence the user can write one code with align and labels
and have it automatically
to work in latex, html, sphinx, notebooks, and other formats.
The generated sphinx code in the present case is</p>
<div class="last highlight-rst"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span>
   <span class="nc">:label:</span> <span class="nf">eq2b</span>

        u(t)=e^{-at}


<span class="p">..</span> <span class="ow">math</span><span class="p">::</span>
   <span class="nc">:label:</span> <span class="nf">eq3b</span>

        v(t) - 1 = \frac{du}{dt}
</pre></div>
</div>
</div>
<p>If DocOnce had not rewritten the equation it would be rendered in
sphinx as nicely aligned equations without numbers (i.e., as if
we had used the <code class="docutils literal"><span class="pre">align*</span></code> environment):</p>
<div class="math">
\[\begin{split}\begin{align}
u(t)&amp;=e^{-at}
\\\
v(t) - 1 &amp;= \frac{du}{dt}
\
\end{align}\end{split}\]</div>
</div>
<div class="section" id="test-5-multiple-aligned-equations-without-label">
<h3>Test 5: Multiple, aligned equations without label<a class="headerlink" href="#test-5-multiple-aligned-equations-without-label" title="Permalink to this headline">¶</a></h3>
<p>In LaTeX, equations within an <code class="docutils literal"><span class="pre">align</span></code> environment is automatically
given numbers.  To ensure that an html document with MathJax gets the
same equation numbers as its latex/pdflatex companion, DocOnce
generates labels in equations where there is no label prescribed. For
example,</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=e<span class="nb">^{</span>-at<span class="nb">}</span>
<span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>= <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align<span class="nb">}</span>
!et
</pre></div>
</div>
<p>is edited to something like</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=e<span class="nb">^{</span>-at<span class="nb">}</span>
label<span class="nb">{_</span>auto5<span class="nb">}</span><span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>= <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
label<span class="nb">{_</span>auto6<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align<span class="nb">}</span>
!et
</pre></div>
</div>
<p>and the output gets the two equation numbered.
Note that in sphinx the alignment is removed and separate <code class="docutils literal"><span class="pre">equation</span></code>
environments are used to get numbered equations in equation systems, cf. the
box above.</p>
<div class="math" id="equation-_auto1">
<span class="eqno">(5)</span>\[     u(t)=e^{-at}\]</div>
<div class="math" id="equation-_auto2">
<span class="eqno">(6)</span>\[     v(t) - 1 = \frac{du}{dt}\]</div>
</div>
<div class="section" id="test-6-multiple-aligned-equations-with-multiple-alignments">
<h3>Test 6: Multiple, aligned equations with multiple alignments<a class="headerlink" href="#test-6-multiple-aligned-equations-with-multiple-alignments" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">align</span></code> environment can be used with two <code class="docutils literal"><span class="pre">&amp;</span></code> alignment characters, e.g.,</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align<span class="nb">}</span>
<span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span> u<span class="nb">}{</span><span class="k">\partial</span> t<span class="nb">}</span> <span class="nb">&amp;</span>= <span class="k">\nabla</span><span class="nb">^</span>2 u, <span class="nb">&amp;</span> x<span class="k">\in</span> (0,L),
<span class="k">\ </span>t<span class="k">\in</span> (0,T]<span class="k">\\</span>
u(0,t) <span class="nb">&amp;</span>= u<span class="nb">_</span>0(x), <span class="nb">&amp;</span> x<span class="k">\in</span> [0,L]
<span class="k">\end</span><span class="nb">{</span>align<span class="nb">}</span>
!et
</pre></div>
</div>
<p>The result in sphinx becomes</p>
<div class="math" id="equation-_auto3">
<span class="eqno">(7)</span>\[     \frac{\partial u}{\partial t} = \nabla^2 u,  x\in (0,L),
     \ t\in (0,T]\]</div>
<div class="math" id="equation-_auto4">
<span class="eqno">(8)</span>\[     u(0,t) = u_0(x),  x\in [0,L]\]</div>
<p>In sphinx, all alignments are removed, so this double use of <code class="docutils literal"><span class="pre">&amp;</span></code>
results in ugly typesetting!</p>
<p>A better solution is usually to use an <code class="docutils literal"><span class="pre">alignat</span></code> environment:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>alignat<span class="nb">}{</span>2<span class="nb">}</span>
<span class="k">\frac</span><span class="nb">{</span><span class="k">\partial</span> u<span class="nb">}{</span><span class="k">\partial</span> t<span class="nb">}</span> <span class="nb">&amp;</span>= <span class="k">\nabla</span><span class="nb">^</span>2 u, <span class="nb">&amp;</span> x<span class="k">\in</span> (0,L),
<span class="k">\ </span>t<span class="k">\in</span> (0,T]<span class="k">\\</span>
u(0,t) <span class="nb">&amp;</span>= u<span class="nb">_</span>0(x), <span class="nb">&amp;</span> x<span class="k">\in</span> [0,L]
<span class="k">\end</span><span class="nb">{</span>alignat<span class="nb">}</span>
!et
</pre></div>
</div>
<p>with the rendered result</p>
<div class="math" id="equation-_auto5">
<span class="eqno">(9)</span>\[     \frac{\partial u}{\partial t} = \nabla^2 u,  x\in (0,L),
     \ t\in (0,T]\]</div>
<div class="math" id="equation-_auto6">
<span class="eqno">(10)</span>\[     u(0,t) = u_0(x),  x\in [0,L]\]</div>
<div class="admonition-align-alignat-environments-with-equation-numbers-are-anti-aligned admonition">
<p class="first admonition-title">align/alignat environments with equation numbers are anti-aligned</p>
<p class="last">In the <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">ipynb</span></code>, and <code class="docutils literal"><span class="pre">pandoc</span></code> output formats, DocOnce rewrites
the equations in an <code class="docutils literal"><span class="pre">alignat</span></code> environment as individual equations in
<code class="docutils literal"><span class="pre">equation</span></code> environments (or more precisely, <code class="docutils literal"><span class="pre">sphinx</span></code> can work with
<code class="docutils literal"><span class="pre">alignat*</span></code> so only numbered <code class="docutils literal"><span class="pre">alignat</span></code> equations get rewritten as individual
equations). If the alignment is somewhat important, try the best with a
manual rewrite in terms of separate <code class="docutils literal"><span class="pre">equation</span></code> environments, and stick to
<code class="docutils literal"><span class="pre">align*</span></code> and <code class="docutils literal"><span class="pre">alignat*</span></code> in <code class="docutils literal"><span class="pre">sphinx</span></code>.</p>
</div>
<p>With <code class="docutils literal"><span class="pre">alignat*</span></code> in sphinx, the equations above are typeset nicely as</p>
<div class="math">
\[\begin{split}\begin{alignat*}{2}
\frac{\partial u}{\partial t} &amp;= \nabla^2 u, &amp; x\in (0,L),
\ t\in (0,T]\\
u(0,t) &amp;= u_0(x), &amp; x\in [0,L]
\end{alignat*}\end{split}\]</div>
<p>Note that if DocOnce had not rewritten of the above equations, they would be
rendered similarly in sphinx as</p>
<div class="math">
\[\begin{split}\begin{alignat}{2}
\frac{\partial u}{\partial t} &amp;= \nabla^2 u, &amp; x\in (0,L),
\ t\in (0,T]\\
u(0,t) &amp;= u_0(x), &amp; x\in [0,L]
\end{alignat}\end{split}\]</div>
<p>That is, the equation numbers are gone.</p>
</div>
<div class="section" id="test-7-multiple-aligned-eqnarray-equations-without-label">
<h3>Test 7: Multiple, aligned eqnarray equations without label<a class="headerlink" href="#test-7-multiple-aligned-eqnarray-equations-without-label" title="Permalink to this headline">¶</a></h3>
<p>Let us try the old <code class="docutils literal"><span class="pre">eqnarray*</span></code> environment.</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>eqnarray*<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=<span class="nb">&amp;</span> e<span class="nb">^{</span>-at<span class="nb">}</span><span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>=<span class="nb">&amp;</span> <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>eqnarray*<span class="nb">}</span>
!et
</pre></div>
</div>
<p>which results in</p>
<div class="math">
\[\begin{split}\begin{eqnarray*}
u(t) &amp;=  e^{-at}\\
v(t) - 1  &amp;=  \frac{du}{dt}
\end{eqnarray*}\end{split}\]</div>
</div>
<div class="section" id="test-8-multiple-eqnarrayed-equations-with-label">
<h3>Test 8: Multiple, eqnarrayed equations with label<a class="headerlink" href="#test-8-multiple-eqnarrayed-equations-with-label" title="Permalink to this headline">¶</a></h3>
<p>Here we use <code class="docutils literal"><span class="pre">eqnarray</span></code> with labels:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>eqnarray<span class="nb">}</span>
u(t)<span class="nb">&amp;</span>=<span class="nb">&amp;</span> e<span class="nb">^{</span>-at<span class="nb">}</span>
label<span class="nb">{</span>eq2c<span class="nb">}</span><span class="k">\\</span>
v(t) - 1 <span class="nb">&amp;</span>=<span class="nb">&amp;</span> <span class="k">\frac</span><span class="nb">{</span>du<span class="nb">}{</span>dt<span class="nb">}</span>
label<span class="nb">{</span>eq3c<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>eqnarray<span class="nb">}</span>
!et
</pre></div>
</div>
<p>which results in</p>
<div class="math">
\[\begin{split}\begin{eqnarray}
u(t) &amp;=  e^{-at} \\
v(t) - 1  &amp;=  \frac{du}{dt}
\end{eqnarray}\end{split}\]</div>
<p>Can we refer to the last equations as the system <a href="#equation-eq2c">(?)</a>-<a href="#equation-eq3c">(?)</a>
in the sphinx format?
No, unfortunately not. Sphinx cannot deal with equation numbers in
<code class="docutils literal"><span class="pre">eqnarray</span></code> environments and typeset them as if they were <code class="docutils literal"><span class="pre">eqnarray*</span></code>.
But MathJax supports <code class="docutils literal"><span class="pre">eqnarray</span></code> with labels.
The rule of thumb is to use <code class="docutils literal"><span class="pre">align</span></code> and not <code class="docutils literal"><span class="pre">eqnarray</span></code>!</p>
</div>
<div class="section" id="test-9-the-multiline-environment-with-label-and-number">
<h3>Test 9: The <code class="docutils literal"><span class="pre">multiline</span></code> environment with label and number<a class="headerlink" href="#test-9-the-multiline-environment-with-label-and-number" title="Permalink to this headline">¶</a></h3>
<p>The LaTeX code</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>multline<span class="nb">}</span>
<span class="k">\int</span><span class="nb">_</span>a<span class="nb">^</span>b f(x)dx = <span class="k">\sum</span><span class="nb">_{</span>j=0<span class="nb">}^{</span>n<span class="nb">}</span> <span class="k">\frac</span><span class="nb">{</span>1<span class="nb">}{</span>2<span class="nb">}</span> h(f(a+jh) +
f(a+(j+1)h)) <span class="k">\\</span>
=<span class="k">\frac</span><span class="nb">{</span>h<span class="nb">}{</span>2<span class="nb">}</span>f(a) + <span class="k">\frac</span><span class="nb">{</span>h<span class="nb">}{</span>2<span class="nb">}</span>f(b) + <span class="k">\sum</span><span class="nb">_{</span>j=1<span class="nb">}^</span>n f(a+jh)
label<span class="nb">{</span>multiline:eq1<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>multline<span class="nb">}</span>
!et
</pre></div>
</div>
<p>gets rendered as</p>
<div class="math" id="equation-multiline:eq1">
<span class="eqno">(11)</span>\[\begin{split}     \int_a^b f(x)dx = \sum_{j=0}^{n} \frac{1}{2} h(f(a+jh) +
     f(a+(j+1)h)) \\
     =\frac{h}{2}f(a) + \frac{h}{2}f(b) + \sum_{j=1}^n f(a+jh)\end{split}\]</div>
<p>and we can hopefully refer to the Trapezoidal rule
as the formula <a href="#equation-multiline:eq1">(11)</a>.</p>
<p>This equation will not render in sphinx unless we remove the <code class="docutils literal"><span class="pre">multiline</span></code>
environment, which means that it was typeset here without any multiline
information.
The best cross-format solution is to use <code class="docutils literal"><span class="pre">align</span></code> instead of <code class="docutils literal"><span class="pre">multiline</span></code>
with <code class="docutils literal"><span class="pre">\nonumber</span></code> in the first equation!</p>
</div>
<div class="section" id="test-10-splitting-equations-using-a-split-environment">
<h3>Test 10: Splitting equations using a split environment<a class="headerlink" href="#test-10-splitting-equations-using-a-split-environment" title="Permalink to this headline">¶</a></h3>
<p>Although <code class="docutils literal"><span class="pre">align</span></code> can be used to split too long equations, a more obvious
command is <code class="docutils literal"><span class="pre">split</span></code>:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>equation<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>split<span class="nb">}</span>
<span class="k">\int</span><span class="nb">_</span>a<span class="nb">^</span>b f(x)dx = <span class="k">\sum</span><span class="nb">_{</span>j=0<span class="nb">}^{</span>n<span class="nb">}</span> <span class="k">\frac</span><span class="nb">{</span>1<span class="nb">}{</span>2<span class="nb">}</span> h(f(a+jh) +
f(a+(j+1)h)) <span class="k">\\</span>
=<span class="k">\frac</span><span class="nb">{</span>h<span class="nb">}{</span>2<span class="nb">}</span>f(a) + <span class="k">\frac</span><span class="nb">{</span>h<span class="nb">}{</span>2<span class="nb">}</span>f(b) + <span class="k">\sum</span><span class="nb">_{</span>j=1<span class="nb">}^</span>n f(a+jh)
<span class="k">\end</span><span class="nb">{</span>split<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>equation<span class="nb">}</span>
!et
</pre></div>
</div>
<p>The result becomes</p>
<div class="math" id="equation-_auto7">
<span class="eqno">(12)</span>\[\begin{split}     \begin{split}
     \int_a^b f(x)dx = \sum_{j=0}^{n} \frac{1}{2} h(f(a+jh) +
     f(a+(j+1)h)) \\
     =\frac{h}{2}f(a) + \frac{h}{2}f(b) + \sum_{j=1}^n f(a+jh)
     \end{split}\end{split}\]</div>
</div>
<div class="section" id="test-11-newcommands-and-boldface-bm-vs-pmb">
<h3>Test 11: Newcommands and boldface bm vs pmb<a class="headerlink" href="#test-11-newcommands-and-boldface-bm-vs-pmb" title="Permalink to this headline">¶</a></h3>
<p>First we use the plain old pmb package for bold math. The formula</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="sb">\[</span><span class="nb"> </span><span class="nv">\frac</span><span class="nb">{</span><span class="nv">\partial\u</span><span class="nb">}{</span><span class="nv">\partial</span><span class="nb"> t} </span><span class="o">+</span><span class="nb"></span>
<span class="nv">\u\cdot\nabla\u</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\nu\nabla</span><span class="nb">^</span><span class="m">2</span><span class="nv">\u</span><span class="nb"> </span><span class="o">-</span><span class="nb"></span>
<span class="nv">\frac</span><span class="nb">{</span><span class="m">1</span><span class="nb">}{</span><span class="nv">\varrho</span><span class="nb">}</span><span class="nv">\nabla</span><span class="nb"> p,</span><span class="s">\]</span>
!et
</pre></div>
</div>
<p>and the inline expression <code class="docutils literal"><span class="pre">$\nabla\pmb{u}</span> <span class="pre">(\pmb{x})\cdot\pmb{n}$</span></code>
(with suitable newcommands using pmb)
get rendered as</p>
<div class="math">
\[\frac{\partial\pmb{u}}{\partial t} +
\pmb{u}\cdot\nabla\pmb{u} = \nu\nabla^2\pmb{u} -
\frac{1}{\varrho}\nabla p,\]</div>
<p>and <span class="math">\(\nabla\pmb{u} (\pmb{x})\cdot\pmb{n}\)</span>.
DocOnce replaces newcommands by the actual latex code when requesting
the sphinx output format.</p>
<p>Somewhat nicer fonts may appear with the more modern <code class="docutils literal"><span class="pre">\bm</span></code> command:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="sb">\[</span><span class="nb"> </span><span class="nv">\frac</span><span class="nb">{</span><span class="nv">\partial\ubm</span><span class="nb">}{</span><span class="nv">\partial</span><span class="nb"> t} </span><span class="o">+</span><span class="nb"></span>
<span class="nv">\ubm\cdot\nabla\ubm</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\nu\nabla</span><span class="nb">^</span><span class="m">2</span><span class="nv">\ubm</span><span class="nb"> </span><span class="o">-</span><span class="nb"></span>
<span class="nv">\frac</span><span class="nb">{</span><span class="m">1</span><span class="nb">}{</span><span class="nv">\varrho</span><span class="nb">}</span><span class="nv">\nabla</span><span class="nb"> p,</span><span class="s">\]</span>
!et
</pre></div>
</div>
<p>(backslash <code class="docutils literal"><span class="pre">ubm</span></code> is a newcommand for bold math <span class="math">\(u\)</span>), for which we get</p>
<div class="math">
\[\frac{\partial\boldsymbol{u}}{\partial t} +
\boldsymbol{u}\cdot\nabla\boldsymbol{u} = \nu\nabla^2\boldsymbol{u} -
\frac{1}{\varrho}\nabla p.\]</div>
<p>Moreover,</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$\nabla\boldsymbol{u}(\boldsymbol{x})\cdot\boldsymbol{n}$
</pre></div>
</div>
<p>becomes <span class="math">\(\nabla\boldsymbol{u}(\boldsymbol{x})\cdot\boldsymbol{n}\)</span>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note: for the sphinx format, <code class="docutils literal"><span class="pre">\bm</span></code> was substituted by DocOnce
to <code class="docutils literal"><span class="pre">\boldsymbol</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="problematic-equations">
<h2>Problematic equations<a class="headerlink" href="#problematic-equations" title="Permalink to this headline">¶</a></h2>
<p>Finally, we collect some problematic formulas in MathJax. They all work
fine in LaTeX. Most of them look fine in html too, but some fail in
sphinx, ipynb, or markdown.</p>
<div class="section" id="colored-terms-in-equations">
<h3>Colored terms in equations<a class="headerlink" href="#colored-terms-in-equations" title="Permalink to this headline">¶</a></h3>
<p>The LaTeX code</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="sb">\[</span><span class="nb"> {</span><span class="nv">\color</span><span class="nb">{blue}</span><span class="nv">\frac</span><span class="nb">{</span><span class="nv">\partial\u</span><span class="nb">}{</span><span class="nv">\partial</span><span class="nb"> t}} </span><span class="o">+</span><span class="nb"></span>
<span class="nv">\nabla\cdot\nabla\u</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\nu\nabla</span><span class="nb">^</span><span class="m">2</span><span class="nv">\u</span><span class="nb"> </span><span class="o">-</span><span class="nb"></span>
<span class="nv">\frac</span><span class="nb">{</span><span class="m">1</span><span class="nb">}{</span><span class="nv">\varrho</span><span class="nb">}</span><span class="nv">\nabla</span><span class="nb"> p,</span><span class="s">\]</span>
!et
</pre></div>
</div>
<p>results in</p>
<div class="math">
\[{\color{blue}\frac{\partial\pmb{u}}{\partial t}} +
\nabla\cdot\nabla\pmb{u} = \nu\nabla^2\pmb{u} -
\frac{1}{\varrho}\nabla p,\]</div>
<p>but correct rendering in sphinx requires omitting the <code class="docutils literal"><span class="pre">\color</span></code> command:</p>
<div class="math">
\[\frac{\partial\pmb{u}}{\partial t} +
\nabla\cdot\nabla\pmb{u} = \nu\nabla^2\pmb{u} -
\frac{1}{\varrho}\nabla p,\]</div>
</div>
<div class="section" id="bar-over-symbols">
<h3>Bar over symbols<a class="headerlink" href="#bar-over-symbols" title="Permalink to this headline">¶</a></h3>
<p>Sometimes one must be extra careful with the LaTeX syntax to get sphinx MathJax
to render a formula correctly. Consider the combination of a bar over a
bold math symbol:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="sb">\[</span><span class="nb"> </span><span class="nv">\bar\f</span><span class="nb"> </span><span class="o">=</span><span class="nb"> f_c^{</span><span class="o">-</span><span class="m">1</span><span class="nb">}</span><span class="nv">\f</span><span class="nb">,</span><span class="s">\]</span>
!et
</pre></div>
</div>
<p>which for sphinx output results in</p>
<div class="math">
\[\bar\boldsymbol{f} = f_c^{-1}\boldsymbol{f}.\]</div>
<p>With sphinx, this formula is not rendered. However, using curly braces for the bar,</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="sb">\[</span><span class="nb"> </span><span class="nv">\bar</span><span class="nb">{</span><span class="nv">\f</span><span class="nb">} </span><span class="o">=</span><span class="nb"> f_c^{</span><span class="o">-</span><span class="m">1</span><span class="nb">}</span><span class="nv">\f</span><span class="nb">,</span><span class="s">\]</span>
!et
</pre></div>
</div>
<p>makes the output correct also for sphinx:</p>
<div class="math">
\[\bar{\boldsymbol{f}} = f_c^{-1}\boldsymbol{f},\]</div>
</div>
<div class="section" id="matrix-formulas">
<h3>Matrix formulas<a class="headerlink" href="#matrix-formulas" title="Permalink to this headline">¶</a></h3>
<p>Here is an <code class="docutils literal"><span class="pre">align</span></code> environment with a label and the <code class="docutils literal"><span class="pre">pmatrix</span></code>
environment for matrices and vectors in LaTeX.</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
G<span class="nb">_</span>2 + G<span class="nb">_</span>3 <span class="nb">&amp;</span> -G<span class="nb">_</span>3 <span class="nb">&amp;</span> -G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
-G<span class="nb">_</span>3 <span class="nb">&amp;</span> G<span class="nb">_</span>3 + G<span class="nb">_</span>4 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> -G<span class="nb">_</span>4 <span class="k">\\</span>
-G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> G<span class="nb">_</span>1 + G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> -G<span class="nb">_</span>4 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> G<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="nb">&amp;</span>=
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
v<span class="nb">_</span>1 <span class="k">\\</span>
v<span class="nb">_</span>2 <span class="k">\\</span>
v<span class="nb">_</span>3 <span class="k">\\</span>
v<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
+ <span class="k">\cdots</span>
label<span class="nb">{</span>mymatrixeq<span class="nb">}</span><span class="k">\\</span>
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
C<span class="nb">_</span>5 + C<span class="nb">_</span>6 <span class="nb">&amp;</span> -C<span class="nb">_</span>6 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
-C<span class="nb">_</span>6 <span class="nb">&amp;</span> C<span class="nb">_</span>6 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="k">\frac</span><span class="nb">{</span>d<span class="nb">}{</span>dt<span class="nb">}</span> <span class="nb">&amp;</span>=
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
v<span class="nb">_</span>1 <span class="k">\\</span>
v<span class="nb">_</span>2 <span class="k">\\</span>
v<span class="nb">_</span>3 <span class="k">\\</span>
v<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span> =
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
0 <span class="k">\\</span>
0 <span class="k">\\</span>
0 <span class="k">\\</span>
-i<span class="nb">_</span>0
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align<span class="nb">}</span>
!et
</pre></div>
</div>
<p>which becomes</p>
<div class="math" id="equation-mymatrixeq">
<span class="eqno">(13)</span>\[\begin{split}     \begin{pmatrix}
     G_2 + G_3 &amp; -G_3 &amp; -G_2 &amp; 0 \\
     -G_3 &amp; G_3 + G_4 &amp; 0 &amp; -G_4 \\
     -G_2 &amp; 0 &amp; G_1 + G_2 &amp; 0 \\
     0 &amp; -G_4 &amp; 0 &amp; G_4
     \end{pmatrix}
     =
     \begin{pmatrix}
     v_1 \\
     v_2 \\
     v_3 \\
     v_4
     \end{pmatrix}
     + \cdots\end{split}\]</div>
<div class="math" id="equation-_auto8">
<span class="eqno">(14)</span>\[\begin{split}     \begin{pmatrix}
     C_5 + C_6 &amp; -C_6 &amp; 0 &amp; 0 \\
     -C_6 &amp; C_6 &amp; 0 &amp; 0 \\
     0 &amp; 0 &amp; 0 &amp; 0 \\
     0 &amp; 0 &amp; 0 &amp; 0
     \end{pmatrix}
     \frac{d}{dt} =
     \begin{pmatrix}
     v_1 \\
     v_2 \\
     v_3 \\
     v_4
     \end{pmatrix} =
     \begin{pmatrix}
     0 \\
     0 \\
     0 \\
     -i_0
     \end{pmatrix}\end{split}\]</div>
<p>The same matrices without labels in an <code class="docutils literal"><span class="pre">align*</span></code> environment:</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>!bt
<span class="k">\begin</span><span class="nb">{</span>align*<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
G<span class="nb">_</span>2 + G<span class="nb">_</span>3 <span class="nb">&amp;</span> -G<span class="nb">_</span>3 <span class="nb">&amp;</span> -G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
-G<span class="nb">_</span>3 <span class="nb">&amp;</span> G<span class="nb">_</span>3 + G<span class="nb">_</span>4 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> -G<span class="nb">_</span>4 <span class="k">\\</span>
-G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> G<span class="nb">_</span>1 + G<span class="nb">_</span>2 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> -G<span class="nb">_</span>4 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> G<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="nb">&amp;</span>=
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
v<span class="nb">_</span>1 <span class="k">\\</span>
v<span class="nb">_</span>2 <span class="k">\\</span>
v<span class="nb">_</span>3 <span class="k">\\</span>
v<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
+ <span class="k">\cdots</span> <span class="k">\\</span>
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
C<span class="nb">_</span>5 + C<span class="nb">_</span>6 <span class="nb">&amp;</span> -C<span class="nb">_</span>6 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
-C<span class="nb">_</span>6 <span class="nb">&amp;</span> C<span class="nb">_</span>6 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="k">\\</span>
0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0 <span class="nb">&amp;</span> 0
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="k">\frac</span><span class="nb">{</span>d<span class="nb">}{</span>dt<span class="nb">}</span> <span class="nb">&amp;</span>=
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
v<span class="nb">_</span>1 <span class="k">\\</span>
v<span class="nb">_</span>2 <span class="k">\\</span>
v<span class="nb">_</span>3 <span class="k">\\</span>
v<span class="nb">_</span>4
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span> =
<span class="k">\begin</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
0 <span class="k">\\</span>
0 <span class="k">\\</span>
0 <span class="k">\\</span>
-i<span class="nb">_</span>0
<span class="k">\end</span><span class="nb">{</span>pmatrix<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>align*<span class="nb">}</span>
!et
</pre></div>
</div>
<p>The rendered result becomes</p>
<div class="math">
\[\begin{split}\begin{align*}
\begin{pmatrix}
G_2 + G_3 &amp; -G_3 &amp; -G_2 &amp; 0 \\
-G_3 &amp; G_3 + G_4 &amp; 0 &amp; -G_4 \\
-G_2 &amp; 0 &amp; G_1 + G_2 &amp; 0 \\
0 &amp; -G_4 &amp; 0 &amp; G_4
\end{pmatrix}
&amp;=
\begin{pmatrix}
v_1 \\
v_2 \\
v_3 \\
v_4
\end{pmatrix}
+ \cdots \\
\begin{pmatrix}
C_5 + C_6 &amp; -C_6 &amp; 0 &amp; 0 \\
-C_6 &amp; C_6 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0
\end{pmatrix}
\frac{d}{dt} &amp;=
\begin{pmatrix}
v_1 \\
v_2 \\
v_3 \\
v_4
\end{pmatrix} =
\begin{pmatrix}
0 \\
0 \\
0 \\
-i_0
\end{pmatrix}
\end{align*}\end{split}\]</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <center>
            <p class="logo"><a href="http://cbc.simula.no/" title="Go to Center for Biomedical Computing">
              <img class="logo" src="_static/cbc_logo.png" alt="Logo"/>
            </a></p>
            </center>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How various formats can deal with LaTeX math</a><ul>
<li><a class="reference internal" href="#test-of-equation-environments">Test of equation environments</a><ul>
<li><a class="reference internal" href="#test-1-inline-math">Test 1: Inline math</a></li>
<li><a class="reference internal" href="#test-2-a-single-equation-with-label">Test 2: A single equation with label</a></li>
<li><a class="reference internal" href="#test-3-multiple-aligned-equations-without-label-and-number">Test 3: Multiple, aligned equations without label and number</a></li>
<li><a class="reference internal" href="#test-4-multiple-aligned-equations-with-label">Test 4: Multiple, aligned equations with label</a></li>
<li><a class="reference internal" href="#test-5-multiple-aligned-equations-without-label">Test 5: Multiple, aligned equations without label</a></li>
<li><a class="reference internal" href="#test-6-multiple-aligned-equations-with-multiple-alignments">Test 6: Multiple, aligned equations with multiple alignments</a></li>
<li><a class="reference internal" href="#test-7-multiple-aligned-eqnarray-equations-without-label">Test 7: Multiple, aligned eqnarray equations without label</a></li>
<li><a class="reference internal" href="#test-8-multiple-eqnarrayed-equations-with-label">Test 8: Multiple, eqnarrayed equations with label</a></li>
<li><a class="reference internal" href="#test-9-the-multiline-environment-with-label-and-number">Test 9: The <code class="docutils literal"><span class="pre">multiline</span></code> environment with label and number</a></li>
<li><a class="reference internal" href="#test-10-splitting-equations-using-a-split-environment">Test 10: Splitting equations using a split environment</a></li>
<li><a class="reference internal" href="#test-11-newcommands-and-boldface-bm-vs-pmb">Test 11: Newcommands and boldface bm vs pmb</a></li>
</ul>
</li>
<li><a class="reference internal" href="#problematic-equations">Problematic equations</a><ul>
<li><a class="reference internal" href="#colored-terms-in-equations">Colored terms in equations</a></li>
<li><a class="reference internal" href="#bar-over-symbols">Bar over symbols</a></li>
<li><a class="reference internal" href="#matrix-formulas">Matrix formulas</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">How various formats can deal with LaTeX math</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/math_test.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="How various formats can deal with LaTeX math"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">How various formats can deal with LaTeX math</a> &raquo;</li> 
      </ul>
    </div>
<div class="wrapper">
  <div class="footer">
    <a href="http://cbc.simula.no"><img src="_static/cbc_banner.png" width="100%"><a>
    <br />
    <br />
      &copy;2016, Hans Petter Langtangen.
  </div>
</div>

  </body>
</html>
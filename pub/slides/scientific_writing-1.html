<!--
HTML file automatically generated from DocOnce source
(https://github.com/doconce/doconce/)
doconce format html scientific_writing.do.txt --html_style=bloodish --html_links_in_new_window --html_output=scientific_writing-1 --html_raw_github_url=raw.github
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/doconce/doconce/" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Scientific Writing and Publishing for the Future">
<meta name="keywords" content="key word1,key word2,key equation,$\u$ conservation,keyword">
<title>Scientific Writing and Publishing for the Future</title>
<style type="text/css">
/* bloodish style */
body {
  font-family: Helvetica, Verdana, Arial, Sans-serif;
  color: #404040;
  background: #ffffff;
}
h1 { font-size: 1.8em; color: #8A0808; }
h2 { font-size: 1.6em; color: #8A0808; }
h3 { font-size: 1.4em; color: #8A0808; }
h4 { font-size: 1.2em; color: #8A0808; }
a { color: #8A0808; text-decoration:none; }
tt { font-family: "Courier New", Courier; }
p { text-indent: 0px; }
hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
p.caption { width: 80%; font-style: normal; text-align: left; }
hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa; }div.highlight {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    line-height: 1.21429em;
}
div.cell {
    width: 100%;
    padding: 5px 5px 5px 0;
    margin: 0;
    outline: none;
}
div.input {
    page-break-inside: avoid;
    box-orient: horizontal;
    box-align: stretch;
    display: flex;
    flex-direction: row;
    align-items: stretch;
}
div.inner_cell {
    box-orient: vertical;
    box-align: stretch;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    box-flex: 1;
    flex: 1;
}
div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 4px;
    background: #f7f7f7;
    line-height: 1.21429em;
}
div.input_area > div.highlight {
    margin: .4em;
    border: none;
    padding: 0;
    background-color: transparent;
}
div.output_wrapper {
    position: relative;
    box-orient: vertical;
    box-align: stretch;
    display: flex;
    flex-direction: column;
    align-items: stretch;
}
.output {
    box-orient: vertical;
    box-align: stretch;
    display: flex;
    flex-direction: column;
    align-items: stretch;
}
div.output_area {
    padding: 0;
    page-break-inside: avoid;
    box-orient: horizontal;
    box-align: stretch;
    display: flex;
    flex-direction: row;
    align-items: stretch;
}
div.output_subarea {
    padding: .4em .4em 0 .4em;
    box-flex: 1;
    flex: 1;
}
div.output_text {
    text-align: left;
    color: #000;
    line-height: 1.21429em;
}
.alert-text-small   { font-size: 80%;  }
.alert-text-large   { font-size: 130%; }
.alert-text-normal  { font-size: 90%;  }
.alert {
  padding:8px 35px 8px 14px; margin-bottom:18px;
  text-shadow:0 1px 0 rgba(255,255,255,0.5);
  border:1px solid #bababa;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  color: #555;
  background-color: #f8f8f8;
  background-position: 10px 5px;
  background-repeat: no-repeat;
  background-size: 38px;
  padding-left: 55px;
  width: 75%;
 }
.alert-block {padding-top:14px; padding-bottom:14px}
.alert-block > p, .alert-block > ul {margin-bottom:1em}
.alert li {margin-top: 1em}
.alert-block p+p {margin-top:5px}
.alert-notice { background-image: url(https://raw.githubusercontent.com/doconce/doconce/bundled/html_images/small_gray_notice.png); }
.alert-summary  { background-image:url(https://raw.githubusercontent.com/doconce/doconce/main/bundled/html_images/small_gray_summary.png); }
.alert-warning { background-image: url(https://raw.githubusercontent.com/doconce/doconce/main/bundled/html_images/small_gray_warning.png); }
.alert-question {background-image:url(https://raw.githubusercontent.com/doconce/doconce/main/bundled/html_images/small_gray_question.png); }
div { text-align: justify; text-justify: inter-word; }
.tab {
  padding-left: 1.5em;
}
div.toc p,a {
  line-height: 1.3;
  margin-top: 1.1;
  margin-bottom: 1.1;
}
</style>
<script src="https://sagecell.sagemath.org/static/jquery.min.js"></script>
<script src="https://sagecell.sagemath.org/embedded_sagecell.js"></script>
<link rel="stylesheet" type="text/css" href="https://sagecell.sagemath.org/static/sagecell_embed.css">
<script>
$(function () {
   // Make *any* div with class "sage_compute" a Sage cell
   sagecell.makeSagecell({inputLocation: "div.sage_compute",
                          evalButtonText: "Evaluate"});
   document.getElementsByClassName("sage_compute")[0].closest(".input").style.paddingBottom=95;
});
</script>
</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Challenges with tools for scientific writing',
               1,
               None,
               'challenges-with-tools-for-scientific-writing'),
              ('Scientific writing = LaTeX',
               2,
               None,
               'scientific-writing-latex'),
              ('LaTeX PDF is mostly suboptimal for the new devices',
               2,
               None,
               'latex-pdf-is-mostly-suboptimal-for-the-new-devices'),
              ('The book will survive (LaTeX is ideal)',
               2,
               None,
               'the-book-will-survive-latex-is-ideal'),
              ('The classical report/paper will survive (LaTeX is ideal)',
               2,
               None,
               'the-classical-report-paper-will-survive-latex-is-ideal'),
              ('But there is an explosion of new platforms for digital '
               'learning systems!',
               2,
               None,
               'but-there-is-an-explosion-of-new-platforms-for-digital-learning-systems'),
              ('My headache: How to write scientific material that can be '
               'easily published through old and new media?',
               2,
               None,
               'my-headache-how-to-write-scientific-material-that-can-be-easily-published-through-old-and-new-media'),
              ('Scope: documents with *much* math and computer code',
               2,
               None,
               'scope-documents-with-much-math-and-computer-code'),
              ('There is a jungle of outlets your scientific writings should '
               'address',
               2,
               None,
               'there-is-a-jungle-of-outlets-your-scientific-writings-should-address'),
              ('Can I assemble lots of different writings to a new future '
               'document (book)?',
               2,
               None,
               'can-i-assemble-lots-of-different-writings-to-a-new-future-document-book'),
              ('Pros and cons of various tools',
               1,
               None,
               'pros-and-cons-of-various-tools'),
              ('Popular tools anno 2014 and their math support',
               2,
               None,
               'popular-tools-anno-2014-and-their-math-support'),
              ('LaTeX is very rich; other tools support much less',
               2,
               None,
               'latex-is-very-rich-other-tools-support-much-less'),
              ('LaTeX is very rich; other tools support much less',
               2,
               None,
               'latex-is-very-rich-other-tools-support-much-less'),
              ('LaTeX is very rich; other tools support much less',
               2,
               None,
               'latex-is-very-rich-other-tools-support-much-less'),
              ('My colleagues face fundamental problem with going from LaTeX '
               'to IPython notebook (=Markdown)',
               2,
               None,
               'my-colleagues-face-fundamental-problem-with-going-from-latex-to-ipython-notebook-markdown'),
              ('Examples on typesetting concerns (1)',
               2,
               None,
               'examples-on-typesetting-concerns-1'),
              ('Examples on typesetting concerns (2)',
               2,
               None,
               'examples-on-typesetting-concerns-2'),
              ('Examples on typesetting concerns (3)',
               2,
               None,
               'examples-on-typesetting-concerns-3'),
              ('Solution I: Use a format that translates to many',
               2,
               None,
               'solution-i-use-a-format-that-translates-to-many'),
              ('Solution II: Use DocOnce', 2, None, 'solution-ii-use-doconce'),
              ('DocOnce: Write once, include anywhere',
               1,
               None,
               'doconce-write-once-include-anywhere'),
              ('DocOnce demos', 2, None, 'doconce-demos'),
              ('DocOnce disclaimer', 2, None, 'doconce-disclaimer'),
              ('DocOnce experience', 2, None, 'doconce-experience'),
              ('A tour of DocOnce', 1, None, 'a-tour-of-doconce'),
              ('Title, authors, date, toc', 2, None, 'title-authors-date-toc'),
              ('Abstract', 2, None, 'abstract'),
              ('Section headings', 2, None, 'section-headings'),
              ('This is an H1/chapter heading',
               1,
               None,
               'this-is-an-h1-chapter-heading'),
              ('This is an H2/section heading',
               2,
               None,
               'this-is-an-h2-section-heading'),
              ('This is an H3/subsection heading',
               2,
               None,
               'this-is-an-h3-subsection-heading'),
              ('This is an H4/paragraph heading',
               3,
               None,
               'this-is-an-h4-paragraph-heading'),
              ('Markup and lists', 2, None, 'markup-and-lists'),
              ('Labels, references, index items',
               2,
               None,
               'labels-references-index-items'),
              ('Figures and movies', 2, None, 'figures-and-movies'),
              ('Math', 2, None, 'math'),
              ('Math flexibility', 2, None, 'math-flexibility'),
              ('Displaying code', 2, None, 'displaying-code'),
              ('Copying code from source files',
               2,
               None,
               'copying-code-from-source-files'),
              ('Typesetting of code is implied by the file extension',
               2,
               None,
               'typesetting-of-code-is-implied-by-the-file-extension'),
              ('Demonstrating code execution; Online Python Tutor',
               2,
               'slide:opt',
               'slide:opt'),
              ('Demonstrating code execution; Sage Cell Server',
               2,
               'slide:sage:cell',
               'slide:sage:cell'),
              ('Demonstrating code execution; IPython notebook',
               2,
               'slide:ipynb',
               'slide:ipynb'),
              ('Tables', 2, None, 'tables'),
              ('Newcommands for math', 2, None, 'newcommands-for-math'),
              ('Labels, citations, index, bibliography',
               2,
               None,
               'labels-citations-index-bibliography'),
              ('Exercises', 2, None, 'exercises'),
              ('Rendering of the previous page',
               2,
               None,
               'rendering-of-the-previous-page'),
              ('Problem 1: Flip a Coin', 2, None, 'problem-1-flip-a-coin'),
              ('Exercises', 2, None, 'exercises'),
              ('Use of preprocessors', 2, None, 'use-of-preprocessors'),
              ('DocOnce admonitions', 2, None, 'doconce-admonitions'),
              ('Generalized references', 2, None, 'generalized-references'),
              ('Slides', 2, None, 'slides'),
              ('Example on slide code', 2, None, 'example-on-slide-code'),
              ('Example on slide code', 2, None, 'example-on-slide-code'),
              ('Headline', 2, None, 'headline'),
              ('Grid layout of slide: MxN cells',
               2,
               None,
               'grid-layout-of-slide-mxn-cells'),
              ('Grid layout of slide: MxN cells',
               2,
               None,
               'grid-layout-of-slide-mxn-cells'),
              ('Headline', 2, None, 'headline'),
              ('Classic slide types', 2, None, 'classic-slide-types'),
              ('HTML5 slide types', 2, None, 'html5-slide-types'),
              ('DocOnce to HTML', 2, None, 'doconce-to-html'),
              ('Output for blog posts', 2, None, 'output-for-blog-posts'),
              ('DocOnce to pdfLaTeX', 2, None, 'doconce-to-pdflatex'),
              ('DocOnce to Sphinx', 2, None, 'doconce-to-sphinx'),
              ('Output for wiki', 2, None, 'output-for-wiki'),
              ('DocOnce to other formats', 2, None, 'doconce-to-other-formats'),
              ('Installation', 2, None, 'installation'),
              ('Writing tips for LaTeX writers who want to convert to DocOnce '
               '*and generate other formats*',
               2,
               None,
               'writing-tips-for-latex-writers-who-want-to-convert-to-doconce-and-generate-other-formats'),
              ('DocOnce writing tips', 2, None, 'doconce-writing-tips'),
              ('DocOnce writing tips', 2, None, 'doconce-writing-tips'),
              ('Writing tips for sphinx and other formats',
               2,
               None,
               'writing-tips-for-sphinx-and-other-formats')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript" async
 src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- ------------------- main content ---------------------- -->
<!-- TITLE: On the Technicalities of Scientific Writing Anno 2012: The DocOnce Way -->
<!-- TITLE: Scientific Writing Anno 2013: The DocOnce Way -->
<!-- TITLE: Scientific Writing and Publishing for the Future: How Can We Handle the eLearning Revolution? -->
<center>
<h1>Scientific Writing and Publishing for the Future</h1>
</center>  <!-- document title -->

<!-- author(s): Hans Petter Langtangen -->
<center>
<b>Hans Petter Langtangen</b> 
</center>
<!-- institution(s) -->
<br>
<center>
<h4>Jun 22, 2021</h4>
</center> <!-- date -->
<br>

<br/><br/>
<center>
<p><img src="fig/doconce1b.png" width="400" align="bottom"></p>
</center>
<br/><br/>

<!-- !split --><br><br><br><br><br><br><br><br>
<h1 id="challenges-with-tools-for-scientific-writing">Challenges with tools for scientific writing  </h1>

<!-- !bslidecell 00 -->
<br/><br/>
<center>
<p><img src="fig/writing1.jpg" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 01 -->
<br/><br/>
<center>
<p><img src="fig/direction14.jpg" width="510" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- FIGURE: [fig/writing_is_hard_stone, width=500 frac=0.5] -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="scientific-writing-latex">Scientific writing = LaTeX </h2>

<ul>
 <li> Pre 1980: handwriting + publisher</li>
 <li> Post 1985: scientists write LaTeX</li>
 <li> Post 2010: a few scientists explore new digital formats</li>
</ul>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">\def\FrameCommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\colorbox</span><span style="color: #008000">{</span>shadecolor<span style="color: #008000">}}</span><span style="color: #008000; font-weight: bold">\FrameRule</span>0.6pt
<span style="color: #008000; font-weight: bold">\MakeFramed</span> <span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\FrameRestore</span><span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\vskip</span>3mm<span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\vskip</span>0mm<span style="color: #008000; font-weight: bold">\endMakeFramed</span><span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\providecommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\shadedquoteBlue</span><span style="color: #008000">}{}</span>
<span style="color: #008000; font-weight: bold">\renewenvironment</span><span style="color: #008000">{</span>shadedquoteBlue<span style="color: #008000">}</span>[1][]<span style="color: #008000">{</span>
<span style="color: #008000; font-weight: bold">\bgroup\rmfamily\fboxsep</span>=0mm<span style="color: #008000; font-weight: bold">\relax</span>
<span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>shadedskip<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\list</span><span style="color: #008000">{}{</span><span style="color: #008000; font-weight: bold">\parsep</span>=-2mm<span style="color: #008000; font-weight: bold">\parskip</span>=0mm<span style="color: #008000; font-weight: bold">\topsep</span>=0pt<span style="color: #008000; font-weight: bold">\leftmargin</span>=2mm
<span style="color: #008000; font-weight: bold">\rightmargin</span>=2<span style="color: #008000; font-weight: bold">\leftmargin\leftmargin</span>=4pt<span style="color: #008000; font-weight: bold">\relax</span><span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\relax</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\endlist\end</span><span style="color: #008000">{</span>shadedskip<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\egroup</span><span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>shadedquoteBlue<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\fontsize</span><span style="color: #008000">{</span>9pt<span style="color: #008000">}{</span>9pt<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>Verbatim<span style="color: #008000">}</span>
print &#39;Hello, World!&#39;
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>Verbatim<span style="color: #008000">}</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p><b>Big late 1990s question</b>: Will MS Word replace LaTeX? It never did!</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="latex-pdf-is-mostly-suboptimal-for-the-new-devices">LaTeX PDF is mostly suboptimal for the new devices </h2>

<!-- !bslidecell 00 0.4 -->
<br/><br/>
<center>
<p><img src="fig/ipad.png" width="400" align="bottom"></p>
</center>
<br/><br/>

<br/><br/>
<center>
<p><img src="fig/iphones.jpg" width="100" align="bottom"></p>
</center>
<br/><br/>

<!-- FIGURE: [fig/mbair, width=400] -->

<!-- !eslidecell -->

<!-- !bslidecell 01 0.6 -->
<br/><br/>
<center>
<p><img src="fig/imac.png" width="350" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="the-book-will-survive-latex-is-ideal">The book will survive (LaTeX is ideal) </h2>

<br/><br/>
<center>
<p><img src="fig/oldbooks.jpg" width="800" align="bottom"></p>
</center>
<br/><br/>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="the-classical-report-paper-will-survive-latex-is-ideal">The classical report/paper will survive (LaTeX is ideal) </h2>

<!-- !bslidecell 00 -->
<br/><br/>
<center>
<p><img src="fig/latex_thesis.jpg" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 01 -->
<br/><br/>
<center>
<p><img src="fig/latex_paper1.png" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- * Scientific writing = lecture notes, slides, reports, thesis, books,  ... -->
<!-- * (Journal papers typeset by journals are out of scope) -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="but-there-is-an-explosion-of-new-platforms-for-digital-learning-systems">But there is an explosion of new platforms for digital learning systems! </h2>

<p><a href="https://www.youtube.com/watch?v=eW3gMGqcZQc#t=127" target="_blank">MOOCs</a>,
<a href="https://www.khanacademy.org/" target="_blank">Kahn Academy</a>,
<a href="http://ndla.no/" target="_blank">ndla</a>,
<a href="http://h5p.org" target="_blank">H5P</a>,
<a href="http://www.haikulearning.com/" target="_blank">Haiku Learning</a>,
<a href="https://www.opigno.org/en" target="_blank">Opigno</a>, ...
</p>

<!-- !bslidecell 00 -->
<br/><br/>
<center>
<p><img src="fig/digital_learning_words.jpg" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 01 -->
<br/><br/>
<center>
<p><img src="fig/digital_learning_iPad.jpg" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="my-headache-how-to-write-scientific-material-that-can-be-easily-published-through-old-and-new-media">My headache: How to write scientific material that can be easily published through old and new media? </h2>

<br/><br/>
<center>
<p><img src="fig/headache4.jpg" width="300" align="bottom"></p>
</center>
<br/><br/>

<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p><em>LaTeX-for-paper</em> and <em>HTML-for-screen</em> are two very different
writing styles and technology platforms.
</p>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="scope-documents-with-much-math-and-computer-code">Scope: documents with <em>much</em> math and computer code </h2>

<div class="alert alert-block alert-block alert-text-normal">
<b>Key question:</b>
<p>
<p>What tools should I use for scientific writing?</p>
</div>


<!-- !bslidecell 00 0.25 -->
<br/><br/>
<center>
<p><img src="fig/LaTeX_logo.jpg" width="120" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 01 0.25 -->
<br/><br/>
<center>
<p><img src="fig/MS_Word_logo.jpg" width="80" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 02 0.5 -->
<br/><br/>
<center>
<p><img src="fig/sphinx_logo.png" width="200" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 10 0.25 -->
<br/><br/>
<center>
<p><img src="fig/markdown_logo.jpg" width="80" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 11 0.25 -->
<br/><br/>
<center>
<p><img src="fig/MediaWiki_logo.jpg" width="80" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !bslidecell 12 0.5 -->
<br/><br/>
<center>
<p><img src="fig/IPython_logo.png" width="300" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="there-is-a-jungle-of-outlets-your-scientific-writings-should-address">There is a jungle of outlets your scientific writings should address </h2>

<!-- Insert links here to reports -->

<!-- !bslidecell 00 0.4 -->
<ul>
 <li> BW paper</li>
 <li> Color paper</li>
 <li> Slides</li>
 <li> Web w/design</li>
 <li> Wiki</li>
 <li> Blog</li>
 <li> Notebook</li>
 <li> ...</li>
</ul>
<!-- !eslidecell -->

<!-- !bslidecell 01 0.6 -->
<br/><br/>
<center>
<p><img src="fig/jungle_with_mess.jpg" width="500" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="can-i-assemble-lots-of-different-writings-to-a-new-future-document-book">Can I assemble lots of different writings to a new future document (book)? </h2>

<p>Suppose I write various types of scientific material,</p>

<ul>
 <li> LaTeX document,</li>
 <li> blog posts (HTML),</li>
 <li> web pages (HTML),</li>
 <li> Sphinx documents,</li>
 <li> IPython notebooks,</li>
 <li> wikis,</li>
 <li> Markdown files, ...</li>
</ul>
<p>and later want to collect the pieces into a larger document, maybe
some book - is that at all feasible?
</p>

<!-- !bpop highlight-red -->
<p>Probably not, but I have a solution <img src="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/emoji/png/smile.png" width="22px" height="22px" align="center"></p>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h1 id="pros-and-cons-of-various-tools">Pros and cons of various tools </h1>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="popular-tools-anno-2014-and-their-math-support">Popular tools anno 2014 and their math support </h2>

<!-- !bpop -->
<ul>
 <li> <b>LaTeX</b>: de facto standard for math-instensive documents</li>
 <li> <b>pdfLaTeX</b>, <b>XeLaTeX</b>, <b>LuaLaTeX</b>: takes over (figures in png, pdf) - use these!</li>
 <li> <b>MS Word</b>: too clicky math support and ugly fonts, but much used</li>
 <li> <b>HTML with MathJax</b>: "full" LaTeX <em>math</em>, but much tagging</li>
 <li> <b>Sphinx</b>: somewhat limited LaTeX math support, but great support for web design, and less tagged than HTML</li>
 <li> <b>reStructuredText</b>: similar to Sphinx, but no math support, transforms to lots of formats (LaTeX, HTML, XML, Word, OpenOffice, ...)</li>
 <li> <b>Markdown</b>: somewhat limited LaTeX math support, but minor tagging, transforms to lots of formats (LaTeX, HTML, XML, Word, OpenOffice, ...)</li>
 <li> <b>IPython notebooks</b>: Markdown code/math, combines Python code, interactivity, and visualization, but requires all code snippets to sync together</li>
 <li> <b>Confluence</b>: Markdown-like input, with limited LaTeX math support, but converted to XML</li>
 <li> <b>MediaWiki</b>: quite good LaTeX math support (cf. Wikipedia/Wikibooks)</li>
 <li> Other <b>wiki</b> formats: no math support, great for collaborative editing</li>
 <li> <b>Wordpress</b>: supports full HTML with LaTeX <em>formulas</em> only</li>
 <li> <b>Google blogger</b>: supports full HTML with MathJax</li>
</ul>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="latex-is-very-rich-other-tools-support-much-less">LaTeX is very rich; other tools support much less </h2>

<ul>
 <li> LaTeX has lots of fancy layouts, but few translates to other formats</li>
 <li> LaTeX <em>inline</em> math: works with all math-enabled formats (LaTeX, MathJax, Sphinx, Markdown, MediaWiki, Confluence, ...)</li>
 <li> LaTeX <em>equation</em> math:</li>
<ul>
    <li> <b>LaTeX</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code> + <code>eqnarray</code>, <code>split</code>, <code>alignat</code>, ... (numerous!)</li>
    <li> <b>MathJax</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code></li>
    <li> <b>MediaWiki</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code></li>
    <li> <b>Sphinx</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code></li>
    <li> <b>Markdown</b>: <code>equation*</code>, <code>equation</code>, <code>eqnarray*</code>, <code>align*</code> (but no labels)</li>
</ul>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="latex-is-very-rich-other-tools-support-much-less">LaTeX is very rich; other tools support much less </h2>

<!-- !bpop -->
<ul>
 <li> Figures: all</li>
 <li> Movies: raw HTML or YouTube/Vimeo, (LaTeX)</li>
 <li> Subfigures: LaTeX (<code>subfigure</code>)</li>
 <li> Floating computer code: LaTeX; fixed computer code: all</li>
 <li> Floating tables: LaTeX; fixed tables: all</li>
 <li> Algorithms: LaTeX</li>
 <li> Page references: LaTeX</li>
 <li> Cross references: LaTeX (also to external doc.)</li>
 <li> Equation references: LaTeX, HTML, Sphinx</li>
</ul>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="latex-is-very-rich-other-tools-support-much-less">LaTeX is very rich; other tools support much less </h2>

<!-- !bpop -->
<ul>
 <li> Margin notes: LaTeX, HTML with tailored css code</li>
 <li> Footnotes: LaTeX, Sphinx, reStructuredText, MediaWiki</li>
 <li> Bibliography: LaTeX, Sphinx, reStructuredText, MediaWiki</li>
 <li> Index: LaTeX, Sphinx</li>
 <li> Hyperlinks: all (but not on paper!)</li>
 <li> Interactive programs: Sphinx, IPython notebook, raw HTML</li>
 <li> Searching in multi-page doc.: Sphinx, MediaWiki, LaTeX PDF</li>
</ul>
<!-- !epop -->

<!-- !bpop -->
<p>Highly non-trivial to translate from/to LaTeX!</p>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="my-colleagues-face-fundamental-problem-with-going-from-latex-to-ipython-notebook-markdown">My colleagues face fundamental problem with going from LaTeX to IPython notebook (=Markdown) </h2>

<div class="alert alert-block alert-block alert-text-normal">
<b>Plan</b>
<p>
<p>I am used to write LaTeX paper/book-style with lots of
cross-references and <em>floating</em> figures, code snippets,
tables, algorithms, but now I <em>want to convert to
IPython notebooks</em>.
</p>
</div>


<div class="alert alert-block alert-block alert-text-normal">
<b>Problem</b>
<p>
<p>Must have fixed figures, code snippets, tables. No algorithm environment,
cross-referencing, equation referencing. All code needed for a snippet
to run must be included. <em>It's a different writing style, but lots
of new opportunities</em>.
</p>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="examples-on-typesetting-concerns-1">Examples on typesetting concerns (1) </h2>

<!-- !bpop -->
<ul>
 <li> Sphinx refers to figures by the caption (has to be short!) and strips away any math notation (avoid that!).</li>
 <li> Sphinx refers to sections by the title, but removes math in the reference, so avoid math in headlines.</li>
 <li> Tables cannot be referred to by numbers and have to appear at fixed positions in the text.</li>
 <li> Computer code has to appear at fixed positions in the text.</li>
 <li> Algorithms must be written up using basic elements like lists or paragraphs with headings.</li>
 <li> Recipes are often typeset as enumerated lists. For recipes with code or math blocks: drop the list (gives problems in some formats) and use paragraph (or subsubsection) headings with "Step 1.", "Step 2.", etc.</li>
</ul>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="examples-on-typesetting-concerns-2">Examples on typesetting concerns (2) </h2>

<!-- !bpop -->
<ul>
 <li> Footnotes must appear as part of the running text (e.g. sentences surrounded by parenthesis), since only a few formats support footnotes.</li>
 <li> Sphinx does not handle code blocks where the first line is indented.</li>
 <li> Multiple plots in the same figure: mount the plots to one image file and include this (<code>montage</code> for png, gif, jpeg; <code>pdftk</code>, <code>pdfnup</code>, and <code>pdfcrop</code> for PDF).</li>
 <li> If you need several equations <em>numbered</em> in an <code>align</code> environment, recall that Sphinx, Markdown, and MediaWiki cannot handle this, although they have LaTeX math support.</li>
 <li> Markdown tolerates labels in equations but cannot refer to them.</li>
</ul>
<!-- !epop -->

<!-- Not valid anymore: -->
<!-- Keys for items in the bibliography are made visible by Sphinx so -->
<!-- "bibitems" a la BibTeX must look sensible and consistent. -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="examples-on-typesetting-concerns-3">Examples on typesetting concerns (3) </h2>

<!-- !bpop -->
<ul>
 <li> Index words can appear anywhere in LaTeX, but should be outside paragraphs in other tools.</li>
 <li> References to tables, program code and algorithms can only be made in LaTeX.</li>
 <li> Figures are floating in LaTeX, but fixed in other tools, so place figures exactly where they are needed the first time.</li>
 <li> Curve plots with color lines do not work well in black-and-white printing. Make sure plots makes sense in color and BW (e.g. by using colors <em>and</em> markers).</li>
</ul>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="solution-i-use-a-format-that-translates-to-many">Solution I: Use a format that translates to many </h2>

<ul>
 <li> Sphinx can do nice HTML, LaTeX, epub, (almost) plain text, man pages, Gnome devhelp files, Qt help files, texinfo, JSON</li>
 <li> Markdown can do LaTeX, HTML, MS Word, OpenOffice, XML, reStructuredText, epub, DocBook, ... but not Sphinx</li>
 <li> IPython notebook: can do LaTeX, reStructuredText, HTML, PDF, Python script</li>
 <li> Sphinx and Markdown has some limited math support</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="solution-ii-use-doconce">Solution II: Use DocOnce </h2>

<a href="https://github.com/doconce/doconce" target="_blank">DocOnce</a>
<p>offers minimalistic typing, great flexibility wrt format,
especially for scientific writing with <em>much math and code</em>.
</p>

<ul>
 <li> Can generate LaTeX, HTML, Sphinx, Markdown, MediaWiki, Google wiki, Creole wiki, reST, plain text</li>
 <li> Made for large science books <em>and</em> small notes</li>
 <li> Targets paper and screen</li>
 <li> Many special features (code snippets from files, embedded movies, admonitions, modern LaTeX layouts, extended math support for Sphinx/Markdown, ...)</li>
 <li> Very effective for generating slides from ordinary text</li>
 <li> Applies Mako: DocOnce text is a program (!)</li>
 <li> Much like Markdown, less tagged than LaTeX, HTML, Sphinx</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h1 id="doconce-write-once-include-anywhere">DocOnce: Write once, include anywhere </h1>

<br/><br/>
<center>
<p><img src="fig/doconce1b.png" width="600" align="bottom"></p>
</center>
<br/><br/>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-demos">DocOnce demos </h2>

<a href="http://doconce.github.com/teamods/writing_reports/" target="_blank"><tt>http://doconce.github.com/teamods/writing_reports/</tt></a>

<ul>
 <li> LaTeX-based PDF <a href="http://doconce.github.com/teamods/writing_reports/_static/report.pdf" target="_blank">for screen</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/report_4printing.pdf" target="_blank">for printing</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/report_4phone.pdf" target="_blank">for phone</a></li>
 <li> <a href="http://doconce.github.com/teamods/writing_reports/_static/report_bloodish.html" target="_blank">Plain HTML</a> or <a href="http://doconce.github.com/teamods/writing_reports/_static/report_bootstrap_wtoc.html" target="_blank">Bootstrap</a> or <a href="http://doconce.github.com/teamods/writing_reports/_static/report_bootswatch_journal.html" target="_blank">Bootswatch</a> or with a <a href="http://doconce.github.com/teamods/writing_reports/_static/report_vagrant.html" target="_blank">template</a> or <a href="http://doconce.github.com/teamods/writing_reports/_static/report_github_minimal.html" target="_blank">another template</a> or <a href="http://doconce.github.com/teamods/writing_reports/_static/report_solarized.html" target="_blank">solarized</a></li>
 <li> Sphinx: <a href="http://doconce.github.com/teamods/writing_reports/_static/sphinx-agni/index.html" target="_blank">agni</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/sphinx-pyramid/report.html" target="_blank">pyramid</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/sphinx-classy/report.html" target="_blank">classy</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html" target="_blank">fenics</a>, <a href="http://doconce.github.com/teamods/writing_reports/_static/sphinx-redcloud/report.html" target="_blank">redcloud</a></li>
 <li> HTML for <a href="http://doconce-report-demo.blogspot.no/" target="_blank">Google</a> or <a href="http://doconcereportdemo.wordpress.com/" target="_blank">Wordpress</a> for blog posts</li>
 <li> <a href="http://doconcedemo.shoutwiki.com/wiki/DocOnce_demo_page" target="_blank">MediaWiki</a> (Wikipedia, Wikibooks, etc)</li>
 <li> DocOnce <a href="http://doconce.github.com/teamods/writing_reports/_static/report.do.txt.html" target="_blank">source code</a> and <a href="http://doconce.github.io/doconce/doc/pub/tutorial/html/index.html" target="_blank">tutorial</a></li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-disclaimer">DocOnce disclaimer </h2>

<ul>
 <li> Based on text transformations (reg.exp.) so valid syntax may occasionally give problems
<!-- * Actively developed and maintained, but one-man show --></li>
</ul>
<div class="alert alert-block alert-warning alert-text-normal">
<b>DocOnce divorce</b>
<p>
<p>At any time one can divorce from DocOnce and marry one of the output
formats, such as LaTeX or Sphinx. The generated code is clean.
</p>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-experience">DocOnce experience </h2>

<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
 <li> Code generation is a great thing</li>
 <li> Preprocessors a la Mako is a great thing</li>
 <li> Less tagging than LaTeX/HTML is a great thing</li>
 <li> Code generation software becomes a repository of advanced and nice constructs for layout</li>
</ul>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h1 id="a-tour-of-doconce">A tour of DocOnce </h1>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="title-authors-date-toc">Title, authors, date, toc </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">TITLE: Some Title
AUTHOR: name1 at institution1, with more info &amp; institution2
AUTHOR: name2 email:name2@web.com at institution
DATE: today

# A table of contents is optional:
TOC: on
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<div class="alert alert-block alert-notice alert-text-normal">
<b>Notice</b>
<p>
<p>Title and authors must have all information <em>on a single line</em>!</p>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="abstract">Abstract </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">__Abstract.__
Here goes the abstract...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Or:</p>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">__Summary.__
Here goes the summary...
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="section-headings">Section headings </h2>

<p>Headings are surrounded by <code>=</code> signs:</p>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">======= This is an H1/chapter heading =======

===== This is an H2/section heading =====

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Result:</p>
<h1 id="this-is-an-h1-chapter-heading">This is an H1/chapter heading </h1>
<h2 id="this-is-an-h2-section-heading">This is an H2/section heading </h2>
<h2 id="this-is-an-h3-subsection-heading">This is an H3/subsection heading </h2>
<h3 id="this-is-an-h4-paragraph-heading">This is an H4/paragraph heading </h3>

<p>
<b>This is a paragraph heading.</b>
</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="markup-and-lists">Markup and lists </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"> * Bullet list items start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>This gets rendered as</p>

<ul>
 <li> Bullet lists start with <code>*</code> and may span several lines</li>
 <li> <em>Emphasized words</em> are possible</li>
 <li> <b>Boldface words</b> are also possible</li>
 <li> <font color="red">colored words</font> too</li>
 <li> <code>inline verbatim code</code> is featured
<ol type="a"></li>
  <li> and sublists with enumerated items starting with <code>o</code></li>
  <li> items are just indented as you would do in email</li>
</ol>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="labels-references-index-items">Labels, references, index items </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"># Insert index items in the source
idx{key word1} idx{key word2}

# Label
===== Some section =====
label{this:section}

# Make reference
As we saw in Section ref{this:section}, references, index
items and labels follow a syntax similar to LaTeX
but without backslashes.

# Make reference to equations
See (ref{eq1})-(ref{myeq}).

# Make hyperlink
&quot;some link text&quot;: &quot;https://github.com/doconce/doconce&quot;

# Hyperlink with complete URL as link text
URL: &quot;https://github.com/doconce/doconce&quot;
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="figures-and-movies">Figures and movies </h2>

<div class="alert alert-block alert-notice alert-text-normal">
<b>Important:</b>
<p>
<p>Figures with HTML and LaTeX size info, and caption: <em>everything on one line</em></p>
</div>



<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">FIGURE: [figdir/myfig, width=300 frac=1.2] My caption. label{fig1}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Movies are also supported:</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">MOVIE: [http://youtu.be/IDeGDFZSYo8, width=420 height=315]
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>and rendered as</p>

<iframe width="420" height="315" src="http://youtube.com/embed/IDeGDFZSYo8" frameborder="0" allowfullscreen></iframe>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="math">Math </h2>

<p>Inline math as in LaTeX:</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">...where $a=\int_{\Omega}fdx$ is an integral.
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>gets rendered as ...where \( a=\int_{\Omega}fdx \) is an integral.</p>

<p>An equation environment is surrounded by <code>!bt</code> and <code>!et</code> tags,
the rest is plain LaTeX:
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!bt
\begin{align}
\frac{\partial u}{\partial t} &amp;= \nabla^2 u,
label{a:eq}\\ 
\nabla\cdot\pmb{v} &amp; = 0
label{b:eq}
\end{align}
!et
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>which is rendered as</p>

$$
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
\label{c:eq}\\ 
\nabla\cdot\pmb{v} & = 0
\label{d:eq}
\end{align}
$$


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="math-flexibility">Math flexibility </h2>

<p>Limit math environments to</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">\[ ... \]

\begin{equation*}
\end{equation*}

\begin{equation}
\end{equation}

\begin{align*}
\end{align*}

\begin{align}
\end{align}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<div class="alert alert-block alert-notice alert-text-normal">
<b>DocOnce fix of shortcomings</b>
<p>
<ul>
 <li> Sphinx, Markdown, and MediaWiki cannot have <code>align</code> with labels</li>
 <li> MathJax (HTML, Sphinx, Markdown, Mediawiki, ...) cannot handle equation references across web pages</li>
</ul>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="displaying-code">Displaying code </h2>

<p>Code is enclosed in <code>!bc</code> and <code>!ec</code> tags:</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!bc pycod
def solver(I, a, T, dt, theta):
    &quot;&quot;&quot;Solve u&#39;=-a*u, u(0)=I, for t in (0,T] with steps of dt.&quot;&quot;&quot;
    dt = float(dt); N = int(round(T/dt)); T = N*dt
    u = zeros(N+1); t = linspace(0, T, N+1)

    u[0] = I
    for n in range(0, N):
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
!ec
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>This gets rendered as</p>


<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">solver</span>(I, a, T, dt, theta):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Solve u&#39;=-a*u, u(0)=I, for t in (0,T] with steps of dt.&quot;&quot;&quot;</span>
    dt <span style="color: #666666">=</span> <span style="color: #008000">float</span>(dt); N <span style="color: #666666">=</span> <span style="color: #008000">int</span>(<span style="color: #008000">round</span>(T<span style="color: #666666">/</span>dt)); T <span style="color: #666666">=</span> N<span style="color: #666666">*</span>dt
    u <span style="color: #666666">=</span> zeros(N<span style="color: #666666">+1</span>); t <span style="color: #666666">=</span> linspace(<span style="color: #666666">0</span>, T, N<span style="color: #666666">+1</span>)

    u[<span style="color: #666666">0</span>] <span style="color: #666666">=</span> I
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">0</span>, N):
        u[n<span style="color: #666666">+1</span>] <span style="color: #666666">=</span> (<span style="color: #666666">1</span> <span style="color: #666666">-</span> (<span style="color: #666666">1-</span>theta)<span style="color: #666666">*</span>a<span style="color: #666666">*</span>dt)<span style="color: #666666">/</span>(<span style="color: #666666">1</span> <span style="color: #666666">+</span> theta<span style="color: #666666">*</span>dt<span style="color: #666666">*</span>a)<span style="color: #666666">*</span>u[n]
    <span style="color: #008000; font-weight: bold">return</span> u, t
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="copying-code-from-source-files">Copying code from source files </h2>

<p>We recommend to copy as much code as possible directly from the
source files:
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">@@@CODE path/to/file
@@@CODE path/to/file   fromto: start-regex@end-regex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>For example, copying a code snippet starting with <code>def solver(</code> and
ending with (line not included) <code>def next(x, y,</code> is specified by
start and end regular expressions:
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">@@@CODE src/somefile.py  fromto: def solver\(@def next\(x,\s*y,
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="typesetting-of-code-is-implied-by-the-file-extension">Typesetting of code is implied by the file extension </h2>

<ul>
 <li> <code>.py</code>: <code>pypro</code> if complete file, <code>pycod</code> if snippet</li>
 <li> <code>.pyopt</code>: visualized execution via the <a href="http://pythontutor.com" target="_blank">Online Python Tutor</a></li>
 <li> <code>.f</code>, <code>.f90</code>, <code>f.95</code>: <code>fpro</code> and <code>fcod</code></li>
 <li> <code>.cpp</code>, <code>.cxx</code>: <code>cpppro</code> and <code>cppcod</code></li>
 <li> <code>.c</code>: <code>cpro</code> and <code>ccod</code></li>
 <li> <code>.*sh</code>: <code>shpro</code> and <code>shcod</code></li>
 <li> <code>.m</code>: <code>mpro</code> and <code>mcod</code></li>
 <li> <code>ptex2tex</code>: between 40+ code styles in LaTeX</li>
 <li> <code>pygments</code> is used for code in HTML (ca 10 styles)</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="slide:opt">Demonstrating code execution; Online Python Tutor</h2>

<p>With <code>!bc pyoptpro</code> or a file <code>*.pyopt</code>, the code applies the
<a href="http://pythontutor.com" target="_blank">Online Python Tutor</a> for displaying
program flow and state of variables:
</p>

<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <iframe width="950" height="500" frameborder="0"
        src="https://pythontutor.com/iframe-embed.html#code=def+solver%28I%2C+a%2C+T%2C+dt%2C+theta%29%3A%0A++++dt+%3D+float%28dt%29%0A++++N+%3D+int%28round%28T%2Fdt%29%29%0A++++T+%3D+N%2Adt%0A++++u+%3D+%5B0.0%5D%2A%28N%2B1%29%0A++++t+%3D+%5Bi%2Adt+for+i+in+range%28N%2B1%29%5D%0A%0A++++u%5B0%5D+%3D+I%0A++++for+n+in+range%280%2C+N%29%3A%0A++++++++u%5Bn%2B1%5D+%3D+%281+-+%281-theta%29%2Aa%2Adt%29%2F%281+%2B+theta%2Adt%2Aa%29%2Au%5Bn%5D%0A++++return+u%2C+t%0A%0Au%2C+t+%3D+solver%28I%3D1%2C+a%3D1%2C+T%3D3%2C+dt%3D1.%2C+theta%3D0.5%29%0Aprint+u&py=2&curInstr=0&cumulative=false">
</iframe>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="slide:sage:cell">Demonstrating code execution; Sage Cell Server</h2>

<p>With <code>!bc pyscpro</code> or a file <code>*.pysc</code>, the code is typeset in
a sage cell:
</p>

<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        
<div class="sage_compute">
<script type="text/x-sage">
a = 2
b = 3
print 'a+b:', a + b

# In a sage cell we can also plot
from matplotlib.pyplot import *
from numpy import *
x = linspace(0, 4*pi, 101)
y = exp(-0.1*x)*cos(x)
plot(x, y)
xlabel('x'); ylabel('y')
show()

</script>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<div class="alert alert-block alert-warning alert-text-normal">
<b>Warning</b>
<p>
<p>Works only in Sphinx documents (but HTML support is possible).</p>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="slide:ipynb">Demonstrating code execution; IPython notebook</h2>

<p>Can take a <a href="http://doconce.github.com/teamods/writing_reports/_static/report.do.txt.html" target="_blank">DocOnce source</a> and transform to an <a href="http://nbviewer.ipython.org/url/hplgit.github.com/teamods/writing_reports/_static/report.ipynb" target="_blank">IPython notebook</a> with <a href="http://doconce.github.com/teamods/writing_reports/_static/report.ipynb.html" target="_blank">source</a></p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="tables">Tables </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">  |--------------------------------|
  |time  | velocity | acceleration |
  |---r-------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Gets rendered as</p>

<table class="dotable" border="1">
<thead>
<tr><th align="center">time</th> <th align="center">velocity</th> <th align="center">acceleration</th> </tr>
</thead>
<tbody>
<tr><td align="right">   0.0     </td> <td align="right">   1.4186      </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="right">   2.0     </td> <td align="right">   1.376512    </td> <td align="right">   11.919          </td> </tr>
<tr><td align="right">   4.0     </td> <td align="right">   1.1E+1      </td> <td align="right">   14.717624       </td> </tr>
</tbody>
</table>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="newcommands-for-math">Newcommands for math </h2>

<ul>
 <li> <code>newcommands*.tex</code> files contain newcommands</li>
 <li> Used directly in LaTeX</li>
 <li> Substitution made for many other formats</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="labels-citations-index-bibliography">Labels, citations, index, bibliography </h2>

<p>Lables, citations, index, and bibliography follow the ideas of
LaTeX, but without backslashes:
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">===== My Section =====
label{sec:mysec}

idx{key equation} idx{$\u$ conservation}

We refer to Section ref{sec:yoursec} for background material on
the *key equation*. Here we focus on the extension


!bt
\begin{equation}
\Ddt{\u} = \mycommand{v} label{mysec:eq:Dudt}
\end{equation}
!et
Equation (ref{mysec:eq:Dudt}) is important, see
cite{Larsen_et_al_2002,Johnson_Friedman_2010a}.
Also, cite{Miller_2000} supports such a view.

Figure ref{mysec:fig:myfig} displays the features.

FIGURE: [fig/myfile, width=600] My figure. label{mysec:fig:myfig}

===== References =====

BIBFILE: papers.pub
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>The <code>papers.pub</code> file must be in <a href="https://github.com/doconce/publish" target="_blank">Publish</a>
format (easy to make from BibTeX).
</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="exercises">Exercises </h2>

<p>DocOnce offers a special format for <em>exercises</em>, <em>problems</em>, <em>projects</em>,
and <em>examples</em>:
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">===== Problem: Flip a Coin =====
label{demo:ex:1}
files=flip_coin.py, flip_coin.pdf
solutions=mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

!bhint
Use `r = random.random()` and define head as `r &lt;= 0.5`.
!ehint
!esubex

!bsubex
Compute the probability of getting heads.

!bans
0.5.
!eans
!esubex
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="rendering-of-the-previous-page">Rendering of the previous page </h2>

<!-- --- begin exercise --- -->
<h2 id="problem-1-flip-a-coin">Problem 1: Flip a Coin </h2>
<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- --- begin subexercise --- -->
<p>
<b>a)</b>
Make a program that simulates flipping a coin \( N \) times.
</p>

<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use <code>r = random.random()</code> and define head as <code>r &lt;= 0.5</code>.
</p>

<!-- --- end hint in exercise --- -->

<!-- --- end subexercise --- -->

<!-- --- begin subexercise --- -->
<p>
<b>b)</b>
Compute the probability of getting heads.
</p>

<!-- --- begin answer of exercise --- -->
<p>
<b>Answer.</b>
0.5.
</p>
<!-- --- end answer of exercise --- -->

<!-- --- end subexercise --- -->

<p>Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.</p>
<!-- solution files: mysol.txt, mysol_flip_coin.py -->

<!-- --- end exercise --- -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="exercises">Exercises </h2>

<p>All <em>exercises</em>, <em>problems</em>, and <em>projects</em> in a document are parsed
and available in a data structure (list of dicts) for further
processing (e.g. making a book of problems).
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">[{&#39;answer&#39;: &#39;&#39;,
  &#39;closing_remarks&#39;: &#39;&#39;,
  &#39;file&#39;: [&#39;flip_coin.py&#39;, &#39;flip_coin.pdf&#39;],
  &#39;hints&#39;: [],
  &#39;keywords&#39;: [&#39;random numbers&#39;, &#39;Monte Carlo simulation&#39;],
  &#39;label&#39;: &#39;demo:ex:1&#39;,
  &#39;solution_file&#39;: [&#39;mysol.txt&#39;, &#39;mysol_flip_coin.py&#39;],
  &#39;subex&#39;: [{&#39;answer&#39;: &#39;&#39;,
             &#39;file&#39;: None,
             &#39;hints&#39;: [&#39;Use `r = random.random()` ...&#39;],
             &#39;solution&#39;: &#39;&#39;,
             &#39;text&#39;: &#39;Make a program that simulates ...&#39;},],
  &#39;title&#39;: &#39;Flip a Coin&#39;,
  &#39;type&#39;: &#39;Problem&#39;}]
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="use-of-preprocessors">Use of preprocessors </h2>

<ul>
 <li> Simple if-else tests a la the C/C++ preprocessor</li>
 <li> <code>FORMAT</code> variable can be used to test on format, e.g.</li> 
<ul>
    <li> if latex/pdflatex do one sort of code (raw LaTeX)</li>
    <li> if html, do another type of code (raw HTML)</li>
</ul>
 <li> Easy to comment out large portions of text</li>
 <li> Easy to make different versions of the document</li>
 <li> The mako preprocessor is really powerful - gives a complete programming language inside the document!</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-admonitions">DocOnce admonitions </h2>

<div class="alert alert-block alert-warning alert-text-normal">
<b>Use with caution!</b>
<p>
<p>Such environments may light up the document, but can be disturbing too.
Some admon styles have icons.
</p>
</div>


<div class="alert alert-block alert-notice alert-text-normal">
<b>Going deeper.</b>
<p>
<p>More details can be separated from the rest.</p>
</div>


<div class="alert alert-block alert-question alert-text-normal">
<b>Time for review!</b>
<p>
<p>Tasks:</p>

<ul>
  <li> Maybe ask a question?</li>
  <li> Or two?</li>
</ul>
</div>


<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>Conclusion:</p>

<ul>
  <li> A special "block" admonition has less pronounced typesetting and can be used when no special icon is desired. Good for slides.</li>
</ul>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="generalized-references">Generalized references </h2>

<ul>
 <li> Chapters can be stand-alone documents or parts of a book</li>
 <li> In a book you frequently refer to other chapters</li>
 <li> When a chapter is a stand-alone document, it must refer to another stand-alone chapter document</li>
 <li> This requires <em>generalized cross-referencing</em></li>
 <li> LaTeX has a solution: <code>xr</code></li>
 <li> DocOnce has a solution also for HTML, Sphinx, Markdown, ...</li>
</ul>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">ref[internal][latex cite][external]
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">...as shown in ref[Section ref{sec:eqs}][ in cite{math_eqs_2020}][
the document &quot;Mathematical Equations&quot;:
<span style="color: #BA2121">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}].
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="slides">Slides </h2>

<p>Very effective way to generate slides from running text:</p>

<ul>
 <li> Take a copy of your DocOnce prose</li>
 <li> Strip off as much text as possible</li>
 <li> Emphasize key points in bullet items</li>
 <li> Focus on key equations, figures, movies, key code snippets</li>
 <li> Insert <code>!split</code> wherever you want a new slide to begin</li>
 <li> Insert <code>!bpop</code> and <code>!epop</code> around elements to pop up in sequence (or insert <code>|\pause|</code> inside code blocks)</li>
 <li> Use 7 <code>=</code> or 5 <code>=</code> in headings (H2 or H3)</li>
 <li> Supported slide types: Beamer, HTML, HTML5 (reveal.js, deck.js, csss, dzslides)</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="example-on-slide-code">Example on slide code </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!split
===== Headline =====

 * Key point 1
 * Key point 2
 * Key point 3: Although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes to investigate
   what happens with the slide layout where there is
   so much text under one point

FIGURE: [fig/teacher1, width=100 frac=0.4]

Key equation:

!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et

And maybe a final comment?

!split
===== Next slide... =====
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="example-on-slide-code">Example on slide code </h2>

<p>Last page gets rendered to</p>
<h2 id="headline">Headline </h2>

<ul>
 <li> Key point 1</li>
 <li> Key point 2</li>
</ul>
<br/><br/>
<center>
<p><img src="fig/teacher1.gif" width="100" align="bottom"></p>
</center>
<br/><br/>

<p>Key equation:</p>

$$ -\nabla^2 u = f \quad\hbox{in }\Omega $$

<p>And maybe a final comment?</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="grid-layout-of-slide-mxn-cells">Grid layout of slide: MxN cells </h2>

<p>Example with a bullet list to the left and
a figure to the right (two cells: 00 and 01):
</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">!split
===== Headline =====

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3
!epop

!bpop
!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et
!epop

!eslidecell

!bslidecell 01
FIGURE: [fig/broken_pen_and_paper, width=400 frac=0.8]
!eslidecell

!split
===== Next slide... =====
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="grid-layout-of-slide-mxn-cells">Grid layout of slide: MxN cells  </h2>

<p>Last page gets rendered to</p>
<h2 id="headline">Headline </h2>

<!-- !bslidecell 00 -->
<!-- !bpop -->
<ul>
 <li> Key point 1</li>
 <li> Key point 2</li>
 <li> Key point 3</li>
</ul>
<!-- !epop -->

<!-- !bpop -->
$$ -\nabla^2 u = f \quad\hbox{in }\Omega $$

<!-- !epop -->

<!-- !eslidecell -->

<!-- !bslidecell 01 -->
<br/><br/>
<center>
<p><img src="fig/broken_pen_and_paper.jpg" width="400" align="bottom"></p>
</center>
<br/><br/>
<!-- !eslidecell -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="classic-slide-types">Classic slide types </h2>

<ul>
 <li> LaTeX Beamer</li>
 <li> Plain HTML w/various styles</li>
<ul>
   <li> separate slides w/navigation</li>
   <li> one big slide</li>
</ul>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="html5-slide-types">HTML5 slide types </h2>

<!-- !bpop -->
<ul>
 <li> Supported HTML5 packages:</li>
<ul>
   <li> <a href="http://lab.hakim.se/reveal-js/" target="_blank">reveal.js</a></li>
   <li> <a href="http://imakewebthings.com/deck.js/" target="_blank">deck.js</a></li>
   <li> <a href="http://paulrouget.com/dzslides/" target="_blank">dzslides</a></li>
   <li> <a href="http://leaverou.github.com/csss/#intro" target="_blank">csss</a></li>
</ul>
 <li> <b>Problem</b>: each package has its own syntax (though similar)</li>
<ul>
   <li> <b>Solution</b>: slide code is autogenerated from DocOnce</li>
</ul>
 <li> <b>Problem</b>: reveal and deck have numerous styles</li>
<ul>
   <li> <b>Solution</b>: easy <a href="http://doconce.github.com/teamods/doconce/demo/index.html" target="_blank">to autogenerate all styles</a> for a talk</li>
</ul>
 <li> <b>Problem</b>: HTML5 slides need many style files</li>
<ul>
   <li> <b>Solution</b>: autocopy all files to talk directory</li>
</ul>
 <li> <b>Problem</b>: original versions of the styles have too large fonts, centering, and other features not so suitable for lectures with much math and code</li>
<ul>
   <li> <b>Solution</b>: DocOnce contains adjusted css files</li>
</ul>
</ul>
<!-- !epop -->

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-to-html">DocOnce to HTML </h2>

<p>Run in terminal window:</p>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format html doconcefile

# Solarized HTML style
doconce format html doconcefile --html_solarized

# Control pygments typesetting of code
doconce format html doconcefile --pygments_html_style=native

# Or use plain &lt;pre&gt; tag for code
doconce format html doconcefile --no_pygments_html

# Further making of slides
doconce slides_html doconcefile reveal --html_slide_theme=darkgray
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="output-for-blog-posts">Output for blog posts </h2>

<p>Two formats of blog posts are supported:</p>

<ul>
 <li> Google's <a href="http://doconce-report-demo.blogspot.no/" target="_blank">blogspot.com</a>: just paste the raw HTML (full support of math and code)</li>
 <li> <a href="http://doconcereportdemo.wordpress.com/" target="_blank">Wordpress</a>: despite limited math, DocOnce manipulates the math such that even <code>equation</code> and <code>align</code> work in Wordpress :-)</li>
</ul>
<p>For wordpress, add <code>--wordpress</code>:</p>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format html doconcefile --wordpress
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>and paste the code into the text area.</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-to-pdflatex">DocOnce to pdfLaTeX </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format pdflatex doconcefile --latex_code_style=lst

pdflatex doconcefile
bibtex doconcefile
pdflatex doconcefile
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-to-sphinx">DocOnce to Sphinx </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format sphinx doconcefile

# Autocreate sphinx directory
doconce sphinx_dir theme=pyramid doconcefile

# Copy files and build HTML document
python automake-sphinx.py

google-chrome sphinx-rootdir/_build/html/index.html
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Much easier than running the Sphinx tools manually!</p>

<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="output-for-wiki">Output for wiki </h2>

<p>Only MediaWiki supports math.</p>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format mwiki doconcefile
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Recommended site:</p>

<ul>
 <li> <a href="http://doconcedemo.shoutwiki.com/wiki/DocOnce_demo_page" target="_blank">ShoutWiki</a> for standard wikis</li>
</ul>
<p>Publishing of "official" documents:</p>

<ul>
 <li> <a href="http://en.wikibooks.org/wiki/Wikibooks:WIW" target="_blank">Wikibooks</a> (can test code in the <a href="http://en.wikibooks.org/wiki/Wikibooks:Sandbox" target="_blank">sandbox</a>)</li>
 <li> Wikipedia</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-to-other-formats">DocOnce to other formats </h2>


<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">doconce format pandoc doconcefile  # (Pandoc extended) Markdown
doconce format gwiki  doconcefile  # Googlecode wiki
doconce format cwiki  doconcefile  # Creole wiki (Bitbucket)
doconce format rst    doconcefile  # reStructuredText
doconce format plain  doconcefile  # plain, untagged text for email
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="installation">Installation </h2>

<ul>
 <li> Source at <a href="https://github.com/doconce/doconce" target="_blank">GitHub</a> (recommended!)</li>
<ul>
   <li> <code>git clone</code> + <code>python setup.py install</code></li>
</ul>
 <li> Many <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#installation-of-doconce-and-its-dependencies" target="_blank">dependencies...</a></li>
<ul>
   <li> Must have <code>preprocess</code> and <code>mako</code></li>
   <li> Need <code>latex</code>, <code>sphinx</code>, <code>pandoc</code>, etc. (see the <a href="http://doconce.github.io/doconce/doc/pub/manual/html/manual.html#installation-of-doconce-and-its-dependencies" target="_blank">Installation</a> description)</li>
   <li> Easy for slides: only <code>preprocess</code> and <code>mako</code> are needed :-)</li>
</ul>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="writing-tips-for-latex-writers-who-want-to-convert-to-doconce-and-generate-other-formats">Writing tips for LaTeX writers who want to convert to DocOnce <em>and generate other formats</em> </h2>

<ul>
 <li> <code>doconce latex2doconce</code> helps the translation</li>
 <li> Use <code>\[ \]</code>, <code>equation</code>, <code>equation*</code>, <code>align</code>, <code>align*</code> and nothing more for equations</li>
 <li> Figures: avoid subfigures (combine image files instead), use <code>\includegraphics</code>, have captions after graphics, use short figure captions, position exactly where needed</li>
 <li> Tables: have them inline (not floating), with no caption</li>
 <li> Computer codes: have them inline (not floating)</li>
 <li> Rewrite all <code>pageref</code> commands</li>
 <li> Do not use <em>algorithm</em> environments, use simple list formatting instead</li>
 <li> Avoid math in section headings</li>
 <li> Use <code>pdflatex</code> or <code>xetex</code></li>
 <li> Use BibTeX (can easily be converted to <a href="https://github.com/doconce/publish" target="_blank">publish</a> used by DocOnce)</li>
 <li> Use <code>\href</code> for links (and insert links frequently)</li>
 <li> Use the <code>bm</code> package for boldface \( \boldsymbol{u} \)</li>
 <li> Place all newcommands in a separate file, with one definition per line (multiline definitions goes to a separate LaTeX preamble file in DocOnce)</li>
 <li> Avoid all fancy LaTeX constructs - more backslashes than needed in math and sections is a bad thing...</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-writing-tips">DocOnce writing tips </h2>

<!-- * See the previous <em>Typesetting concerns I, II and III</em> slides for issues when writing -->
<!-- for multiple formats. However: DocOnce makes a fix so that Sphinx and -->
<!-- other formats works with labels in align environments :-) -->

<p>Figures and movies:</p>

<ul>
 <li> Prepare figures in the right format: EPS for <code>latex</code>, PDF for <code>pdflatex</code>, PNG, GIF or JPEG for HTML formats (<code>html</code>, and HTML output from <code>sphinx</code>, <code>rst</code>, <code>pandoc</code>). One can omit the figure file extension and <code>doconce</code> will pick the most appropriate file for the given output format.</li>
 <li> Let plotting programs produce both PDF/EPS and PNG files. (Recall that PDF and EPS are vector graphics formats that can scale to any size with much higher quality than PNG or other bitmap formats.)</li>
 <li> Use <code>doconce combine_images</code> to combine several images into one.</li>
 <li> Store all figures in a directory (tree) with name <code>fig</code> or <code>fig-X</code>, where <code>X</code> is some short logical name for the current document.</li>
 <li> Store all movies in a directory (tree) with name <code>mov</code> or <code>mov-X</code>.</li>
 <li> Favor the movie formats MP4, WebM, and Ogg (best suited for modern browsers).</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="doconce-writing-tips">DocOnce writing tips </h2>

<ul>
 <li> <code>\boldsymbol{u}</code> gives nicer boldface typesetting of math symbols than the alternatives <code>\boldsymbol{u}</code> and <code>\pmb{u}</code>.</li>
 <li> For HTML-based formats using MathJax, <code>\boldsymbol{u}</code> is not supported and therefore automatically replaced by <code>\boldsymbol{u}</code> by DocOnce.</li>
 <li> Use <code>\&lt;font color=&quot;blue&quot;&gt;formula&lt;/font&gt;</code> in math expressions to color a part.</li>
 <li> Not all LaTeX math is supported by MathJax. Some legal LaTeX math might give MathJax problems - then one has to rewrite the expression to find a syntax that works both with LaTeX and MathJax.</li>
 <li> Use <code>doconce spellcheck *.do.txt</code> to automatically spellcheck files.</li>
 <li> Avoid page references and footnotes.</li>
</ul>
<!-- !split --><br><br><br><br><br><br><br><br>
<h2 id="writing-tips-for-sphinx-and-other-formats">Writing tips for sphinx and other formats </h2>

<p>For output formats different from <code>latex</code>, <code>pdflatex</code>, and <code>html</code>:</p>

<ul>
 <li> Use labels only right after section headings and in equations.</li>
 <li> Be careful with labels in <code>align</code> math environments: <code>pandoc</code> and <code>mwiki</code> cannot refer to them.</li>
 <li> <code>sphinx</code> output requires</li>
<ul>
   <li> no math in section headings or figure captions (gets removed in references).</li>
   <li> running text to start in column 1.</li>
   <li> progressive section headings: after chapter (9 <code>=</code>) comes section (7 <code>=</code>), then subsection (5 <code>=</code>), then paragraph (3 <code>=</code>). Do not make jumps in this progression.</li>
   <li> index entries (``) before the paragraph where they are introduced and place them <em>before</em> subsubsection headings (<code>=== ... ===</code>) and after subsection and section headings.</li>
   <li> a line of text and no comment or math before code or list.</li>
</ul>
</ul>
<!-- ------------------- end of main content --------------- -->
<center style="font-size:80%">
<!-- copyright --> &copy; 2021, Hans Petter Langtangen
</center>
</body>
</html>




<!DOCTYPE html>

<html lang="1.0">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DocOnce Quick Reference &#8212; _ Hans Petter Langtangen, H. P. Langtangen, Kaare Dump and A. Dummy Author documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="DocOnce Quick Reference" href="index.html" /> 
  
       <style type="text/css">
         div.admonition {
           background-color: whiteSmoke;
           border: 1px solid #bababa;
         }
       </style>
      </head>
    <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce Quick Reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">_ Hans Petter Langtangen, H. P. Langtangen, Kaare Dump and A. Dummy Author documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">DocOnce Quick Reference</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="doconce-quick-reference">
<h1>DocOnce Quick Reference<a class="headerlink" href="#doconce-quick-reference" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>Hans Petter Langtangen</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>Apr 14, 2021</p>
</dd>
</dl>
<p><strong>WARNING: This quick reference is very incomplete!</strong></p>
<p><strong>Mission.</strong>
Enable writing documentation with much mathematics and
computer code <em>once, in one place</em> and include it in traditional LaTeX
books, thesis, and reports, and, without extra efforts, also make
professional looking web versions with Sphinx or HTML. Other outlets
include Google's <code class="docutils literal notranslate"><span class="pre">blogger.com</span></code>, Wikipedia/Wikibooks, IPython/Jupyter
notebooks, plus a wide variety of other formats for documents without
mathematics and code.</p>
<div class="section" id="supported-formats">
<h2>Supported Formats<a class="headerlink" href="#supported-formats" title="Permalink to this headline">¶</a></h2>
<p>DocOnce currently translates files to the following formats:</p>
<blockquote>
<div><ul class="simple">
<li><p>LaTeX (format <code class="docutils literal notranslate"><span class="pre">latex</span></code> or <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>)</p></li>
<li><p>HTML (format <code class="docutils literal notranslate"><span class="pre">html</span></code>)</p></li>
<li><p>Sphinx (format <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>)</p></li>
<li><p>Pandoc-extended or GitHub-flavored Markdown (format <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>)</p></li>
<li><p>IPython notebook (format <code class="docutils literal notranslate"><span class="pre">ipynb</span></code>)</p></li>
<li><p>Matlab notebook (format <code class="docutils literal notranslate"><span class="pre">matlabnb</span></code>)</p></li>
<li><p>MediaWiki (format <code class="docutils literal notranslate"><span class="pre">mwiki</span></code>)</p></li>
<li><p>Googlecode wiki (format <code class="docutils literal notranslate"><span class="pre">gwiki</span></code>)</p></li>
<li><p>Creoloe wiki (format <code class="docutils literal notranslate"><span class="pre">cwiki</span></code>)</p></li>
<li><p>reStructuredText (format <code class="docutils literal notranslate"><span class="pre">rst</span></code>)</p></li>
<li><p>plain (untagged) ASCII (format <code class="docutils literal notranslate"><span class="pre">plain</span></code>)</p></li>
<li><p>Epydoc (format <code class="docutils literal notranslate"><span class="pre">epydoc</span></code>)</p></li>
<li><p>StructuredText (format <code class="docutils literal notranslate"><span class="pre">st</span></code>)</p></li>
</ul>
</div></blockquote>
<p>For documents with much code and mathematics, the best (and most supported)
formats are <code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, and <code class="docutils literal notranslate"><span class="pre">html</span></code>; and to a slightly
less extent <code class="docutils literal notranslate"><span class="pre">mwiki</span></code> and <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>. The HTML format supports blog posts on
Google and Wordpress.</p>
<div class="admonition-use-a-text-editor-with-monospace-font admonition">
<p class="admonition-title">Use a text editor with monospace font</p>
<p>Some DocOnce constructions are sensitive to whitespace,
so you <em>must</em> use a text editor with monospace font.</p>
</div>
</div>
<div class="section" id="emacs-syntax-support">
<h2>Emacs syntax support<a class="headerlink" href="#emacs-syntax-support" title="Permalink to this headline">¶</a></h2>
<p>The file <a class="reference external" href="https://github.com/doconce/doconce/blob/master/misc/.doconce-mode.el">.doconce-mode.el</a>
in the DocOnce source distribution gives a &quot;DocOnce Editing Mode&quot; in
Emacs. Store the raw version of the file in the home directory and add
<code class="docutils literal notranslate"><span class="pre">(load-file</span> <span class="pre">&quot;~/.doconce-mode.el&quot;)</span></code> to the <code class="docutils literal notranslate"><span class="pre">.emacs</span></code> file.</p>
<p>Besides syntax highlighting of DocOnce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Emacs key</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ctrl+c f</p></td>
<td><p>figure</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c v</p></td>
<td><p>movie/video</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c h1</p></td>
<td><p>heading level 1 (section/h1)</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c h2</p></td>
<td><p>heading level 2 (subsection/h2)</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c h3</p></td>
<td><p>heading level 2 (subsection/h3)</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c hp</p></td>
<td><p>heading for paragraph</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c me</p></td>
<td><p>math environment: <code class="docutils literal notranslate"><span class="pre">!bt</span></code> equation <code class="docutils literal notranslate"><span class="pre">!et</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c ma</p></td>
<td><p>math environment: <code class="docutils literal notranslate"><span class="pre">!bt</span></code> align <code class="docutils literal notranslate"><span class="pre">!et</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c ce</p></td>
<td><p>code environment: <code class="docutils literal notranslate"><span class="pre">!bc</span></code> code <code class="docutils literal notranslate"><span class="pre">!ec</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c cf</p></td>
<td><p>code from file: <code class="docutils literal notranslate"><span class="pre">&#64;&#64;&#64;CODE</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c table2</p></td>
<td><p>table with 2 columns</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c table3</p></td>
<td><p>table with 3 columns</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c table4</p></td>
<td><p>table with 4 columns</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c exer</p></td>
<td><p>exercise outline</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+c slide</p></td>
<td><p>slide outline</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+c help</p></td>
<td><p>print this table</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="title-authors-and-date">
<h2>Title, Authors, and Date<a class="headerlink" href="#title-authors-and-date" title="Permalink to this headline">¶</a></h2>
<p>A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span><span class="gh">TITLE: On an Ultimate Markup Language</span>
<span class="gh">AUTHOR:</span> H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory &amp; Dept. of Informatics, Univ. of Oslo
<span class="gh">AUTHOR:</span> Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
<span class="gh">AUTHOR:</span> A. Dummy Author
<span class="gh">DATE:</span> today
<span class="gh">TOC:</span> on
</pre></div>
</div>
<p>The entire title must appear on a single line.
The author syntax is</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>name Email: somename@adr.net at institution1 &amp; institution2
</pre></div>
</div>
<p>where the email is optional, the &quot;at&quot; keyword is required if one or
more institutions are to be specified, and the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> keyword
separates the institutions (the keyword <code class="docutils literal notranslate"><span class="pre">and</span></code> works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.</p>
<p>The date can be set as any text different from <code class="docutils literal notranslate"><span class="pre">today</span></code> if not the
current date is wanted, e.g., <code class="docutils literal notranslate"><span class="pre">Feb</span> <span class="pre">22,</span> <span class="pre">2016</span></code>.</p>
<p>The table of contents is removed by writing <code class="docutils literal notranslate"><span class="pre">TOC:</span> <span class="pre">off</span></code>.</p>
</div>
<div class="section" id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h2>
<p>Copyright for selected authors and/or institutions are easy to insert as part
of the <code class="docutils literal notranslate"><span class="pre">AUTHOR</span></code> command. The copyright syntax is</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span>{copyright,year1-year2|license}
</pre></div>
</div>
<p>and can be placed after the author or after an institution, e.g.,</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span><span class="gh">AUTHOR:</span> name Email: somename@adr.net {copyright,2006-present} at inst1
<span class="gh">AUTHOR:</span> name {copyright} at inst1 {copyright}
</pre></div>
</div>
<p>The first line gives <code class="docutils literal notranslate"><span class="pre">name</span></code> a copyright for 2006 up to the present year,
while the second line gives copyright to <code class="docutils literal notranslate"><span class="pre">name</span></code> and the institution <code class="docutils literal notranslate"><span class="pre">inst1</span></code>
for the present year. The license can be any formulation, but there are
some convenient abbreviations for Creative Commons (&quot;public domain&quot;)
licenses: <code class="docutils literal notranslate"><span class="pre">CC</span> <span class="pre">BY</span></code> for Creative Commons Attribution 4.0 license,
<code class="docutils literal notranslate"><span class="pre">CC</span> <span class="pre">BY-NC</span></code> for Creative Commons Attribution-NonCommercial 4.0 license.
For example,</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span><span class="gh">AUTHOR:</span> name1 {copyright|CC BY} at institution1
<span class="gh">AUTHOR:</span> name2 {copyright|CC BY} at institution2
</pre></div>
</div>
<p>is a very common copyright for the present year with the Attribution license.
The copyright must be identical for all authors and institutions.</p>
</div>
<div class="section" id="section-types">
<span id="quick-sections"></span><h2>Section Types<a class="headerlink" href="#section-types" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Section type</p></th>
<th class="head"><p>Syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>chapter</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=========</span> <span class="pre">Heading</span> <span class="pre">========</span></code> (9 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>section</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=======</span> <span class="pre">Heading</span> <span class="pre">=======</span></code>    (7 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>subsection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=====</span> <span class="pre">Heading</span> <span class="pre">=====</span></code>        (5 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>subsubsection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">===</span> <span class="pre">Heading</span> <span class="pre">===</span></code>            (3 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>paragraph</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__Heading.__</span></code>               (2 <code class="docutils literal notranslate"><span class="pre">_</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>abstract</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__Abstract.__</span></code> Running text...</p></td>
</tr>
<tr class="row-even"><td><p>appendix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=======</span> <span class="pre">Appendix:</span> <span class="pre">heading</span> <span class="pre">=======</span></code> (7 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>appendix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=====</span> <span class="pre">Appendix:</span> <span class="pre">heading</span> <span class="pre">=====</span></code> (5 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>exercise</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=====</span> <span class="pre">Exercise:</span> <span class="pre">heading</span> <span class="pre">=====</span></code> (5 <code class="docutils literal notranslate"><span class="pre">=</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>Note that abstracts are recognized by starting with <code class="docutils literal notranslate"><span class="pre">__Abstract.__</span></code> or
<code class="docutils literal notranslate"><span class="pre">__Summary.__</span></code> at the beginning of a line and ending with three or
more <code class="docutils literal notranslate"><span class="pre">=</span></code> signs of the next heading.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Exercise:</span></code> keyword can be substituted by <code class="docutils literal notranslate"><span class="pre">Problem:</span></code> or <code class="docutils literal notranslate"><span class="pre">Project:</span></code>.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.</p>
</div>
<div class="section" id="inline-formatting">
<h2>Inline Formatting<a class="headerlink" href="#inline-formatting" title="Permalink to this headline">¶</a></h2>
<p>Words surrounded by <code class="docutils literal notranslate"><span class="pre">*</span></code> are emphasized: <code class="docutils literal notranslate"><span class="pre">*emphasized</span> <span class="pre">words*</span></code> becomes
<em>emphasized words</em>. Similarly, an underscore surrounds words that
appear in boldface: <code class="docutils literal notranslate"><span class="pre">_boldface_</span></code> becomes <strong>boldface</strong>. Colored words
are also possible: the text</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>`color{red}{two red words}`
</pre></div>
</div>
<p>becomes <strong>two red words</strong>.
(But colors do not work in format sphinx).</p>
<p>Quotations appear inside double backticks and double single quotes:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This is a sentence with ``words to be quoted&#39;&#39;.
</pre></div>
</div>
<p>A forced linebreak is specified by <code class="docutils literal notranslate"><span class="pre">&lt;linebreak&gt;</span></code> at the point where the
linebreak in the output is wanted.</p>
<p>Footnotes use a label in the text with the footnote text separate,
preferably after the paragraph where the footnote appears:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Differentiating[^diff2] this equation leads
to a new and much simpler equation.

[^diff2]: More precisely, we apply the divergence
$\nabla\cdot$ on both sides.

Here comes a new paragraph...
</pre></div>
</div>
<p>Non-breaking space is inserted using the tilde character as in LaTeX:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This distance corresponds to 7.5~km, which is traveled in $7.5/5$~s.
</pre></div>
</div>
<p>A horizontal rule for separating content vertically, like this:</p>
<hr class="docutils" />
<p>is typeset as four or more hyphens on a single line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>---------
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, and <code class="docutils literal notranslate"><span class="pre">html</span></code> formats support em-dash,
indicated by three hyphens: <code class="docutils literal notranslate"><span class="pre">---</span></code>. Here is an example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The em-dash is used - without spaces - as alternative to hyphen with
space around in sentences---this way, or in quotes:
*Premature optimization is the root of all evil.*--- Donald Knuth.
</pre></div>
</div>
<p>This text is in the sphinx rendered as</p>
<p>The em-dash is used - without spaces - as alternative to hyphen with
space around in sentences---this way, or in quotes:
<em>Premature optimization is the root of all evil.</em>--- Donald Knuth.</p>
<p>The en-dash consists of two hyphens, either with blanks on both sides - for
something in the middle of a sentence - or in number ranges like 240 - 249.
LaTeX writes are used to and fond of en-dash.</p>
<p>An ampersand, as in Guns &amp; Roses or Texas A&amp;M, is written as a
plain <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> <em>with space(s) on both sides</em>. Single upper case letters on each
side of <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, as in <code class="docutils literal notranslate"><span class="pre">Texas</span> <span class="pre">A</span> <span class="pre">&amp;</span> <span class="pre">M</span></code>, remove the spaces and result in
Texas A&amp;M, while words on both sides of <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, as in <code class="docutils literal notranslate"><span class="pre">Guns</span> <span class="pre">&amp;</span> <span class="pre">Roses</span></code>,
preserve the spaces: Guns &amp; Roses. Failing to have spaces before and
after <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> will result in wrong typesetting of the ampersand in the <code class="docutils literal notranslate"><span class="pre">html</span></code>,
<code class="docutils literal notranslate"><span class="pre">latex</span></code>, and <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> formats.</p>
<p>Emojis, as defined in <a class="reference external" href="http://www.emoji-cheat-sheet.com">http://www.emoji-cheat-sheet.com</a>, can be
inserted in the text, as (e.g.) <code class="docutils literal notranslate"><span class="pre">:dizzy_face:</span></code> with blank
before or after :dizzy_face: Only the <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, <code class="docutils literal notranslate"><span class="pre">html</span></code>, and <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> output
formats translate emoji specifications to images, while all other
formats leave the textual specification in the document. The
command-line option <code class="docutils literal notranslate"><span class="pre">--no_emoji</span></code> removes all emojis from the output
document.</p>
</div>
<div class="section" id="lists">
<h2>Lists<a class="headerlink" href="#lists" title="Permalink to this headline">¶</a></h2>
<p>There are three types of lists: <em>bullet lists</em>, where each item starts
with <code class="docutils literal notranslate"><span class="pre">*</span></code>, <em>enumeration lists</em>, where each item starts with <code class="docutils literal notranslate"><span class="pre">o</span></code> and gets
consecutive numbers,
and <em>description</em> lists, where each item starts with <code class="docutils literal notranslate"><span class="pre">-</span></code> followed
by a keyword and a colon.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2,
    second line of subitem2
 * item3

Note that sublists are consistently indented by one or more blanks as
shown: bullets must exactly match and continuation lines must start
right below the line above.

Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
</pre></div>
</div>
<p>The code above follows.</p>
<p>Here is a bullet list:</p>
<blockquote>
<div><ul class="simple">
<li><p>item1</p></li>
<li><p>item2</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>subitem1 of item2</p></li>
<li><p>subitem2 of item2</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>item3</p></li>
</ul>
</div></blockquote>
<p>Note that sublists are consistently indented by one or more blanks as
shown: bullets must exactly match and continuation lines must start
right below the line above.</p>
<p>Here is an enumeration list:</p>
<ol class="arabic simple">
<li><p>item1</p></li>
<li><p>item2 may appear on multiple lines</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>subitem1 of item2</p></li>
<li><p>subitem2 of item2</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>item3</p></li>
</ol>
<p>And finally a description list:</p>
<blockquote>
<div><dl class="simple">
<dt>keyword1:</dt><dd><p>followed by some text over multiple lines</p>
</dd>
</dl>
<p>keyword2:  followed by text on the next line</p>
<dl class="simple">
<dt>keyword3:</dt><dd><p>and its description may fit on one line</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition-no-indentation-except-in-lists admonition">
<p class="admonition-title">No indentation - except in lists</p>
<p>DocOnce syntax is sensitive to whitespace.
No lines should be indented, only lines belonging to lists.
Indented lines may give strange output in some formats.</p>
</div>
</div>
<div class="section" id="comment-lines">
<h2>Comment lines<a class="headerlink" href="#comment-lines" title="Permalink to this headline">¶</a></h2>
<p>Lines starting with <code class="docutils literal notranslate"><span class="pre">#</span></code> are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats <code class="docutils literal notranslate"><span class="pre">rst</span></code> and
<code class="docutils literal notranslate"><span class="pre">sphinx</span></code> are desired.</p>
<p>Comment lines starting with <code class="docutils literal notranslate"><span class="pre">##</span></code> are not propagated to the output
document and can be used for comments that are only of interest in
the DocOnce file.</p>
<p>Large portions of text can be left out using Preprocess. Just place
<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">EXTRA</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">#endif</span></code> around the text. The command line
option <code class="docutils literal notranslate"><span class="pre">-DEXTRA</span></code> will bring the text alive again.</p>
<p>When using the Mako preprocessor one can also place comments in
the DocOnce source file that will be removed by Mako before
DocOnce starts processing the file.</p>
</div>
<div class="section" id="inline-comments">
<h2>Inline comments<a class="headerlink" href="#inline-comments" title="Permalink to this headline">¶</a></h2>
<p>Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[name: running text]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">name</span></code> is the name or ID of an author or reader making the comment,
and <code class="docutils literal notranslate"><span class="pre">running</span> <span class="pre">text</span></code> is the comment. The name can contain upper and lower
case characters, digits, single quote, <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code>, as well
as space. Here goes an example.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Some running text. [hpl: There must be a space after the colon,
but the running text can occupy multiple lines.]
</pre></div>
</div>
<p>which is rendered as</p>
<blockquote>
<div><p>Some running text. [<strong>hpl 1</strong>: There must be a space after the colon, but the running text can occupy multiple lines.]</p>
</div></blockquote>
<p>The inline comments have simple typesetting in most formats, typically
boldface name, a comment number, with everything surrounded by
parenthesis.  However, with LaTeX output and the <code class="docutils literal notranslate"><span class="pre">--latex_todonotes</span></code>
option to <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">format</span></code>, colorful margin or inline boxes (using the
<code class="docutils literal notranslate"><span class="pre">todonotes</span></code> package) make it very easy to spot the comments.</p>
<p>Running</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>doconce format html mydoc.do.txt --skip_inline_comments
</pre></div>
</div>
<p>removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.</p>
<p>All inline comments to readers can also be physically
removed from the DocOnce source by</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>doconce remove_inline_comments mydoc.do.txt
</pre></div>
</div>
<p>Inline comments can also be used to markup edits. There are add, delete, and
replacement comments for editing:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[add: ,]
[add: .]
[add: ;]
[del: ,]
[del: ,]
[del: .]
[del: ;]
[add: some text]
[del: some text]
[edit: some text -&gt; some replacement for text]
[name: some text -&gt; some replacement for text]
</pre></div>
</div>
<p>For example, the text</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>First consider a quantity $Q$. Without loss of generality, we assume
$Q&gt;0$. There are three, fundamental, basic property of $Q$.
</pre></div>
</div>
<p>can be edited as</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>First[add: ,] consider [edit: a quantity -&gt; the flux]
[del: $Q$. Without loss of generality,
we assume] $Q&gt;0$. There are three[del: ,] fundamental[del: , basic]
[edit: property -&gt; properties] of $Q$. [add: These are not
important for the following discussion.]
</pre></div>
</div>
<p>which in the sphinx output format results in</p>
<blockquote>
<div><p>First, (<strong>edit 2: add comma</strong>) consider (<strong>edit 3: remove</strong> a quantity) (<strong>insert:</strong>)the flux (<strong>end insert</strong>)
(<strong>edit 4</strong>: <strong>delete</strong> <span class="math notranslate nohighlight">\(Q\)</span>. Without loss of generality,
we assume) <span class="math notranslate nohighlight">\(Q&gt;0\)</span>. There are three (<strong>edit 5</strong>: delete comma) fundamental(<strong>edit 6</strong>: <strong>delete</strong> , basic)
(<strong>edit 7: remove</strong> property) (<strong>insert:</strong>)properties (<strong>end insert</strong>) of <span class="math notranslate nohighlight">\(Q\)</span>.  (<strong>edit 8: add</strong>) These are not
important for the following discussion. (<strong>end add</strong>)</p>
</div></blockquote>
<p>To implement these edits, run</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Terminal&gt; doconce apply_edit_comments mydoc.do.txt
</pre></div>
</div>
</div>
<div class="section" id="verbatim-computer-code">
<h2>Verbatim/Computer Code<a class="headerlink" href="#verbatim-computer-code" title="Permalink to this headline">¶</a></h2>
<p>Inline verbatim code is typeset within back-ticks, as in</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Some sentence with `words in verbatim style`.
</pre></div>
</div>
<p>resulting in Some sentence with <code class="docutils literal notranslate"><span class="pre">words</span> <span class="pre">in</span> <span class="pre">verbatim</span> <span class="pre">style</span></code>.</p>
<p>Multi-line blocks of verbatim text, typically computer code, is typeset
in between <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">xxx</span></code> and <code class="docutils literal notranslate"><span class="pre">!ec</span></code> directives, which must appear on the
beginning of the line. A specification <code class="docutils literal notranslate"><span class="pre">xxx</span></code> indicates what verbatim
formatting style that is to be used. Typical values for <code class="docutils literal notranslate"><span class="pre">xxx</span></code> are
nothing, <code class="docutils literal notranslate"><span class="pre">cod</span></code> for a code snippet, <code class="docutils literal notranslate"><span class="pre">pro</span></code> for a complete program,
<code class="docutils literal notranslate"><span class="pre">sys</span></code> for a terminal session, <code class="docutils literal notranslate"><span class="pre">dat</span></code> for a data file (or output from a
program),
<code class="docutils literal notranslate"><span class="pre">Xpro</span></code> or <code class="docutils literal notranslate"><span class="pre">Xcod</span></code> for a program or code snipped, respectively,
in programming <code class="docutils literal notranslate"><span class="pre">X</span></code>, where <code class="docutils literal notranslate"><span class="pre">X</span></code> may be <code class="docutils literal notranslate"><span class="pre">py</span></code> for Python,
<code class="docutils literal notranslate"><span class="pre">cy</span></code> for Cython, <code class="docutils literal notranslate"><span class="pre">sh</span></code> for Bash or other Unix shells,
<code class="docutils literal notranslate"><span class="pre">f</span></code> for Fortran, <code class="docutils literal notranslate"><span class="pre">c</span></code> for C, <code class="docutils literal notranslate"><span class="pre">cpp</span></code> for C++, <code class="docutils literal notranslate"><span class="pre">m</span></code> for MATLAB,
<code class="docutils literal notranslate"><span class="pre">pl</span></code> for Perl. For output in <code class="docutils literal notranslate"><span class="pre">latex</span></code> one can let <code class="docutils literal notranslate"><span class="pre">xxx</span></code> reflect any
defined verbatim environment in the <code class="docutils literal notranslate"><span class="pre">ptex2tex</span></code> configuration file
(<code class="docutils literal notranslate"><span class="pre">.ptex2tex.cfg</span></code>). For <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> output one can insert a comment</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
</pre></div>
</div>
<p>that maps environments (<code class="docutils literal notranslate"><span class="pre">xxx</span></code>) onto valid language types for
Pygments (which is what <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> applies to typeset computer code).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">xxx</span></code> specifier has only effect for <code class="docutils literal notranslate"><span class="pre">latex</span></code> and
<code class="docutils literal notranslate"><span class="pre">sphinx</span></code> output. All other formats use a fixed monospace font for all
kinds of verbatim output.</p>
<p>Here is an example of computer code (see the source of this document
for exact syntax):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">pi</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>Computer code can also be copied from a file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@@@CODE doconce_program.sh
@@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
@@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
@@@CODE doconce_program.sh  envir=shpro fromto: name=@
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;&#64;&#64;CODE</span></code> identifier must appear at the very beginning of the line.
The first line copies the complete file <code class="docutils literal notranslate"><span class="pre">doconce_program.sh</span></code>.
The second line copies from the first line matching the <em>regular
expression</em> <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">clean</span></code> up to, but not including, the line
matching the <em>regular expression</em> <code class="docutils literal notranslate"><span class="pre">^doconce</span> <span class="pre">split_rst</span></code>.
The third line behaves as the second, but the line matching
the first regular expression is not copied (this construction is often
used for copying text between begin-end comment pair in the file).</p>
<p>The copied lines from file are in this example put inside <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">shpro</span></code>
and <code class="docutils literal notranslate"><span class="pre">!ec</span></code> directives, if a complete file is copied, while the
directives become <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">shcod</span></code> and <code class="docutils literal notranslate"><span class="pre">!ec</span></code> when a code snippet is copied
from a file. In general, for a filename extension <code class="docutils literal notranslate"><span class="pre">.X</span></code>, the environment
becomes <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">Xpro</span></code> or <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">Xcod</span></code> for a complete program or snippet,
respectively. The enivorments (<code class="docutils literal notranslate"><span class="pre">Xcod</span></code> and <code class="docutils literal notranslate"><span class="pre">Xpro</span></code>) are only active for
<code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, html`, and <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> output.  The fourth line
above specifies the code environment explicitly (<code class="docutils literal notranslate"><span class="pre">envir=shpro</span></code>) such
that it indicates a complete shell program (<code class="docutils literal notranslate"><span class="pre">shpro</span></code>) even if we copy a
part of the file (here from <code class="docutils literal notranslate"><span class="pre">name=</span></code> until the end of the file).
Copying a part of a file will by default lead to <code class="docutils literal notranslate"><span class="pre">!bc</span> <span class="pre">shcod</span></code>, which indicates a
code snippet that normally needs more code to run properly.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--code_prefix=text</span></code> option adds a path <code class="docutils literal notranslate"><span class="pre">text</span></code> to the filename specified
in the <code class="docutils literal notranslate"><span class="pre">&#64;&#64;&#64;CODE</span></code> command (URLs work). For example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@@@CODE src/myfile.py
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">--code_prefix=http://some.place.net</span></code>, the file</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http://some.place.net/src/myfile.py
</pre></div>
</div>
<p>will be included. If source files have a header with author, email, etc.,
one can remove this header by the option <code class="docutils literal notranslate"><span class="pre">'--code_skip_until=#</span> <span class="pre">---</span></code>.
The lines up to and including (the first) <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">---</span></code> will then be excluded.</p>
<p>Important warnings:</p>
<blockquote>
<div><ul class="simple">
<li><p>A code block must come after a plain sentence (at least for successful output in reStructredText), not directly after a section/paragraph heading, table, comment, figure, or movie.</p></li>
<li><p>Verbatim code blocks inside lists can be ugly when typeset in some output formats. A more robust approach is to replace the list with paragraphs that include headings.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="latex-mathematics">
<h2>LaTeX Mathematics<a class="headerlink" href="#latex-mathematics" title="Permalink to this headline">¶</a></h2>
<p>DocOnce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats <code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code>,
pdflatex`, <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>, and <code class="docutils literal notranslate"><span class="pre">mwiki</span></code> work with this syntax while all other
formats will just display the raw LaTeX code.</p>
<p>Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
<span class="math notranslate nohighlight">\(Ax=b\)</span>. To help increase readability in other formats than <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>,
<code class="docutils literal notranslate"><span class="pre">latex</span></code>, and <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, inline mathematics may have a more human
readable companion expression. The syntax is like</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$\sin(\norm{\bf u})$|$sin(||u||)$
</pre></div>
</div>
<p>That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.</p>
<p>Blocks of LaTeX mathematics are written within
<code class="docutils literal notranslate"><span class="pre">!bt</span></code>
and
<code class="docutils literal notranslate"><span class="pre">!et</span></code> (begin/end TeX) directives starting on the beginning of a line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>!bt
\begin{align*}
\nabla\cdot \pmb{u} &amp;= 0,\\
\nabla\times \pmb{u} &amp;= 0.
\end{align*}
!et
</pre></div>
</div>
<p>This LaTeX code gets rendered as</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\nabla\cdot \pmb{u} &amp;= 0,\\
\nabla\times \pmb{u} &amp;= 0.
\end{align*}\end{split}\]</div>
<p>Here is a single equation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
</pre></div>
</div>
<p>which results in</p>
<div class="math notranslate nohighlight">
\[\frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]</div>
<p><strong>LaTeX Newcommands.</strong>
The author can define <code class="docutils literal notranslate"><span class="pre">newcommand</span></code> statements in files with names
<code class="docutils literal notranslate"><span class="pre">newcommands*.tex</span></code>. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that <code class="docutils literal notranslate"><span class="pre">newcommands_keep.tex</span></code>
contains the newcommands that are kept in the document, while
those in <code class="docutils literal notranslate"><span class="pre">newcommands_replace.tex</span></code> will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For <code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>,
<code class="docutils literal notranslate"><span class="pre">mwiki</span></code>, <code class="docutils literal notranslate"><span class="pre">ipynb</span></code>, and <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>, the mathematics in newcommands is
rendered nicely anyway. If you desire <code class="docutils literal notranslate"><span class="pre">newcommand</span></code> outside LaTeX
mathematics, simply use a Mako variable or a Mako function (which
will be much more flexible and powerful).</p>
</div>
<div class="section" id="writing-guidelines-especially-for-latex-users">
<span id="manual-latex-guide"></span><h2>Writing Guidelines (Especially for LaTeX Users!)<a class="headerlink" href="#writing-guidelines-especially-for-latex-users" title="Permalink to this headline">¶</a></h2>
<p>LaTeX writers often have their own writing habits and have preferred
LaTeX packages. DocOnce is a simpler format and
corresponds to writing in quite plain LaTeX and making the ascii text
look nice (be careful with the use of white space!). This means that
although DocOnce has borrowed a lot from LaTeX, there are a few points
LaTeX writers should pay attention to. Experience shows that these
points are so important that we list them <em>before</em> we list typical
DocOnce syntax!</p>
<p>Any LaTeX syntax in mathematical formulas is accepted when DocOnce
translates the text to LaTeX, but the following rules should be
followed when translating the text to <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>,
<code class="docutils literal notranslate"><span class="pre">mwiki</span></code>, <code class="docutils literal notranslate"><span class="pre">html</span></code>, or <code class="docutils literal notranslate"><span class="pre">ipynb</span></code> formats.</p>
<blockquote>
<div><ul class="simple">
<li><p>AMS LaTeX mathematics is supported, also for the <code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, and <code class="docutils literal notranslate"><span class="pre">ipynb</span></code> formats.</p></li>
<li><p>If you want LaTeX math blocks to work with <code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">markdown</span></code>, and <code class="docutils literal notranslate"><span class="pre">ipynb</span></code>, only use the following equation environments: <code class="docutils literal notranslate"><span class="pre">\[</span> <span class="pre">...</span> <span class="pre">\]</span></code>, <code class="docutils literal notranslate"><span class="pre">equation*</span></code>, <code class="docutils literal notranslate"><span class="pre">equation</span></code>, <code class="docutils literal notranslate"><span class="pre">align*</span></code>, <code class="docutils literal notranslate"><span class="pre">align</span></code>. <code class="docutils literal notranslate"><span class="pre">alignat*</span></code>, <code class="docutils literal notranslate"><span class="pre">alignat</span></code>. Other environments, such as <code class="docutils literal notranslate"><span class="pre">split</span></code>, <code class="docutils literal notranslate"><span class="pre">multiline</span></code>, <code class="docutils literal notranslate"><span class="pre">gather</span></code> are supported in modern MathJax in HTML and Sphinx, but may have rendering problems (to a larger extent than <code class="docutils literal notranslate"><span class="pre">equation</span></code> and <code class="docutils literal notranslate"><span class="pre">align</span></code>). DocOnce performs extensions to <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">ipynb</span></code>, and other formats such that labels in <code class="docutils literal notranslate"><span class="pre">align</span></code> and <code class="docutils literal notranslate"><span class="pre">alignat</span></code> environments work well. If you face problems with fancy LaTeX equation environments in web formats, try rewriting with plain <code class="docutils literal notranslate"><span class="pre">align</span></code>, <code class="docutils literal notranslate"><span class="pre">nonumber</span></code>, etc.</p></li>
<li><p>Do not use comments inside equations.</p></li>
<li><p>Newcommands in mathematical formulas are allowed, but not in the running text. Newcommands must be defined in files with names <code class="docutils literal notranslate"><span class="pre">newcommands*.tex</span></code>. Use <code class="docutils literal notranslate"><span class="pre">\newcommands</span></code> and not <code class="docutils literal notranslate"><span class="pre">\def</span></code>. Each newcommand must be defined on a single line. Use Mako functions if you need macros in the running text.</p></li>
<li><p>Use labels and refer to them for sections, figures, movies, and equations only. MediaWiki (<code class="docutils literal notranslate"><span class="pre">mwiki</span></code>) does not support references to equations.</p></li>
<li><p>Spaces are not allowed in labels.</p></li>
<li><p>There is just one <code class="docutils literal notranslate"><span class="pre">ref</span></code> command (no <code class="docutils literal notranslate"><span class="pre">\eqref</span></code> for equations) and references to equations must use parentheses. Never use the tilde `` `` (non-breaking space) character before references to figures, sections, etc., but tilde is allowed for references to equations.</p></li>
<li><p>Never use <code class="docutils literal notranslate"><span class="pre">\pageref</span></code> as pages are not a concept in web documents (there is only a <code class="docutils literal notranslate"><span class="pre">ref</span></code> command in DocOnce and it refers to labels).</p></li>
<li><p>Only figures and movies are floating elements in DocOnce, all other elements (code, tables, algorithms) must appear <em>inline</em> without numbers or labels for reference <a class="footnote-reference brackets" href="#exception" id="id1">1</a> (refer to inline elements by a section label). The reason is that floating elements are in general not used in web documents, but we made an exception with figures and movies.</p></li>
<li><p>Keep figure captions shorts as they are used as references in the Sphinx format. Avoid inline mathematics since Sphinx will strip it away in the figure reference. (Many writing styles encourage rich captions that explains everything about the figure; this work well only in the HTML and LaTeX formats.)</p></li>
<li><p>You cannot use <code class="docutils literal notranslate"><span class="pre">subfigure</span></code> to combine several image files in one figure, but you can combine the files into one file using the <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">combine_images</span></code> tool. Refer to individual image files in the caption or text by (e.g.) &quot;left&quot; and &quot;right&quot;, or &quot;upper left&quot;, &quot;lower right&quot;, etc.</p></li>
<li><p>Footnotes can be used as usual in LaTeX, but some HTML formats are not able to display mathematics or inline verbatim or other formatted code (emphasis, boldface, color) in footnotes - keep that in mind.</p></li>
<li><p>Use plain <code class="docutils literal notranslate"><span class="pre">cite</span></code> for references (e.g., <code class="docutils literal notranslate"><span class="pre">\citeauthor</span></code> has no counterpart in DocOnce). The bibliography must be prepared in the Publish format, but import from (clean) BibTeX is possible.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">idx</span></code> for index entries, but put the definitions between paragraphs, not inside them (required by Sphinx).</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">\bm</span></code> command (from the <code class="docutils literal notranslate"><span class="pre">bm</span></code> package, always included by DocOnce) for boldface in mathematics.</p></li>
<li><p>Make sure all ordinary text starts in column 1 on each line. Equations can be indented. The <code class="docutils literal notranslate"><span class="pre">\begin{}</span></code> and <code class="docutils literal notranslate"><span class="pre">\end{}</span></code> directives should start in column 1.</p></li>
<li><p>If you depend on various LaTeX environments for your writings, you have to give these up, or implement <em>user-defined environments</em> in DocOnce. For instance, examples are normally typeset as subsections in DocOnce, but can also utilize a user-defined example environment. Learn about the exercise support in DocOnce for typesetting exercises, problems, and projects.</p></li>
<li><p>Learn about the preprocessors Preprocess and Mako - these are smart tools for, e.g., commenting out/in large portions of text and creating macros.</p></li>
<li><p>Use <em>generalized references</em> when referring to companion documents that may later become part of this document (or migrated out of this document).</p></li>
<li><p>Follow <a class="reference external" href="https://github.com/doconce/setup4book-doconce">recommendations for DocOnce books</a> if you plan to write a book.</p></li>
</ul>
</div></blockquote>
<dl class="footnote brackets">
<dt class="label" id="exception"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>There is an exception: by using <em>user-defined environments</em>
within <code class="docutils literal notranslate"><span class="pre">!bu-name</span></code> and <code class="docutils literal notranslate"><span class="pre">!eu-name</span></code> directives, it is possible to
label any type of text and refer to it. For example, one can have
environments for examples, tables, code snippets, theorems, lemmas, etc.
One can also use Mako functions to implement environments.</p>
</dd>
</dl>
<div class="admonition-use-the-preprocessor-to-tailor-output admonition">
<p class="admonition-title">Use the preprocessor to tailor output</p>
<p>If you really need special LaTeX constructs in the LaTeX output
from DocOnce, you may use use preprocessor if-tests on
the format (typically <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">FORMAT</span> <span class="pre">in</span> <span class="pre">(&quot;latex&quot;,</span> <span class="pre">&quot;pdflatex&quot;)</span></code>) to
include such special LaTeX code. With an else clause you can easily
create corresponding constructions for other formats. This way
of using Preprocess or Mako
allows you to use advanced LaTeX features (or HTML features for the HTML formats)
to fine tune the resulting
document. More tuning can be done by automatic editing of the
output file (e.g., <code class="docutils literal notranslate"><span class="pre">.tex</span></code> or <code class="docutils literal notranslate"><span class="pre">.html</span></code>) produced by DocOnce using
your own scripts or the <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">replace</span></code> and <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">subst</span></code> commands.</p>
</div>
<div class="admonition-autotranslation-of-latex-to-doconce admonition">
<p class="admonition-title">Autotranslation of LaTeX to DocOnce</p>
<p>The tool <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> may help you translate LaTeX files
to DocOnce syntax. However, if you use computer code in floating
list environments, special packages for typesetting algorithms,
example environments, <code class="docutils literal notranslate"><span class="pre">subfigure</span></code> in figures,
or a lot of newcommands in the running text, there will be need for
a lot of manual edits and adjustments.</p>
<p>For examples, figure environments can only be translated by
<code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> if the label is inside the caption and
the figure is typeset like</p>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>
  <span class="k">\centering</span>
  <span class="k">\includegraphics</span><span class="na">[width=0.55\linewidth]</span><span class="nb">{</span>figs/myfig.pdf<span class="nb">}</span>
  <span class="k">\caption</span><span class="nb">{</span>This is a figure. <span class="k">\labe</span><span class="nb">{</span>myfig<span class="nb">}}</span>
<span class="k">\end</span><span class="nb">{</span>figure<span class="nb">}</span>
</pre></div>
</div>
<p>If the LaTeX text is consistent with respect to the placement of the label, a
simple script can autoedit the label inside the caption, but many
LaTeX writers put the label at different places in different figures,
and then it becomes more difficult to autoedit figures and translate
them to the DocOnce <code class="docutils literal notranslate"><span class="pre">FIGURE:</span></code> syntax.</p>
<p>Tables are hard to interpret and translate because headings and
caption can be typeset in many different ways. The type of table
that is recognized looks like</p>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span><span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>
<span class="k">\caption</span><span class="nb">{</span>Here goes the caption.<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>lr<span class="nb">}</span>
<span class="k">\hline</span>
<span class="k">\multicolumn</span><span class="nb">{</span>1<span class="nb">}{</span>c<span class="nb">}{</span><span class="s">$</span><span class="nb">v_</span><span class="m">0</span><span class="s">$</span><span class="nb">}</span> <span class="nb">&amp;</span> <span class="k">\multicolumn</span><span class="nb">{</span>1<span class="nb">}{</span>c<span class="nb">}{</span><span class="s">$</span><span class="nb">f_R</span><span class="o">(</span><span class="nb">v_</span><span class="m">0</span><span class="o">)</span><span class="s">$</span><span class="nb">}</span><span class="k">\\</span>hline
1.2 <span class="nb">&amp;</span> 4.2<span class="k">\1</span>.1 <span class="nb">&amp;</span> 4.0<span class="k">\0</span>.9 <span class="nb">&amp;</span> 3.7
<span class="k">\hline</span>
<span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</pre></div>
</div>
<p>Recall that table captions do not make sense in DocOnce since tables
must be inlined and explained in the surrounding text.</p>
<p>Footnotes are also problematic for <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> since DocOnce
footnotes must have the explanation outside the paragraph where the
footnote is used. This calls for manual work. The translator from
LaTeX to DocOnce will insert <code class="docutils literal notranslate"><span class="pre">_PROBLEM_</span></code> and mark footnotes. One
solution is to avoid footnotes in the LaTeX document if fully automatic
translation is desired.</p>
</div>
</div>
<div class="section" id="hyperlinks">
<h2>Hyperlinks<a class="headerlink" href="#hyperlinks" title="Permalink to this headline">¶</a></h2>
<p>Links use either a link text or the raw URL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Here is some &quot;some link text&quot;: &quot;http://some.net/address&quot;
(as in &quot;search google&quot;: &quot;http://google.com&quot;)
or just the raw address: URL: &quot;http://google.com&quot;.

Links to files typeset in verbatim mode applies backtics:
&quot;`myfile.py`&quot;: &quot;http://some.net/some/place/myfile.py&quot;.

Mail addresses works too: send problems to
&quot;`hpl@simula.no`&quot;: &quot;mailto:hpl@simula.no&quot;
or just &quot;send mail&quot;: &quot;mailto:hpl@simula.no&quot;.
</pre></div>
</div>
</div>
<div class="section" id="figures-and-movies">
<h2>Figures and Movies<a class="headerlink" href="#figures-and-movies" title="Permalink to this headline">¶</a></h2>
<p>Figures and movies have almost equal syntax:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line.
</pre></div>
</div>
<p>Note three important syntax details:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A mandatory comma after the figure/movie filename,</p></li>
<li><p>no comments between <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, and <code class="docutils literal notranslate"><span class="pre">frac</span></code> and no spaces around the <code class="docutils literal notranslate"><span class="pre">=</span></code> characters,</p></li>
<li><p>all of the commands must appear on a single line,</p></li>
<li><p>there must be a blank line after the command.</p></li>
</ol>
</div></blockquote>
<p>The figure file can be listed without extension. DocOnce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, DocOnce will convert
another format to the needed one.</p>
<p>The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The <code class="docutils literal notranslate"><span class="pre">width</span></code>
and <code class="docutils literal notranslate"><span class="pre">height</span></code> parameters affect HTML formats (<code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">rst</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>),
while <code class="docutils literal notranslate"><span class="pre">frac</span></code> is the width of the image as a fraction of the total text
width in the <code class="docutils literal notranslate"><span class="pre">latex</span></code> and <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> formats.</p>
<p>The command-line options <code class="docutils literal notranslate"><span class="pre">--fig_prefix=...</span></code> and <code class="docutils literal notranslate"><span class="pre">--mov_prefix=...</span></code> can
be used to add a path (can be a URL) to all figure and movie files,
respectively.  This is useful when including DocOnce documents in
other DocOnce documents such that the text is compiled in different
directories (with different paths to the figure directory).</p>
<p>Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.</p>
<p>Combining several image files into one can be done by the</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>doconce combine_images image1 image2 ... output_image
</pre></div>
</div>
<p>This command applies <code class="docutils literal notranslate"><span class="pre">montage</span></code> or PDF-based tools to combine the images
to get the highest quality.</p>
<p>YouTube and Vimeo movies will be embedded in <code class="docutils literal notranslate"><span class="pre">html</span></code> and <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> documents
and otherwise be represented by a link. The syntax is</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
</pre></div>
</div>
<p>The latter results in</p>
<iframe width="500" height="278" src="https://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Vimeo movie.</em></div>
<div class="section" id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<p>The table in the section <a class="reference internal" href="#quick-sections"><span class="std std-ref">Section Types</span></a> was written with this
syntax:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
</pre></div>
</div>
<p>Note that</p>
<blockquote>
<div><ul class="simple">
<li><p>Each line begins and ends with a vertical bar (pipe symbol).</p></li>
<li><p>Column data are separated by a vertical bar (pipe symbol).</p></li>
<li><p>There must be a blank line before and after the table.</p></li>
<li><p>There may be horizontal rules, i.e., lines with dashes for indicating the heading and the end of the table, and these may contain characters 'c', 'l', or 'r' for how to align headings or columns. The first horizontal rule may indicate how to align headings (center, left, right), and the horizontal rule after the heading line may indicate how to align the data in the columns (center, left, right). One can also use <code class="docutils literal notranslate"><span class="pre">X</span></code> for potentially very wide text that must be wrapped and left-adjusted (will only affect <code class="docutils literal notranslate"><span class="pre">latex</span></code> and <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> where the <code class="docutils literal notranslate"><span class="pre">tabularx</span></code> package is then used; <code class="docutils literal notranslate"><span class="pre">X</span></code> means <code class="docutils literal notranslate"><span class="pre">l</span></code> in all other formats).</p></li>
<li><p>If the horizontal rules are without alignment information there should be no vertical bar (pipe symbol) between the columns. Otherwise, such a bar indicates a vertical bar between columns in LaTeX.</p></li>
<li><p>Many output formats are so primitive that heading and column alignment have no effect.</p></li>
</ul>
</div></blockquote>
<p>A quick way of generating tables is to place all the entries in a file
with comma as separator (a CSV file) and then run the utility
<code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">csv2table</span></code> to create a table in the DocOnce format.</p>
<p>The command-line option <code class="docutils literal notranslate"><span class="pre">--tables2csv</span></code> (to <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">format</span></code>)
makes DocOnce dump each table to CSV format in a file <code class="docutils literal notranslate"><span class="pre">table_X.csv</span></code>,
where <code class="docutils literal notranslate"><span class="pre">X</span></code> is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.</p>
<p>DocOnce tables can be efficiently made directly from data in CSV files.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Terminal&gt; doconce csv2table mydata.csv &gt; mydata_table.do.txt
</pre></div>
</div>
<p>Now we can do <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">#include</span> <span class="pre">&quot;mydata_table.do.txt&quot;</span></code> in the DocOnce
source file or simply copy the table in <code class="docutils literal notranslate"><span class="pre">mydata_table.do.txt</span></code>
into the DocOnce file.</p>
</div>
<div class="section" id="labels-and-references">
<h2>Labels and References<a class="headerlink" href="#labels-and-references" title="Permalink to this headline">¶</a></h2>
<p>The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>label{name}
</pre></div>
</div>
<p>with no backslash
preceding the label keyword. It is common practice to choose <code class="docutils literal notranslate"><span class="pre">name</span></code>
as some hierarchical name, using a delimiter like <code class="docutils literal notranslate"><span class="pre">:</span></code> or <code class="docutils literal notranslate"><span class="pre">_</span></code> between
(e.g.) section, subsection, and topic.</p>
<p>A reference to the label <code class="docutils literal notranslate"><span class="pre">name</span></code> is written as</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ref{name}
</pre></div>
</div>
<p>again with no backslash before <code class="docutils literal notranslate"><span class="pre">ref</span></code>.</p>
<p>Use labels for sections and equations only, and precede the reference
by &quot;Section&quot; or &quot;Chapter&quot;, or in case of an equation, surround the
reference by parenthesis.</p>
</div>
<div class="section" id="citations-and-bibliography">
<h2>Citations and Bibliography<a class="headerlink" href="#citations-and-bibliography" title="Permalink to this headline">¶</a></h2>
<p>Single citations are written as</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cite{name}
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">name</span></code> is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have <code class="docutils literal notranslate"><span class="pre">name</span></code> on the form
<code class="docutils literal notranslate"><span class="pre">Author1_Author2_YYYY</span></code>, <code class="docutils literal notranslate"><span class="pre">Author_YYYY</span></code>, or <code class="docutils literal notranslate"><span class="pre">Author1_etal_YYYY</span></code>, where
<code class="docutils literal notranslate"><span class="pre">YYYY</span></code> is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cite{name1,name2,name3}
</pre></div>
</div>
<p>The bibliography is specified by a line <code class="docutils literal notranslate"><span class="pre">BIBFILE:</span> <span class="pre">papers.pub</span></code>,
where <code class="docutils literal notranslate"><span class="pre">papers.pub</span></code> is a publication database in the
<a class="reference external" href="https://github.com/doconce/publish">Publish</a> format.
BibTeX <code class="docutils literal notranslate"><span class="pre">.bib</span></code> files can easily be combined to a Publish database
(which DocOnce needs to create bibliographies in other formats
than LaTeX).</p>
</div>
<div class="section" id="generalized-references">
<h2>Generalized References<a class="headerlink" href="#generalized-references" title="Permalink to this headline">¶</a></h2>
<p>There is a <em>generalized referencing</em> feature in DocOnce that allows
a reference with <code class="docutils literal notranslate"><span class="pre">ref</span></code> to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span>ref[internal][cite][external]
</pre></div>
</div>
<p>with a specific example being</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span>As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a &quot;section&quot;:
<span class="s">&quot;testdoc.html#___sec2&quot;</span> in the document
<span class="s">&quot;A Document for Testing DocOnce&quot;</span>: &quot;testdoc.html&quot; cite{testdoc:12}],
DocOnce documents may include movies.
</pre></div>
</div>
<p>The output from a generalized reference is the text <code class="docutils literal notranslate"><span class="pre">internal</span></code> if all
references with <code class="docutils literal notranslate"><span class="pre">ref</span></code> in the text <code class="docutils literal notranslate"><span class="pre">internal</span></code> are references to labels
defined in the
present document. Otherwise, if <code class="docutils literal notranslate"><span class="pre">cite</span></code> is non-empty and the format is
<code class="docutils literal notranslate"><span class="pre">latex</span></code> or <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, one assumes that the references in <code class="docutils literal notranslate"><span class="pre">internal</span></code>
are to external documents declared by a comment line
<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Externaldocuments:</span> <span class="pre">testdoc,</span> <span class="pre">mydoc</span></code> (usually after the title, authors,
and date). In this case the output text is <code class="docutils literal notranslate"><span class="pre">internal</span></code> followed by <code class="docutils literal notranslate"><span class="pre">cite</span></code>,
and the
LaTeX package <code class="docutils literal notranslate"><span class="pre">xr</span></code> is used to handle the labels in the external
documents.  If none of the two situations above applies, the
<code class="docutils literal notranslate"><span class="pre">external</span></code> text will be the output.</p>
</div>
<div class="section" id="index-of-keywords">
<h2>Index of Keywords<a class="headerlink" href="#index-of-keywords" title="Permalink to this headline">¶</a></h2>
<p>DocOnce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>index{name}
</pre></div>
</div>
<p>It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the <code class="docutils literal notranslate"><span class="pre">latex</span></code>,
<code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, <code class="docutils literal notranslate"><span class="pre">rst</span></code>, and <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> formats.</p>
</div>
<div class="section" id="capabilities-of-the-program-doconce">
<h2>Capabilities of The Program <code class="docutils literal notranslate"><span class="pre">doconce</span></code><a class="headerlink" href="#capabilities-of-the-program-doconce" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">doconce</span></code> program can be used for a number of purposes besides
transforming a <code class="docutils literal notranslate"><span class="pre">.do.txt</span></code> file to some format. Here is the
list of capabilities:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DocOnce version <span class="m">1</span>.5.8 <span class="o">(</span>from /home/amarin/doconce/lib/doconce<span class="o">)</span>
Usage: doconce <span class="nb">command</span> <span class="o">[</span>optional arguments<span class="o">]</span>
commands: <span class="nb">help</span> format find subst replace remove spellcheck apply_inline_edits capitalize change_encoding clean combine_images csv2table diff expand_commands expand_mako extract_exercises find_nonascii_chars fix_bibtex4publish gitdiff grab grep guess_encoding gwiki_figsubst html2doconce html_colorbullets jupyterbook include_map insertdocstr ipynb2doconce latex2doconce latex_dislikes latex_exercise_toc latex_footer latex_header latex_problems latin2html lightclean linkchecker list_fig_src_files list_labels makefile md2html md2latex old2new_format ptex2tex pygmentize ref_external remove_exercise_answers remove_inline_comments replace_from_file slides_beamer slides_html slides_markdown sphinx_dir sphinxfix_localURLs split_html split_rst teamod

doconce format html<span class="p">|</span>latex<span class="p">|</span>pdflatex<span class="p">|</span>rst<span class="p">|</span>sphinx<span class="p">|</span>plain<span class="p">|</span>gwiki<span class="p">|</span>mwiki<span class="p">|</span>
               cwiki<span class="p">|</span>pandoc<span class="p">|</span>st<span class="p">|</span>epytext dofile
<span class="c1"># transform doconce file to another format</span>

doconce subst <span class="o">[</span>-s -m -x --restore<span class="o">]</span> regex-pattern <span class="se">\</span>
        regex-replacement file1 file2 ...
<span class="c1"># substitute a phrase by another using regular expressions (in this example -s is the re.DOTALL modifier, -m is the re.MULTILINE modifier, -x is the re.VERBOSE modifier, --restore copies backup files back again)</span>

doconce replace from-text to-text file1 file2 ...
<span class="c1"># replace a phrase by another literally (exact text substitution)</span>

doconce replace_from_file file-with-from-to-replacements file1 file2 ...
<span class="c1"># replace using from and to phrases from file</span>

doconce find expression
<span class="c1"># search for a (regular) expression in all .do.txt files in the current directory tree (useful when removing compilation errors)</span>

doconce include_map mydoc.do.txt
<span class="c1"># print an overview of how various files are included in the root doc</span>

doconce expand_mako mako_code_file funcname file1 file2 ...
<span class="c1"># replace all mako function calls by the `results of the calls</span>

doconce remove_inline_comments dofile
<span class="c1"># remove all inline comments in a doconce file</span>

doconce apply_inline_edits
<span class="c1"># apply all edits specified through inline comments</span>

doconce sphinx_dir <span class="nv">copyright</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span> <span class="nv">title</span><span class="o">=</span><span class="s1">&#39;Long title&#39;</span> <span class="se">\</span>
        <span class="nv">short_title</span><span class="o">=</span><span class="s2">&quot;Short title&quot;</span> <span class="nv">version</span><span class="o">=</span><span class="m">0</span>.1 intersphinx <span class="se">\</span>
        /path/to/mylogo.png dofile
<span class="c1"># create a directory for the sphinx format (requires sphinx version &gt;= 1.1)</span>

doconce format sphinx complete_file
doconce split_rst complete_file
doconce sphinx_dir complete_file
python automake_sphinx.py
<span class="c1"># split a sphinx/rst file into parts according to !split commands</span>

doconce insertdocstr rootdir
<span class="c1"># walk through a directory tree and insert doconce files as docstrings in *.p.py files</span>

doconce lightclean
<span class="c1"># remove all redundant files (keep source .do.txt and results: .pdf, .html, sphinx- dirs, .mwiki, .ipynb, etc.)</span>

doconce clean
<span class="c1"># remove all files that the doconce can regenerate</span>

doconce change_encoding utf-8 latin1 dofile
<span class="c1"># change encoding</span>

doconce guess_encoding filename
<span class="c1"># guess the encoding in a text</span>

doconce find_nonascii_chars file1 file2 ...
<span class="c1"># find non-ascii characters in a file</span>

doconce split_html complete_file.html
<span class="c1"># split an html file into parts according to !split commands</span>

doconce slides_html slide_type complete_file.html
<span class="c1"># create HTML slides from a (doconce) html file</span>

doconce slides_beamer complete_file.tex
<span class="c1"># create LaTeX Beamer slides from a (doconce) latex/pdflatex file</span>

doconce slides_markdown complete_file.md remark --slide_style<span class="o">=</span>light
<span class="c1"># create Remark slides from Markdown</span>

doconce html_colorbullets file1.html file2.html ...
<span class="c1"># replace bullets in lists by colored bullets</span>

doconce extract_exercises tmp_mako__mydoc
<span class="c1"># extract all exercises (projects and problems too)</span>

doconce grab --from<span class="o">[</span>-<span class="o">]</span> from-text <span class="o">[</span>--to<span class="o">[</span>-<span class="o">]</span> to-text<span class="o">]</span> file &gt; result
<span class="c1"># grab selected text from a file</span>

doconce remove --from<span class="o">[</span>-<span class="o">]</span> from-text <span class="o">[</span>--to<span class="o">[</span>-<span class="o">]</span> to-text<span class="o">]</span> file &gt; result
<span class="c1"># remove selected text from a file</span>

doconce grep FIGURE<span class="p">|</span>MOVIE<span class="p">|</span>CODE dofile
<span class="c1"># list all figure, movie or included code files</span>

doconce spellcheck <span class="o">[</span>-d .mydict.txt<span class="o">]</span> *.do.txt
<span class="c1"># run spellcheck on a set of files</span>

doconce ptex2tex mydoc -DMINTED <span class="nv">pycod</span><span class="o">=</span>minted <span class="nv">sys</span><span class="o">=</span>Verbatim <span class="se">\</span>
        <span class="nv">dat</span><span class="o">=</span><span class="se">\b</span>egin<span class="o">{</span>quote<span class="o">}</span><span class="se">\b</span>egin<span class="o">{</span>verbatim<span class="o">}</span><span class="p">;</span><span class="se">\e</span>nd<span class="o">{</span>verbatim<span class="o">}</span><span class="se">\e</span>nd<span class="o">{</span>quote<span class="o">}</span>
<span class="c1"># transform ptex2tex files (.p.tex) to ordinary latex file and manage the code environments</span>

doconce md2html file.md
<span class="c1"># make HTML file via pandoc from Markdown (.md) file</span>

doconce md2latex file.md
<span class="c1"># make LaTeX file via pandoc from Markdown (.md) file</span>

doconce combine_images image1 image2 ... output_file
<span class="c1"># combine several images into one</span>

doconce latex_problems mydoc.log <span class="o">[</span>overfull-hbox-limit<span class="o">]</span>
<span class="c1"># report problems from a LaTeX .log file</span>

doconce list_fig_src_files *.do.txt
<span class="c1"># list all figure files, movie files, and source code files needed</span>

doconce list_labels myfile
<span class="c1"># list all labels in a document (for purposes of cleaning them up)</span>

doconce ref_external mydoc <span class="o">[</span>pubfile<span class="o">]</span>
<span class="c1"># generate script for substituting generalized references</span>

doconce linkchecker *.html
<span class="c1"># check all links in HTML files</span>

doconce capitalize <span class="o">[</span>-d .mydict.txt<span class="o">]</span> *.do.txt
<span class="c1"># change headings from &quot;This is a Heading&quot; to &quot;This is a heading&quot;</span>

doconce latex2doconce latexfile
<span class="c1"># translate a latex document to doconce (requires usually manual fixing)</span>

doconce latex_dislikes latexfile
<span class="c1"># check if there are problems with translating latex to doconce</span>

doconce ipynb2doconce notebookfile
<span class="c1"># translate an IPython/Jupyter notebook to doconce</span>

doconce pygmentize myfile <span class="o">[</span>pygments-style<span class="o">]</span>
<span class="c1"># typeset a doconce document with pygments (for pretty print of doconce itself)</span>

doconce makefile docname doconcefile <span class="o">[</span>html sphinx pdflatex ...<span class="o">]</span>
<span class="c1"># generate a make.py script for translating a doconce file to various formats</span>

doconce diff file1.do.txt file2.do.txt <span class="o">[</span>diffprog<span class="o">]</span>
<span class="c1"># find differences between two files (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)</span>

doconce gitdiff file1 file2 file3 ...
<span class="c1"># find differences between the last two Git versions of several files</span>

doconce csv2table somefile.csv
<span class="c1"># convert csv file to doconce table format</span>

doconce sphinxfix_local_URLs file.rst
<span class="c1"># edit URLs to local files and place them in _static</span>

doconce latin2html file.html
<span class="c1"># replace latex-1 (non-ascii) characters by html codes</span>

doconce fix_bibtex4publish file1.bib file2.bib ...
<span class="c1"># fix common problems in bibtex files for publish import</span>

doconce latex_header
<span class="c1"># print the header (preamble) for latex file</span>

doconce latex_footer
<span class="c1"># print the footer for latex files</span>

doconce expand_commands file1 file2 ...
<span class="c1"># expand short cut commands to full form in files</span>

doconce latex_exercise_toc myfile
<span class="c1"># insert a table of exercises in a latex file myfile.p.tex</span>
</pre></div>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>DocOnce supports <em>Exercise</em>, <em>Problem</em>, <em>Project</em>, and <em>Example</em>.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain <em>elements</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>a headline at the level of a subsection containing one of the words &quot;Exercise:&quot;, &quot;Problem:&quot;, &quot;Project:&quot;, or &quot;Example:&quot;, followed by a title (required)</p></li>
<li><p>a label (optional)</p></li>
<li><p>a solution file (optional)</p></li>
<li><p>name of file with a student solution (optional)</p></li>
<li><p>main exercise text (required)</p></li>
<li><p>a short answer (optional)</p></li>
<li><p>a full solution (optional)</p></li>
<li><p>one or more hints (optional)</p></li>
<li><p>one or more subexercises (subproblems, subprojects), which can also contain a text, a short answer, a full solution, name student file to be handed in, and one or more hints (optional)</p></li>
</ul>
</div></blockquote>
<p>A typical sketch of a a problem without subexercises goes as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the ellipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
&quot;Wolframalpha&quot;: &quot;http://wolframalpha.com&quot; can perhaps
compute the integral.
!ehint
</pre></div>
</div>
<p>If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>===== {Problem}: Derive the Formula for the Area of an Ellipse =====
</pre></div>
</div>
<p>the title becomes just &quot;Derive the ...&quot;.</p>
<p>An exercise with subproblems, answers and full solutions has this
setup-up:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the `!bremarks` and `!eremarks`
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol
</pre></div>
</div>
<p>By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments <code class="docutils literal notranslate"><span class="pre">--without_answers</span></code> and <code class="docutils literal notranslate"><span class="pre">--without_solutions</span></code>
turn off output of answers and solutions, respectively, except for examples. The command line options <code class="docutils literal notranslate"><span class="pre">--answers_at_end</span></code> and <code class="docutils literal notranslate"><span class="pre">--solutions_at_end</span></code> write all answers and solutions to exercises to a separate section at the end of the document, respectively. Combine with <code class="docutils literal notranslate"><span class="pre">--without_answers</span></code> and <code class="docutils literal notranslate"><span class="pre">--without_solutions</span></code> to remove answers and solutions from the main text.</p>
<p>The commands <code class="docutils literal notranslate"><span class="pre">!anshide</span></code> and <code class="docutils literal notranslate"><span class="pre">!solhide</span></code> can be used to hide from the main text answers and solutions, respectively, until the <code class="docutils literal notranslate"><span class="pre">!ansoff</span></code> and <code class="docutils literal notranslate"><span class="pre">!soloff</span></code> commands are encountered. Similarly, the <code class="docutils literal notranslate"><span class="pre">!ansdocend</span></code> and <code class="docutils literal notranslate"><span class="pre">!soldocend</span></code> commands move answers and solutions to the end of the book.</p>
</div>
<div class="section" id="environments">
<h2>Environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h2>
<p>DocOnce environments start with <code class="docutils literal notranslate"><span class="pre">!benvirname</span></code> and end with <code class="docutils literal notranslate"><span class="pre">!eenvirname</span></code>,
where <code class="docutils literal notranslate"><span class="pre">envirname</span></code> is the name of the environment. Here is a listing of
the environments:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: computer code (or verbatim text)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code>: math blocks with LaTeX syntax</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subex</span></code>: sub-exercise</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ans</span></code>: short answer to exercise or sub-exercise</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sol</span></code>: full solution to exercise or sub-exercise</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hint</span></code>: multiple help items in an exercise or sub-exercise</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quote</span></code>: indented text</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">notice</span></code>, <code class="docutils literal notranslate"><span class="pre">summary</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">question</span></code>: admonition boxes with</dt><dd><p>custom title, special icon, and (sometimes) background color</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">block</span></code>, <code class="docutils literal notranslate"><span class="pre">box</span></code>: simpler boxes (<code class="docutils literal notranslate"><span class="pre">block</span></code> may have title but never any icon)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop</span></code>: text to gradually pop up in slide presentations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slidecell</span></code>: indication of cells in a grid layout for elements on a slide</p></li>
</ul>
</div></blockquote>
<p>In addition, the user can define new environments <code class="docutils literal notranslate"><span class="pre">!bc-name</span></code> as
explained in the <a class="reference external" href="http://doconce.github.io/doconce/doc/pub/manual/manual.html#manual:userdef:envir">manual</a>.</p>
</div>
<div class="section" id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h2>
<p>DocOnce documents may utilize a preprocessor, either <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">mako</span></code>. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The <code class="docutils literal notranslate"><span class="pre">mako</span></code> preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">doconce</span> <span class="pre">format</span></code> first runs <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> and then <code class="docutils literal notranslate"><span class="pre">mako</span></code>.
Here is a typical example on utilizing <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> to include another
document, &quot;comment out&quot; a large portion of text, and to write format-specific
constructions:</p>
<div class="highlight-doconce notranslate"><div class="highlight"><pre><span></span><span class="c"># #include &quot;myotherdoc.do.txt&quot;</span>

<span class="c"># #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)</span>
<span class="nb">\begin{table}</span>
\caption{Some words... label{mytab}}
<span class="nb">\begin{tabular}</span>{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} &amp; \multicolumn{1}{c}{velocity} &amp; \multicolumn{1}{c}{acceleration} \\
\hline
0.0          &amp; 1.4186       &amp; -5.01        \\
2.0          &amp; 1.376512     &amp; 11.919       \\
4.0          &amp; 1.1E+1       &amp; 14.717624    \\
\hline
<span class="nb">\end{tabular}</span>
<span class="nb">\end{table}</span>
<span class="c"># #else</span>
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
<span class="c"># #endif</span>

<span class="c"># #ifdef EXTRA_MATERIAL</span>
....large portions of text...
<span class="c"># #endif</span>
</pre></div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">mako</span></code> preprocessor the if-else tests have slightly different syntax.
An <a class="reference external" href="http://doconce.github.com/bioinf-py/">example document</a> contains
some illustrations on how to utilize <code class="docutils literal notranslate"><span class="pre">mako</span></code> (clone the GitHub project and
examine the DocOnce source and the <code class="docutils literal notranslate"><span class="pre">doc/src/make.sh</span></code> script).</p>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Excellent &quot;Sphinx Tutorial&quot; by C. Reller: &quot;<a class="reference external" href="http://people.ee.ethz.ch/~creller/web/tricks/reST.html">http://people.ee.ethz.ch/~creller/web/tricks/reST.html</a>&quot;</p></li>
</ul>
</div></blockquote>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <center>
            <p class="logo"><a href="http://cbc.simula.no/" title="Go to Center for Biomedical Computing">
              <img class="logo" src="_static/cbc_logo.png" alt="Logo"/>
            </a></p>
            </center>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DocOnce Quick Reference</a><ul>
<li><a class="reference internal" href="#supported-formats">Supported Formats</a></li>
<li><a class="reference internal" href="#emacs-syntax-support">Emacs syntax support</a></li>
<li><a class="reference internal" href="#title-authors-and-date">Title, Authors, and Date</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
<li><a class="reference internal" href="#section-types">Section Types</a></li>
<li><a class="reference internal" href="#inline-formatting">Inline Formatting</a></li>
<li><a class="reference internal" href="#lists">Lists</a></li>
<li><a class="reference internal" href="#comment-lines">Comment lines</a></li>
<li><a class="reference internal" href="#inline-comments">Inline comments</a></li>
<li><a class="reference internal" href="#verbatim-computer-code">Verbatim/Computer Code</a></li>
<li><a class="reference internal" href="#latex-mathematics">LaTeX Mathematics</a></li>
<li><a class="reference internal" href="#writing-guidelines-especially-for-latex-users">Writing Guidelines (Especially for LaTeX Users!)</a></li>
<li><a class="reference internal" href="#hyperlinks">Hyperlinks</a></li>
<li><a class="reference internal" href="#figures-and-movies">Figures and Movies</a></li>
<li><a class="reference internal" href="#tables">Tables</a></li>
<li><a class="reference internal" href="#labels-and-references">Labels and References</a></li>
<li><a class="reference internal" href="#citations-and-bibliography">Citations and Bibliography</a></li>
<li><a class="reference internal" href="#generalized-references">Generalized References</a></li>
<li><a class="reference internal" href="#index-of-keywords">Index of Keywords</a></li>
<li><a class="reference internal" href="#capabilities-of-the-program-doconce">Capabilities of The Program <code class="docutils literal notranslate"><span class="pre">doconce</span></code></a></li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
<li><a class="reference internal" href="#environments">Environments</a></li>
<li><a class="reference internal" href="#preprocessing">Preprocessing</a></li>
<li><a class="reference internal" href="#resources">Resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">DocOnce Quick Reference</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickref.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce Quick Reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">_ Hans Petter Langtangen, H. P. Langtangen, Kaare Dump and A. Dummy Author documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">DocOnce Quick Reference</a></li> 
      </ul>
    </div>
<div class="wrapper">
  <div class="footer">
    <a href="http://cbc.simula.no"><img src="_static/cbc_banner.png" width="100%"><a>
    <br />
    <br />
      &copy;2021, DocOnce Quick Reference.
  </div>
</div>

  </body>
</html>